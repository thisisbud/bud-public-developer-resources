openapi: 3.0.3
info:
  title: Transaction Enrichment Service - API Documentation
  version: 1.7.1
  description: |-
    # Overview

    ## Introduction
    Welcome to the API documentation for Bud's Transaction Enrichment Service. All endpoints follow standard RESTful principles and example request and response payload snippets are provided to get you up and running quickly and easily.

    To start interacting with Bud's platform, please sign up for access [here](http://thisisbud.com/en-us/sign-up). You will be provided with access to the Bud Developer Console where you can create the API Credentials required to obtain an OAuth2 access token.

    If you have any questions, please use our [Support Center](https://support.thisisbud.com/hc/en-us) or email us on [help@thisisbud.com](mailto:help@thisisbud.com).

    ## Service Breakdown

    | Service | Description |
    |--|--|
    | Customers API | Create and manage your customers on the Bud platform |
    | Ingest & Enrich API | Ingest & Enrich first party transactional data using Bud's core enrichment services, gain access to enrichment resource, and submit customer recategorisation corrections |
    | Insights API | Obtain a deeper understanding of your customers transactional data and use these endpoints to help build personal financial management tools and more |
    | Signal API | Contextual, relevant triggers and notifications that drive action from customers. |

    ## Environments and API Base URIs

    Bud supports the use of a single environment on its US based platform: https://api-us.thisisbud.com

    #### About

    Bud’s production environment is designed for use within your application when going live to real Customers. The environment is fully scalable, secure and facilitates the use of real Customer data.

    #### API Access

    To start interacting with Bud’s Production environment you must first sign up for a developer account. For further assistance please contact: help@thisisbud.com.

    ## Message formats

    Bud’s platform is made available through Application Programming Interface (API) endpoints, all of which adhere to [RESTful](https://restfulapi.net/) principles. Standard HTTP verbs and status codes are used for requests and response statuses. Request and response payloads are [JSON](http://www.json.org/) encoded data formatted. Communication with the Bud Platform is handled over HTTPS protocol only.

    | Data Type | Standard |
    | -- | -- |
    | Strings encoding | `UTF-8` |
    | Datetime | `ISO 8601` |
    | Currency codes | `ISO 4217` |

    ### HTTP Verbs

    | Verb | Usage Context |
    | -- | -- |
    | GET | Used to retrieve the resource representation or metadata |
    | POST | Used to create a new resource on the server |
    | PUT | Used to update the resource state |
    | PATCH | Used to partially update a resource |
    | DELETE | Used to delete the resource|

    ### HTTP Response Codes

    | Code Class |  Description |
    | -- | -- |
    | `1XX` | Informational - provisional response from the server |
    | `2XX` | Success - the request has been processed successfully by the server |
    | `4XX` | Client Error - the request has not been processed due to client-side issue with the request |
    | `5XX` | Server Error - the request has not been processed due to server-side issue |

    ## Requests Custom Headers

    Some endpoints will require the presence of custom headers in the HTTP Request to be properly processed by Bud Platform services.

    | Header Name | Description|
    | ----------- | ---------------------------- |
    | `X-Client-Id` | API Credentials `client_id` value required for request authorisation purposes |
    | `X-Customer-Id` | Customer Identifier value necessary for establishing the Customer context of the data to be retrieved or processed |
    | `X-Account-Id` | Customer Account Identifier value necessary for establishing the context to retrieve specific customer’s account data.|
    | `X-From` | Start date from when the transactions data should be returned |
    | `X-To` | End date till when the transactions data should be returned |

    ## Response Styling

    ### Response Custom Headers

    | Header Name |  Description |
    | -- | -- |
    | `X-Request-Id` | Bud request identifier for troubleshooting purposes |

    ## Success Responses

    The description and the listed status codes below indicate that an action requested by the client was successfully processed.

    The successful responses will have status codes in the `200-299` range and have relevant response content where required. However, `204 No Content` and `205 Reset Content` status codes won't contain a response content.

    ### Response Style Properties
    | Field        | Description                                                          | Properties                                    |
    | ------------ | -------------------------------------------------------------------- | --------------------------------------------- |
    | operation_id | A descriptive enough string that is linked to the operation/feature. | A `required` lower case snake case `string`   |
    | data         | A data-set that is relevant to the endpoint.                         | An `optional` single/multidimensional `array` |
    | metadata     | Contains endpoint specific additional information.                   | An `optional` JSON `object`                   |

    #### Examples

    ##### 200 OK

    After getting an existing resource with `GET /resources/{id}`.

    ```json
    {
      "operation_id": "resources_get",
      "data": {
        "id": "111-AAA-222-BBB",
        "name": "Bud",
        "email": "bud@thisisbud.com",
        "created_at": "2019-01-01T15:53:00+05:00"
      }
    }
    ```

    ##### 201 Created

    After creating a new resource with `POST /resources`.

    ```json
    {
      "operation_id": "resources_post",
      "data": {
        "id": "111-AAA-222-BBB"
      }
    }
    ```
    ## Error Responses

    ### Response Style Properties

    | Field        | Description                                                             | Properties                                    |
    | ------------ | ----------------------------------------------------------------------- | --------------------------------------------- |
    | operation_id | A descriptive enough string that is linked to the operation/feature.    | A `required` snake case `string`              |
    | code_id      | A descriptive enough string that is linked to the reason for the error. | A `required` snake case `string`              |
    | message      | An actual user friendly error message.                                  | A `required` `string`                         |
    | metadata     | Contains endpoint specific additional information.                      | An `optional` JSON `object`                   |
    | errors       | A data-set that is relevant to the error.                               | An `optional` JSON `object`                   |

    ### Client Error Responses

    The description and the listed status codes below indicate that the action requested by the client was not successfully processed due to apparent client errors in the request.

    The client errors will have status codes in the 400-499 range and have relevant response content where required.

    #### Generic Client Error Responses
    | Error Code | Cause | Response Body |
    |--------------|---------|-----------|
    |401|Unauthorized|`{"operation_id": "unknown","code_id":"unknown","message": "Unauthorised request","errors": {}}` |
    |404|Not Found|`{"operation_id": "unknown","code_id":"unknown","message": "Route or resource not found","errors": {}}` |
    |405|Method Not Allowed|`{"operation_id": "unknown","code_id":"unknown","message": "Method not allowed","errors": {}}` |

    #### List of Code Ids

    | Name               | Description                                                           |
    | ------------------ | --------------------------------------------------------------------- |
    | failed_validation  | Occurs when a request validation process fails.                       |
    | invalid_login      | Occurs when insufficient login credentials were provided.             |
    | resource_not_found | Occurs when a requested record or a feature was not found.            |
    | unique_constraint  | Occurs when a request tries to create an existing record in database. |

    #### Examples

    ##### 400 Bad Request

    Returned after a failed attempt to create a new resource by passing invalid data to POST /resources.

    After trying to create a new resources by passing invalid data to `POST /resources`.

    ```json
    {
      "operation_id": "resources_post",
      "code_id": "failed_validation",
      "message": "Invalid request payload.",
      "metadata": {},
      "errors": {
        "name": "This value is required.",
        "email": "This value is invalid."
      }
    }
    ```
    ### Server Error Responses

    The server errors will have status codes in the 500-599 range. The server errors will look very much like the "Client Errors" but will contain bare minimum information attached to them.

    #### Generic Server Error Responses
    | Error Code | Cause | Response Body |
    |--------------|---------|-----------|
    |`500`| Internal Server Error| `{"message": "An error occurred while processing your request"}`|
    |`503`| Service Unavailable| `{"message": "Service unavailable"}` |

    # Updates & Versioning
    Updates to Bud's API documentation are made frequently. The current version of the documentation can be clearly viewed at the very top of this page.

    ## Backward Compatibility

    Bud aims to make integration as seamless as possible for its clients and therefore takes all possible steps to prevent backward-compatibility breaks. In the scenario where a backward-compatibility break is unavoidable, Bud creates a new endpoint, either: (a) by bumping the version within the endpoint URL; or (b) in some circumstances renaming the URL entirely. The previous endpoint may then become deprecated, and support for the endpoint will cease after a period of three months. Clients with access to any of Bud’s API services will be notified of deprecations to any endpoints and provided with ample time in which to make any necessary changes.

    Fields within response or request schemas may also become deprecated. Along with deprecated endpoints, these breaking changes will be clearly highlighted within the below changelog.

    ## Deprecations

    Bud will continue to support deprecations for a period of **three months** after they are first announced.

    | Date of Announcement | Deprecation Details                                                                                              |
    |:---------------------|:-----------------------------------------------------------------------------------------------------------------|
    | 05/09/2022           | Deprecated **Retrieve Merchant Totals V1** in favour of new **Retrieve Merchant Totals V2** endpoint             |
    | 10/02/2023           | Deprecated **Retrieve Enriched Transactions V1** in favour of new **Retrieve Enriched Transactions V2** endpoint |

    ## Changelog

    This changelog represents a list of all changes that have been made to Bud’s API documentation. This includes both backward-compatible and backward-incompatible changes.

    **Version 1.7.5: 07/12/2023**
    > - Updated __Create Customer V3__ endpoint to include `created_at` and a new 200 response for existing customers.

    **Version 1.7.4: 06/12/2023**
    > - Fixed __Retrieve Future Transactions V2__ change\_percentage query parameter example.

    **Version 1.7.3: 05/12/2023**
    > - Updated __Retrieve Accounts V2__ and __Retrieve Account By ID V2__ endpoints with US currency example and updated guide reference.

    **Version 1.7.1: 05/12/2023**
    > - Included documentation for the __Retrieve Accounts V2__ and __Retrieve Account By ID V2__ endpoints to retrieve customer account data with US examples.

    **Version 1.7.0: 01/11/2023**
    > - Added the __Goals API__.

    **Version 1.6.8: 20/10/2023**
    > - Added the  `idempotent_identifier` attribute to the __Create Customer V3__ endpoint.

    **Version 1.6.7: 01/09/2023**
    > - Fixed typo in __Ingest Transaction V2__ schema

    **Version 1.6.6: 02/08/2023**
    > - Fixed error in __Category Totals V2__ path
    > - Fixed error in __Category Totals V2__ include L2 attribute

    **Version 1.6.5: 28/07/2023**
    > - Added documentation for __Category Totals V2__ endpoints

    **Version 1.6.2: 18/07/2023**
    > - Added link to guide to __Create Customers V3__ and __Create Customers V3 (Batch)__.

    **Version 1.6.1: 16/05/2023**
    > - Added documentation for __Retrieve Auth Tokens__ endpoint.

    **Version 1.6.0: 11/05/2023**
    > - Adds two new endpoints: __Create Customers V3__ and __Create Customers V3 (Batch)__.
    > - Introduces the concept of Hosted Customers, which makes Customer Secrets optional on all endpoints which previously required them.

    **Version 1.5.2: 27/04/2023**
    > - Deprecated __Retrieve Financial Products__.
    > - Corrected sample Financial Products in __Retrieve Financial Products V2__.

    **Version 1.5.1: 25/04/2023**
    > - Small fixes in __Enrichment Resources__ endpoints.

    **Version 1.5.0: 25/04/2023**
    > - Added new __Retrieve Categories V2__ endpoint.
    > - Added new __Retrieve Available Categorisation Models V2__ endpoint.
    > - Deprecated __Retrieve Categories__.
    > - Added `models.categorisation` field to _Customer Context_ models.

    **Version 1.4.4: 20/04/2023**
    > - Updated __Retrieve Category Totals__ X-From and X-To parameter descriptions and endpoint description.
    > - Updated __Retrieve Merchant Totals V2__ X-From and X-To parameter descriptions.
    > - Updated __Retrieve Benefits Totals__ X-From and X-To parameter descriptions.
    > - Removed __Retrieve Merchant Totals V1__ following deprecation period.

    **Version 1.4.3: 19/04/2023**
    > - Added `format` query parameter to __Retrieve Categories__.

    **Version 1.4.2: 28/03/2023**
    > - Improve examples in **Ingest Data**

    **Version 1.4.1: 23/03/2023**
    > - Improve examples in **Insights API**
    > - Reorganise **Ingest & Enrich API** and the **Insights API**
    > - Removed **Create Customers V2** to simplify the **Customers API** (we are currently working on our Customers API and a new & improved Create Customers endpoint will be added soon)

    **Version 1.4.0: 21/03/2023**
    > - Clean up some old endpoints to provide a simpler set of currently supported endpoints.
    > - Added new __ Get Subscriptions V1__ endpoint.

    **Version 1.3.4: 16/03/2023**
    > - Update amount descriptions

    **Version 1.3.3: 09/03/2023**
    The changes in this release carry no change to URLs, this is purely the name of the endpoint.
    > - Renamed __List Categories__ to __Retrieve Categories__

    **Version 1.3.2 08/03/2023**
    > - Added new __Get Financial Products V2__ endpoint.

    **Version 1.3.0: 10/02/2023**
    > - Added new **Retrieve Enriched Transactions V2** endpoint
    > - Deprecated **Retrieve Enriched Transactions V1** in favour of new **Retrieve Enriched Transactions V2** endpoint

    **Version 1.2.0: 08/09/2022**
    > - Deprecated __Retrieve Merchant Totals V1__ in favour of the new __Retrieve Merchant Totals V2__ endpoint.

    # Authentication

    <SecurityDefinitions />
  contact:
    name: Bud Support
    email: help@thisisbud.com
    url: https://www.thisisbud.com/en-us/
  x-logo:
    url: data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATAAAABuCAQAAAAKAYdLAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4wQDDggcbXcx7wAABeJJREFUeNrt3W2IFVUcx/HvXRW1VdQedy1bZVfoYX0osVQyfSGElKbRA5oFIaIlhAkWUYm6gvqqDMHMoBeKlhayCCZC2AMRPay7aJrSZmauZhQqaj7t7u1Fi965987s7D1n7pk7/j73zX2Y85//mXt2Zu45Z2ZBREREREREREREREREREREREREREREREREREREREREREREREREROIiZSFGH+YxgsOs5U/X1bFiPDPpQT3bu1DmcaZyg+vErWpjD+s47zoN6Mte0qRJc4Iq18lYMJv2jvosD11mRUeJpD32UO7664BFGQl94DoZY704fbU2rQwKVWYwbc6bQlSPBaYbtMz4K7nP53lpGkK/q8+7MTxUmeEWtmJcGX+j5psmM0I3l9vCirKAV36OuE46QsbfaHL/9opnL9tcpxBf3V0nkAgzWMRj9HadhrH+3Gk7pBqYDZdY3oXfnHE2gc1U2gyoQ6Rk+pKZdgOqgYnXF7TYDGe3gcWgW85QH9cJxMAVm8HsNrBqhhV1U9g33XUCzo1gsM1wdhtYio8ZWsytYdksFrpOwbGhbLYb0PavyLs5wA+c9v28lRa+Zzt/+y5RwwKqaOCdgCjZRvEit/A1a7jou8xwJjOMAb7D+ylqqCmw1imeZ0oCBrv7Mzp+/QofFTDCdZG13Jw3Wi1nOpbZT9+QGUziUkeZ3T49z+P4pqCRuCkhM1jjfMwwqsdG182rsAaWJs0JxuWJ9knGEq+EzODHjDLTcj5NsbjgwehwDazm6vyL5D2MG5i7booKdjE25917M57XhoxUG1hmJUsjrmWtlVl18ZQ2DeCyH6ycT7kpIJ+wuQWVeZJXI69HcpsXHDQN4LajtZIlkcbvzWqn9St1R3nPNIT93wzt/MSZPO+nqKA65699Nos5FdHmgZkMzHnvIj9zLm9+Q7jd0nqP8VtkdSqWNppYxT+u08g+yW8OnKRXw4ac08hnPUscyvjkw5AZXM4os9jzyY6sdZ3h5YC++jLm0lrASf50T5krzEn0QbOLbB8in2FvwKfNPJczCXd0hLV7wPPqL8bybt691//aWWfhkPo2681PjZPDbgP7lYZOl1nNJs9rW4elXD2zfkK8wIFOy2w1XuuWyOpTkuw2sHOhlqrzvIqu59gbuYEdIcqcjSyb65SLX5EHOepgrbuKtJ6nHNQtxtx0U5xM8DoXMkez7K5xM7Tp4iS4WOvszvss5feSP9Fvo5EVnDDfHGJfpd157Y48xFRGmfaEaWcu/qqYZxpCDcxcqR8Mg9xlGkANzNz+BDcx4zEJNTBzv5gPCSeXTvJtmM+3PJqIKdNj6GE3pJsG5mIwOMp1ptnABgd1sq+G7ebnXZncHCKjG3+M1zpLTzMz7AZ00cBG5pmlFb3JmkQTSpPd21HZbWD9Qy21zPPK/zricNH6+B7mvZFreTpEtAFWt0dpsnoWZreBVTG+kyVS1GVN4/vDd9lJVIRY5yzfPdPlrPHHdTwYItr1bkLcTia8M1qPM9F3yRRjcuaYprNmHxzyfNbQyQlnGTM47ynhndFan7WuCywLODz35I2sC9DCXheZHBNpsXvZmu1fkZXs5rjPnPzb8hyAzrIzINr9HOBIwNXat+ZcleS1hame1714izc55jNvbVDBtz7pyWuJuI15P/tnx1F0UwzsQpprO5nil2KIQSZbqcspnwp57+iu2MQT1mMmhNue/MMR3xfwMi8VYRhnmJqXP/MG1lZwyVNMy9l/FR4tf/mdvB553Uz2sXFn+n1YaGCNBZZr5mH25by7xzCb3PKrmM+lgmK1BV4hdc0+2g2zjq8m1wlAOY1dvqXGKep87oZYzUmDW3Vs8+myuIf6Am6AsiT0Nljp/CYl0Twaze9ZaaN3u5w5jAy5L2ylhe/4nAu+S1Qwl+oCsrjCV2wM2KXfwSPUcmPIGv9LPZ91Ye1TEnEb80ztNLE+Dv8MS0RERERERERERERERERERERERERERERERERERERERERERERERERs+Q/rhi5WauEgfQAAAABJRU5ErkJggg==
servers:
  - url: https://api-sandbox-us.thisisbud.com
tags:
  - name: Authentication
    description: |
      Endpoints related to gaining access to the Bud platform via OAuth2 authentication.
    x-displayName: Authentication
    x-traitTag: true
  - name: OAuth2
    x-displayName: OAuth2
    description: |
      Retrieve and manage access and refresh tokens to authenticate to the Bud platform via OAuth2 protocol.
  - name: Customers API
    description: |

      The Customers API allows for the manipulation of a client's "Customers" as registered on the Bud platform. The API is built around resource-oriented URLs, returns JSON-encoded responses, uses standard HTTP response codes and authentication.
    x-displayName: Customers API
    x-traitTag: true
  - name: Manage Customers
    x-displayName: Manage Customers
    description: |
      Manage the number of customers registered onto the Bud platform.
  - name: Financial Data API
    description: |
      These endpoints handle the aggregation and retrieval of financial data. They are designed to be generic across
      a range of ingestion sources and regions.
    x-displayName: Financial Data API
    x-traitTag: true
  - name: Retrieve Financial Data
    x-displayName: Retrieve Financial Data
    description: |
      Retrieve a customer's financial data from a range of sources.
  - name: Ingest & Enrich API
    description: |
      Ingest and enrich your customers transactions using Bud's core enrichment services.
    x-displayName: Ingest & Enrich API
    x-traitTag: true
  - name: Ingest Data
    x-displayName: Ingest Data
    description: |
      Submit transactional data you hold to the Bud Platform to use enrichment and insight services.
  - name: Enriched Transactions
    x-displayName: Enriched Transactions
    description: |
      Retrieve enriched data stored on the Bud Platform      
  - name: Enrichment Totals
    x-displayName: Enrichment Totals
    description: |
      Breakdown your customer's income and expenditure based on Bud's enrichments to help orientate their financial world.
  - name: Enrichment Resources
    x-displayName: Enrichment Resources
    description: |
      Retrieve information and different resources related to Bud's enrichment services.
  - name: Insights API
    description: |
      Get insights about spending, identify key transactions and create your own custom transaction labels to dig deeper into the data and build new services for customers.
    x-displayName: Insights API
    x-traitTag: true
  - name: Regular Insights
    x-displayName: Regular Insights
    description: |
      Obtain insights relating to any regularity found across certain groups of transactions within your customer's accounts.
  - name: Expenditure Insights
    x-displayName: Expenditure Insights
    description: |
      Obtain insights regarding your customer's expenditure.
paths:
  /v1/oauth/token:
    post:
      tags:
        - OAuth2
      summary: OAuth2
      description: |
        This endpoint is used to create access and refresh tokens. 

        The access token is used as a bearer token to authenticate requests to Bud endpoints; 
        the refresh token is used to generate a new access token without the need to supply your client credentials again.

        The access token usually expires after the `expires_in` time (in seconds) has elapsed. 
        However this is not garuanteed, so it is recomended to integrate such as to handle the `401` response code and refresh the token when it this response code is seen.

        Refresh tokens typically expire after 24 hours, but this is not garuanteed.

        > **🚧** Recognise the sensitive nature of access tokens. Implement appropriate security measures to prevent unauthorized access.

        Related Guides:
          - https://docs.thisisbud.com/docs/authentication
      operationId: oauth_token_post
      security:
        - Basic: []
      parameters:
        - in: header
          name: Content-Type
          required: true
          schema:
            type: string
            enum:
              - application/x-www-form-urlencoded
        - $ref: '#/components/parameters/ClientId'
        - in: header
          name: authorization
          schema:
            type: string
            description: |
              The `authorization` header is used to send the client credentials in the form of a base64 encoded string. 
              The format of the string is `client_id:client_secret`.

              This is only required when retrieving an auth token and not whilst refreshing an auth token.

              Example: `Basic Y2xpZW50X2lkOmNsaWVudF9zZWNyZXQ=`
            example: Basic Y2xpZW50X2lkOmNsaWVudF9zZWNyZXQ=
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              oneOf:
                - title: When Retrieving an Auth Token
                  required:
                    - grant_type
                  properties:
                    grant_type:
                      type: string
                      enum:
                        - client_credentials
                - title: When Refreshing an Auth Token
                  required:
                    - grant_type
                    - refresh_token
                  properties:
                    grant_type:
                      type: string
                      enum:
                        - refresh_token
                    refresh_token:
                      type: string
                      description: The `refresh_token` received when initially retieving an auth token.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RetrieveAuthTokenResponse'
              example:
                operation_id: oauth_token_create
                data:
                  access_token: RJptkI22inJMLGmRvdUWUj02WA6cuV0P2cPAF1OkG5F2FAh41hkbGw26v419M7me4qCfsu4pZwfjxB6wOO42dJeTnTAv41C4CnR0Mkism1fwbg6trIo5lNixX1roWD4gZkG8W1Mp4cjaPWe41sc9S61Jmt6TvMgXJ3VRxqnSR9UVlaF7oeJPLwi7sHHcKuaiLrNflwEDE2aZNDVHqmNeiDFrY8GQAzNCQLevqkMKGDsnRtoD2EqX8YKu6G2z3Vr
                  token_type: Bearer
                  expires_in: 3600
                  refresh_token: XO9haFEajZaEqYY8wJUkdsVWG2b3r6jY1aXdsbhNtgmiz4K6e78hZt73kTQjuO57sVo8T6xHAjxk6Day0utTpHnXzUrKy7GSESsmxJoKzcCZeXdJCQLQvyXLSYMlMf3OZVpwcwJp7fnpCARdhmP0oLocSEnTSh60FBO2HQCnseFT6DgtSTsODbx8HC230epKAbkyOeGkC2gWQctXAFb1dNa8r1W8RzPWGe5a6wkAUH2rQiv7RjIA7Eoy663Sf9Q
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              examples:
                Basic Auth Credentials Incorrect:
                  value:
                    operation_id: unknown
                    code_id: unknown
                    message: Unauthorised request
                Basic Auth Missing:
                  value:
                    operation_id: oauth_token_create
                    code_id: failed_validation
                    message: could not extract basic auth headers
                Grant Type Missing/Incorrect or Content Type missing:
                  value:
                    operation_id: oauth_token_create
                    code_id: failed_validation
                    message: could not extract basic auth headers
                    errors:
                      grant_type: grant_type must be one of [client_credentials refresh_token]
        '401':
          description: Unauthorised
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: oauth_token_create
                code_id: unauthorised
                message: Unauthorised.
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: oauth_token_create
                code_id: forbidden
                message: Forbidden.
        '500':
          description: Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: 'An error occurred while processing your request. Get in touch with us and provide us your request id: 7ef63242-ba6d-4661-8014-f9eaa9cb2ad8'
  /platform/v3/customers:
    post:
      security:
        - OAuth2: []
      tags:
        - Manage Customers
      summary: Create Customer V3
      description: |
        This endpoint is used to create a new Customer in order for them to consume the Bud services.

        When we refer to a Customer, we're talking about the end-user of yours and Bud's technology. Customer entities in Bud have unique identifiers and this is used to store the customer data on the Bud platform.

        For more information on how to manage your Bud Customers, please, refer to the following [guide](https://docs-us.thisisbud.com/docs/setup-customers)

        > 📘 Note:
        >
        > By specifying a `client_metadata.idempotent_identifier` value, Bud will associate that identifier to a Customer, 
        > and in future Bud will return the same Customer entity everytime we receive the same `idempotent_identifier` value.
        >
        > This allows you to associate your internal resource to the concept of the Bud Customer.
        >
        > On subsequent requests for a customer with a given `idempotent_identifier`, Bud will return a 200 status code instead of a 201.
        >
        > Please, make sure the `idempotent_identifier` is immutable on your application.
        > 
        > For more information on Customers in the Bud platform, please refer to our handy [guide](https://docs-us.thisisbud.com/docs/setup-customers).
      operationId: platform_v3_customers_post
      parameters:
        - $ref: '#/components/parameters/ClientId'
      requestBody:
        required: false
        content:
          application/json:
            schema:
              properties:
                customer_context:
                  $ref: '#/components/schemas/CustomerContextRequest'
                client_metadata:
                  $ref: '#/components/schemas/ClientMetadata'
            example:
              customer_context:
                type: personal
                region: US
                locale: en-US
                models:
                  categorisation: us-v1
              client_metadata:
                idempotent_identifier: your_internal_id
      responses:
        '200':
          description: Returns the existing customer matching the idempotent identifier.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomerCreateV3Response'
              example:
                operation_id: platform_v3_customers_post
                data:
                  customer_id: 360e5821-4f18-4077-83f4-c9a7c1768bea
                  customer_context:
                    type: personal
                    region: US
                    locale: en-US
                    host_secret: true
                    models:
                      categorisation: us-v1
                  client_metadata:
                    idempotent_identifier: your_internal_id
                metadata:
                  created_at: '2023-01-01T07:02:11Z'
        '201':
          description: The resource has been successfully created.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomerCreateV3Response'
              example:
                operation_id: platform_v3_customers_post
                data:
                  customer_id: 360e5821-4f18-4077-83f4-c9a7c1768bea
                  customer_context:
                    type: personal
                    region: US
                    locale: en-US
                    host_secret: true
                    models:
                      categorisation: us-v1
                  client_metadata:
                    idempotent_identifier: your_internal_id
                metadata:
                  created_at: '2023-01-01T07:02:11Z'
        '400':
          description: The request contains an invalid payload.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: platform_v3_customers_post
                code_id: failed_validation
                message: invalid body
                errors:
                  body:
                    - invalid character 'a' looking for beginning of object key string
        '401':
          description: An unauthenticated request was received.
        '405':
          description: The request uses an unexpected HTTP method.
        5XX:
          description: An unexpected error occurred on the server side.
  /platform/v3/customers/batch:
    post:
      security:
        - OAuth2: []
      tags:
        - Manage Customers
      summary: Create Customers V3 (Batch)
      description: |
        This endpoint is used to create a batch of new Customers in order for them to consume the Bud services.

        For more information on Customers in the Bud platform, please refer to our handy [guide](https://docs-us.thisisbud.com/docs/setup-customers).
      operationId: platform_v3_customers_batch_post
      parameters:
        - $ref: '#/components/parameters/ClientId'
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCustomersV3BatchPayload'
            example:
              number_of_customers: 2
              customer_context:
                type: personal
                region: US
                locale: en-US
                models:
                  categorisation: us-v1
      responses:
        '201':
          description: The resource has been successfully created.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateCustomersV3BatchResponse'
              example:
                operation_id: platform_v3_customers_batch_post
                data:
                  - customer_id: 360e5821-4f18-4077-83f4-c9a7c1768bea
                    customer_context:
                      type: personal
                      region: US
                      locale: en-US
                      models:
                        categorisation: us-v1
                      host_secret: true
                  - customer_id: 8d3e9cd4-fa92-4252-8725-9b20af307b76
                    customer_context:
                      type: personal
                      region: US
                      locale: en-US
                      host_secret: true
                      models:
                        categorisation: us-v1
                metadata:
                  created_at: '2023-01-01T07:02:11Z'
        '400':
          description: The request contains an invalid payload.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: customers_create
                code_id: failed_validation
                message: Failed validation.
                errors:
                  client_id:
                    - This value should not be blank
        '401':
          description: An unauthenticated request was received.
        '405':
          description: The request uses an unexpected HTTP method.
        5XX:
          description: An unexpected error occurred on the server side.
  /platform/v3/customers/{customer_id}:
    delete:
      security:
        - OAuth2: []
      tags:
        - Manage Customers
      summary: Remove Customer V3
      description: This endpoint is used to delete an existing Customer. Calling this endpoint initiates deleting all data relating to a customer returning a task id that can be used to check the status of the delete task.
      operationId: platform_v3_customers_delete
      parameters:
        - in: path
          name: customer_id
          schema:
            type: string
          required: true
          description: The customer identifier.
        - $ref: '#/components/parameters/ClientId'
      responses:
        '202':
          description: The request was successfully accepted for processing and details of the task was returned.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomerDeleteV3Response'
              example:
                operation_id: platform_v3_customers_delete
                data:
                  task_id: e74efdd2-bd44-42b0-9562-106286664966
                metadata:
                  status: Pending
                  next_url: /v3/customers/45cecf3f-8436-4b57-8953-cfdfbd2620d4/e74efdd2-bd44-42b0-9562-106286664966
                  next_url_delay: 50
        '401':
          description: An unauthenticated request was received.
        '404':
          description: The resource was not found.
        '405':
          description: The request uses an unexpected HTTP method.
        5XX:
          description: An unexpected error occurred on the server side.
  /platform/v3/customers/{customer_id}/{task_id}:
    get:
      security:
        - OAuth2: []
      tags:
        - Manage Customers
      summary: Retrieve Remove Customer V3 Status
      description: |
        Check the status and get the result of a Remove Customer V3 task. If the task is not yet completed, the data element will be null.
      operationId: platform_v3_customers_delete_status
      parameters:
        - in: path
          name: customer_id
          schema:
            type: string
          required: true
          description: The customer identifier.
        - $ref: '#/components/parameters/TaskId'
        - $ref: '#/components/parameters/ClientId'
      responses:
        '200':
          description: The request was successfully processed.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomerDeleteV3StatusResponse'
              examples:
                complete:
                  summary: Completed
                  value:
                    operation_id: platform_v3_customers_delete_status
                    data:
                      task_id: e74efdd2-bd44-42b0-9562-106286664966
                      result: success
                    metadata:
                      status: Completed
                pending:
                  summary: Pending
                  value:
                    operation_id: platform_v3_customers_delete_status
                    data:
                      status: Pending
                      task_id: 16fa0748-8a6b-455b-9be9-30ae257965d8
                    metadata:
                      status: Pending
                      next_url: /v3/customers/45cecf3f-8436-4b57-8953-cfdfbd2620d4/e74efdd2-bd44-42b0-9562-106286664966
                      next_url_delay: 50
                failed:
                  summary: Failed
                  value:
                    operation_id: platform_v3_customers_delete_status
                    data:
                      task_id: e74efdd2-bd44-42b0-9562-106286664966
                      result: failed
                    metadata:
                      status: Failed
        '401':
          description: An unauthenticated request was received.
        '404':
          description: The resource was not found.
        '405':
          description: The request uses an unexpected HTTP method.
        5XX:
          description: An unexpected error occurred on the server side.
  /v1/customers/{customer_id}:
    delete:
      deprecated: true
      security:
        - OAuth2: []
      tags:
        - Manage Customers
      summary: Remove Customer
      description: This endpoint is used to delete an existing Customer.
      operationId: customers_delete
      parameters:
        - $ref: '#/components/parameters/PathCustomerID'
        - $ref: '#/components/parameters/ClientId'
      responses:
        '204':
          description: The request was successfully processed and no content is returned.
        '401':
          description: An unauthenticated request was received.
        '404':
          description: The resource was not found.
        '405':
          description: The request uses an unexpected HTTP method.
        5XX:
          description: An unexpected error occurred on the server side.
  /v1/customers/{customer_id}/context:
    get:
      security:
        - OAuth2: []
      tags:
        - Manage Customers
      summary: Retrieve Customer Context
      description: Retrieve the customer level customer context, i.e. a set of parameters that defines their language, region and their customer type.
      operationId: v1_customer_context_get
      parameters:
        - $ref: '#/components/parameters/PathCustomerID'
        - $ref: '#/components/parameters/ClientId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomerContextResponse'
              example:
                operation_id: v1_customer_context_get
                data:
                  type: personal
                  region: US
                  locale: en-US
                  models:
                    categorisation: us-v1
        '401':
          description: An unauthenticated request was received.
        '404':
          description: The resource was not found.
        '405':
          description: The request uses an unexpected HTTP method.
        5XX:
          description: An unexpected error occurred on the server side.
    put:
      security:
        - OAuth2: []
      tags:
        - Manage Customers
      summary: Update Customer Context
      description: Set the customer level customer context.
      operationId: v1_customer_context_put
      parameters:
        - $ref: '#/components/parameters/PathCustomerID'
        - $ref: '#/components/parameters/ClientId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCustomerContextRequest'
            example:
              region: US
              locale: en-US
              models:
                categorisation: us-v1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateCustomerContextResponse'
              example:
                operation_id: v1_customer_context_put
                data:
                  region: US
                  locale: en-US
                  models:
                    categorisation: us-v1
        '401':
          description: An unauthenticated request was received.
        '404':
          description: The resource was not found.
        '405':
          description: The request uses an unexpected HTTP method.
        5XX:
          description: An unexpected error occurred on the server side.
  /financial/v2/accounts:
    get:
      tags:
        - Retrieve Financial Data
      summary: Retrieve Accounts V2
      description: |
        Retrieves a list of a customer's connected accounts. The result can be filtered using the parameters outlined below.

        > 📘 Note:
        >
        > For more information on the Account object, please refer to our handy [guide](https://docs-us.thisisbud.com/docs/accounts).
      operationId: financial_v2_accounts
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/CustomerSecret'
        - $ref: '#/components/parameters/QueryCurrencyUSD'
        - $ref: '#/components/parameters/QueryProvider'
        - in: query
          name: account_type
          schema:
            type: string
          example: current_account
          description: |
            Use this parameter to filter the results returned on the `account_type` associated with each result. Multiple values are accepted. If this parameter is not provided then results of any `account_type` will be returned.

            Currently supported values include (but are not necessarily limited to):
              - `charge_card`
              - `credit_card`
              - `current_account`
              - `e_money`
              - `investment`
              - `loan`
              - `mortgage`
              - `other`
              - `pre_paid_card`
              - `savings`
        - in: query
          name: usage_type
          schema:
            type: string
          example: personal
          description: |
            Use this parameter to filter the results returned on the `usage_type` associated with each result. Multiple values are accepted. If this parameter is not provided then results of any `usage_type` will be returned.

            Currently supported values include (but are not necessarily limited to):
              - `personal`
              - `business`
        - in: query
          name: holder_relationship_type
          schema:
            type: string
          example: joint
          description: |
            Use this parameter to filter the results returned on the `holder_relationship_type` associated with each result. Multiple values are accepted. If this parameter is not provided then results of any `holder_relationship_type` will be returned.

            Currently supported values include (but are not necessarily limited to):
              - `sole`
              - `joint`
              - `delegate`
              - `unknown`
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListAccountsV2Response'
              examples:
                Account Data:
                  value:
                    operation_id: financial_v2_accounts
                    data:
                      - account_id: RxsYshVGded4JeilkXgWKdXA
                        currency: USD
                        holder:
                          name: David Smith
                          relationship: unknown
                        account_name: Plaid Checking
                        account_type: current_account
                        usage_type: personal
                        provider: plaid
                        identifiers:
                          plaid_account_id: 6PdjjRP6LmugpBy5NgQvUqpRXMWxzktg3rwrk7
                          plaid_official_name: Plaid Gold Standard 0% Interest Checking
                        balances:
                          - date: '2023-01-12T00:00:00Z'
                            amount:
                              value: '3552.61'
                              currency: USD
                            type: interim_cleared
                            credit_debit_indicator: credit
                          - date: '2023-01-12T00:00:00Z'
                            amount:
                              value: '3552.61'
                              currency: USD
                            type: interim_cleared
                            credit_debit_indicator: credit
                        credit_lines:
                          - date: '2023-01-12T00:00:00Z'
                            type: pre_agreed
                            amount:
                              value: '1000.00'
                              currency: USD
                    metadata:
                      parameters:
                        currencies:
                          - USD
                      result_count: 1
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              examples:
                CustomerID Not Sent:
                  value:
                    operation_id: financial_v2_accounts
                    code_id: failed_validation
                    message: Invalid request payload.
                    errors:
                      X-Customer-Id:
                        - not present
                CustomerID and CustomerSecret Not Sent:
                  value:
                    operation_id: financial_v2_accounts
                    code_id: failed_validation
                    message: Invalid request payload.
                    errors:
                      X-Customer-Id:
                        - not present
                      X-Customer-Secret:
                        - not present
        '401':
          description: Unauthorised
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Unauthorised request
        '500':
          description: Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: 'An error occurred while processing your request. Get in touch with us and provide us your request id: 7ef63242-ba6d-4661-8014-f9eaa9cb2ad8'
  /financial/v2/accounts/{account_id}:
    get:
      tags:
        - Retrieve Financial Data
      summary: Retrieve Account By ID V2
      description: |
        Retrieves a customer's connected account by its ID.

        > 📘 Note:
        >
        > For more information on the Account object, please refer to our handy [guide](https://docs-us.thisisbud.com/docs/accounts).
      operationId: financial_v2_accounts_account_id
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/CustomerSecret'
        - $ref: '#/components/parameters/PathAccountID'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RetrieveAccountByIDV2Response'
              examples:
                Single Holder Personal Account:
                  value:
                    operation_id: financial_v2_accounts_account_id
                    data:
                      account_id: RxsYshVGded4JeilkXgWKdXA
                      currency: USD
                      holder:
                        name: David Smith
                        relationship: unknown
                      account_name: Plaid Checking
                      account_type: current_account
                      provider: plaid
                      identifiers:
                        plaid_account_id: 6PdjjRP6LmugpBy5NgQvUqpRXMWxzktg3rwrk7
                        plaid_official_name: Plaid Gold Standard 0% Interest Checking
                      balance:
                        date: '2023-01-12T00:00:00Z'
                        booked:
                          amount:
                            value: '3552.61'
                            currency: USD
                          credit_debit_indicator: debit
                        credit_limit:
                          value: '1000.00'
                          currency: USD
                    metadata:
                      parameters:
                        currencies:
                          - USD
                      result_count: 1
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              examples:
                CustomerID Not Sent:
                  value:
                    operation_id: financial_v2_accounts_account_id
                    code_id: failed_validation
                    message: Invalid request payload.
                    errors:
                      X-Customer-Id:
                        - not present
                CustomerID and CustomerSecret Not Sent:
                  value:
                    operation_id: financial_v2_accounts_account_id
                    code_id: failed_validation
                    message: Invalid request payload.
                    errors:
                      X-Customer-Id:
                        - not present
                      X-Customer-Secret:
                        - not present
        '401':
          description: Unauthorised
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Unauthorised request
        '500':
          description: Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: 'An error occurred while processing your request. Get in touch with us and provide us your request id: 7ef63242-ba6d-4661-8014-f9eaa9cb2ad8'
  /v1/ingest/accounts:
    post:
      deprecated: true
      tags:
        - Ingest Data
      summary: Ingest Accounts
      description: |
        Initiate the asynchronous process of pushing a customer's account(s) and balance(s) through the Bud architecture. This request creates a task that stores the given accounts and balances against the specified customers. The Task ID returned by this request can be used to verify the current status of the process.
      operationId: ingest_accounts_post
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/IngestAccountsContentType'
      requestBody:
        required: true
        content:
          '*/*':
            schema:
              oneOf:
                - $ref: '#/components/schemas/IngestAccountsRequest'
                - $ref: '#/components/schemas/IngestPlaidAccountsRequest'
                - $ref: '#/components/schemas/IngestFinicityAccountsRequest'
            examples:
              bud-accounts-v1 Request:
                summary: Bud Accounts V1 Example
                value:
                  - customer_id: c3339af9-2426-44d4-9c4d-ddb8fd281e23
                    customer_secret: 6075654df0e057e97535ab31b80561d7d9e8409606738c2633cdd6dab63e089a
                    accounts:
                      - provider: Barclays
                        account_id: 99473c28-21cf-4a9a-b79e-fd643dd7a4bc
                        currency: GBP
                        account_type: Personal
                        account_sub_type: CurrentAccount
                        details:
                          - scheme_name: UK.OBIE.SortCodeAccountNumber
                            identification: '98765432165444'
                            secondary_identification: '00021'
                            name: Mr Kevin
                        balances:
                          - amount:
                              value: '7.00'
                              currency: GBP
                            credit_debit_indicator: outgoing_debit
                            credit_line:
                              - included: true
                                amount:
                                  value: '200.00'
                                  currency: GBP
                                type: Credit
                            date: '2020-12-01'
                            time: '00:00:00'
                            type: InterimBooked
                  - customer_id: 85db4cdf-5f79-4f4e-8388-f9a52da598a2
                    customer_secret: 6075654df0e057e97535ab31b80561d7d9e8409606738c2633cdd6dab63e089a
                    accounts:
                      - provider: Lloyds
                        account_id: bfd4ea71-58d7-4b24-8820-95029875cc9a
                        currency: GBP
                        account_type: Personal
                        account_sub_type: CurrentAccount
                        details:
                          - scheme_name: UK.OBIE.SortCodeAccountNumber
                            identification: '12312312313200'
                            secondary_identification: '00022'
                            name: Mr Kevin
                        balances:
                          - amount:
                              value: '70005.00'
                              currency: GBP
                            credit_debit_indicator: incoming_credit
                            credit_line:
                              - included: true
                                amount:
                                  value: '100.00'
                                  currency: GBP
                                type: Credit
                            date: '2020-12-01'
                            time: '00:00:00'
                            type: InterimBooked
              plaid-accounts-v1 Request:
                summary: Plaid Accounts V1 Example
                value:
                  - customer_id: c3339af9-2426-44d4-9c4d-ddb8fd281e23
                    customer_secret: 6075654df0e057e97535ab31b80561d7d9e8409606738c2633cdd6dab63e089a
                    accounts:
                      - account_id: 6PdjjRP6LmugpBy5NgQvUqpRXMWxzktg3rwrk
                        balances:
                          available: 100
                          current: 120
                          limit: 1200
                          iso_currency_code: USD
                          last_updated_datetime: '2022-07-13T15:30:00Z'
                        name: Plaid Checking
                        official_name: Plaid Gold Standard 0% Interest Checking
                        type: depository
                        subtype: checking
              finicity-accounts-v1 Request:
                summary: Finicity V1 Accounts Request
                description: A sample finicity v1 accounts ingest request
                value:
                  - customer_id: c3339af9-2426-44d4-9c4d-ddb8fd281e23
                    customer_secret: 95793c357ce9f3738f302db9579e453d03ce44eba814512d0c8038f7c376f586
                    accounts:
                      - id: '1014136057'
                        name: Super Checking
                        balance: 7456
                        type: checking
                        status: active
                        institutionId: '102224'
                        balanceDate: 1588797048
                        currency: USD
                        detail:
                          availableBalanceAmount: 5678.78
                          creditAvailableAmount: 10200
                          creditMaxAmount: 12000
      responses:
        '202':
          description: A new Task has been created to ingest the given accounts. The generated `task_id` can be used to check the Task's status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestTransactionsResponse'
              example:
                operation_id: ingest_accounts_post
                data:
                  task_id: 4cef424c-1d7f-4cab-8be2-aee7e1774a00
                metadata:
                  next_url: /v1/ingest/accounts/4cef424c-1d7f-4cab-8be2-aee7e1774a00
                  next_url_delay: 50
        '400':
          description: Bad Request that fails validations on headers & payload
        '401':
          description: Unauthorized (BearerToken in 'Authorization' header fails the authentication)
        5XX:
          description: An unexpected error occurred on the server side
  /v2/ingest/accounts:
    post:
      tags:
        - Ingest Data
      summary: Ingest Accounts V2
      description: |
        This endpoint is for pushing customer(s) account(s) and balance(s) through the Bud architecture.
        It can ingest data for multiple customers per request.
        By default, this is synchronous and will report any issue with the data in the response.
        If a 'X-Disable-Synchronous' header is present and set to true, the process will create a task in the background and be enrirely 'non-blocking'.
        In this scenario, the response metadata will contain a Task ID and the next URL which would then be used for finding out the operation's result.
      operationId: v2_ingest_accounts_post
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/parameters-IngestAccountsContentType'
        - name: X-Disable-Synchronous
          in: header
          description: If present and set to true, a task is created and a response is returned immediately
          schema:
            type: boolean
            default: 'false'
      requestBody:
        required: true
        content:
          application/bud-accounts+json:
            schema:
              $ref: '#/components/schemas/IngestAccountsRequest'
          application/finicity-accounts-v1+json:
            schema:
              $ref: '#/components/schemas/IngestFinicityAccountsRequest'
          application/plaid-accounts-v1+json:
            schema:
              $ref: '#/components/schemas/IngestPlaidAccountsRequest'
      responses:
        '202':
          description: A new Task has been created to ingest the given transactions. The generated `task_id` can be used to check the Task's status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestV2AsyncResponse'
              example:
                operation_id: v2_ingest_accounts_post
                metadata:
                  task_id: 4cef424c-1d7f-4cab-8be2-aee7e1774a00
                  next_url: /v2/ingest/status/4cef424c-1d7f-4cab-8be2-aee7e1774a00
                  next_url_delay: 250
        '204':
          description: The data has been ingested successfully. Response has no body
        '400':
          description: Bad Request that fails validations on headers and/or payload
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/BodyDecodeError'
                  - $ref: '#/components/schemas/FirstPartyIngestionGenericError'
                  - $ref: '#/components/schemas/AccountsDataValidationError'
        '401':
          description: Unauthorized (BearerToken in 'Authorization' header fails the authentication)
        5XX:
          description: An unexpected error occurred on the server side
  /v2/ingest/transactions:
    post:
      tags:
        - Ingest Data
      summary: Ingest Transactions V2
      description: |
        This endpoint initiates a 'blocking' transaction ingestion and enrichment process. It will return partially enriched transactions and a Task ID which would then be used for finding out the current status of the full enrichment process. The complete enrichment services applied to the data will depend upon the relevant scopes assigned to your Client ID.

        If a 'X-Disable-Synchronous' header is present and set to true, the process will be entirely 'non-blocking', with the returned Task ID providing access to the status of the full enrichment process.

        There are a number of ingest schemas that can be used with this endpoint. These are described in the `Body Params` below. You will need to ensure the content-type header matches the schema used.

        **Note**

        Data validation is performed up-front, as such if this endpoints returns a __200__ or __202__ then the data is correctly formatted.
      operationId: v2_ingest_transactions_post
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/V2IngestTransactionsContentType'
        - $ref: '#/components/parameters/DisableSynchronous'
      requestBody:
        required: true
        content:
          '*/*':
            schema:
              oneOf:
                - $ref: '#/components/schemas/IngestTransactionsV3Request'
                - $ref: '#/components/schemas/IngestPlaidTransactionsRequest'
                - $ref: '#/components/schemas/IngestFinicityTransactionsRequest'
            examples:
              bud-transaction-v3 Request:
                summary: Bud Transaction V3 Example
                value:
                  - customer_id: c3339af9-2426-44d4-9c4d-ddb8fd281e23
                    customer_secret: 6075654df0e057e97535ab31b80561d7d9e8409606738c2633cdd6dab63e089a
                    transactions:
                      - account_id: 275fbbfe-209c-4329-a38b-b324aa386c56
                        transaction_id: cb49a806-c8f1-47e6-9c1d-5172defe97eb
                        description: The RSPCA, Southwater
                        amount: '-10.98'
                        date_time: '2022-10-10T23:00:00Z'
                        currency: GBP
                      - account_id: 275fbbfe-209c-4329-a38b-b324aa386c56
                        transaction_id: e0f1c489-a4f0-4820-84d1-a86ecb4199b7
                        description: The RSPCA, Southwater
                        amount: '-10.98'
                        date_time: '2022-11-10T23:00:00Z'
                        currency: GBP
                    transaction_windows:
                      - account_id: 275fbbfe-209c-4329-a38b-b324aa386c56
                        start: '2022-10-10T23:00:00Z'
                        end: '2022-11-10T23:00:00Z'
              plaid-transaction-v1 Request:
                summary: Plaid Transaction V1 Example
                value:
                  - customer_id: c3339af9-2426-44d4-9c4d-ddb8fd281e23
                    customer_secret: 6075654df0e057e97535ab31b80561d7d9e8409606738c2633cdd6dab63e089a
                    transactions:
                      - account_id: 275fbbfe-209c-4329-a38b-b324aa386c56
                        transaction_id: cb49a806-c8f1-47e6-9c1d-5172defe97eb
                        amount: 99.99
                        date: '2020-01-31'
                        datetime: '2020-06-17T11:00:00Z'
                        payment_channel: in store
                        name: Apple Store
                        original_description: APPLE.COM/BILL
                        iso_currency_code: USD
                        pending: false
                        category:
                          - Shops
                          - Computers and Electronics
                        merchant_name: Apple
                        location:
                          address: 900 fancy street
                          city: New York
                          region: NY
                          postal_code: '96858'
                          country: US
                    transaction_windows:
                      - account_id: 275fbbfe-209c-4329-a38b-b324aa386c56
                        start: '2022-10-10T23:00:00Z'
                        end: '2022-11-10T23:00:00Z'
              finicity-transaction-v1 Request:
                summary: Finicity Transaction V1 Example
                value:
                  - customer_id: c3339af9-2426-44d4-9c4d-ddb8fd281e23
                    customer_secret: 6075654df0e057e97535ab31b80561d7d9e8409606738c2633cdd6dab63e089a
                    transactions:
                      - accountId: 3009327691
                        id: 100976507328
                        amount: -99.99
                        feeAmount: -0.99
                        status: active
                        description: youtube
                        memo: GOOGLE*YOUTUBEPREMIUM GOOGLE*YOUTUBEPREM
                        type: debit
                        transactionDate: '1642521600'
                        postedDate: '1642521600'
                        effectiveDate: '1642521600'
                        currencySymbol: USD
                        categorization:
                          normalizedPayeeName: Apple
                          city: New York
                          state: NY
                          postal_code: '96858'
                          country: USA
                    transaction_windows:
                      - account_id: '3009327691'
                        start: '2022-10-10T23:00:00Z'
                        end: '2022-11-10T23:00:00Z'
      responses:
        '200':
          description: |
            The synchronous enrichment request has succeeded and enriched transaction returned. 
            A new Task has been created to ingest and fully enrich the given transactions. 
            The generated `task_id` can be used to check the Task's status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestV2SyncResponse'
              example:
                operation_id: v2_ingest_transactions_post
                data:
                  - customer_id: 4cef424c-1d7f-4cab-8be2-aee7e1774a00
                    enriched_transactions:
                      - transaction_id: 4cef424c-1d7f-4cab-8be2-aee7e1774a00
                        account_id: 2f5b2055-6253-4cd0-b646-06788342a609
                        description: PAYPAL GOOGLE*YOUTUBEPREMIUM INTERNVJKK
                        credit_debit_indicator: debit
                        status: booked
                        amount:
                          value: '12.04'
                          currency: USD
                        date_time: 2022-11-10T23:00:00Z00:00
                        enrichments:
                          categories:
                            l1:
                              slug: entertainment
                              confidence: '0.99'
                            l2:
                              slug: media_subscriptions
                              confidence: '0.98'
                          merchant:
                            id: 78f20914-afcd-46da-9c0c-27b51a8a7e7b
                            slug: youtube
                            display_name: Youtube
                            logo: http://url/youtube.jpeg
                          processor:
                            id: 18f63293-0217-4520-bbf0-071dca7a9d04
                            slug: paypal
                            display_name: PayPal
                            logo: http://url/paypal_logo.jpeg
                          names:
                            - jane doe
                metadata:
                  task_id: 4cef424c-1d7f-4cab-8be2-aee7e1774a00
                  next_url: /v1/ingest/transactions/4cef424c-1d7f-4cab-8be2-aee7e1774a00
                  next_url_delay: 50
        '202':
          description: A new Task has been created to ingest the given transactions. The generated `task_id` can be used to check the Task's status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestV2AsyncResponse'
              example:
                operation_id: v2_ingest_transactions_post
                metadata:
                  task_id: 4cef424c-1d7f-4cab-8be2-aee7e1774a00
                  next_url: /v1/ingest/transactions/4cef424c-1d7f-4cab-8be2-aee7e1774a00
                  next_url_delay: 50
        '400':
          description: The server will not process the request due to a client error.
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/BodyDecodeError'
                  - $ref: '#/components/schemas/ValidationError'
        '401':
          description: Unauthorized (BearerToken in 'Authorization' header fails the authentication)
        '503':
          description: An unexpected error occurred on the enrichment server. Sync Only
        '504':
          description: An unexpected timeout occurred on the enrichment server. Sync Only
        5XX:
          description: An unexpected error occurred on the server side
  /v2/ingest/status/{task_id}:
    get:
      tags:
        - Ingest Data
      summary: Retrieve Ingestion Task Status
      description: |
        Check the status of an ingest request. Please note that this works for both the Ingest Transactions endpoints And Ingest Accounts endpoints.

        The given status has an overall value and a specific status for each given customer.
      operationId: v2_ingest_status_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/TaskId'
      responses:
        '200':
          description: The request was successfully processed.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/USIngestStatusV2Response'
              examples:
                Pending Task:
                  value:
                    operation_id: v2_ingest_status_get
                    data:
                      status: Pending
                    metadata:
                      task_id: 3d592efc-493a-4548-8008-f738fd0877ab
                      status: Pending
                Successful Task:
                  value:
                    operation_id: v2_ingest_status_get
                    data:
                      - customer_id: f89ae931-8cb3-4352-ac9e-4e4572fe5026
                        status: Completed
                        error: null
                    metadata:
                      task_id: 3d592efc-493a-4548-8008-f738fd0877ab
                      status: Completed
                      ingest_request_id: 213be00c-60ce-9af5-95ab-d450a9ffc2ac
                      ingest_route: v2_ingest_transactions_post
                      ingest_schema: application/bud-transaction-v3+json
                Failed Task:
                  value:
                    operation_id: v2_ingest_status_get
                    data:
                      - customer_id: f89ae931-8cb3-4352-ac9e-4e4572fe5026
                        status: Failed
                        error:
                          accounts[0].currency: 'unexpected currency code: GlkjlkjBP, expected ISO-4217 currency code'
                    metadata:
                      task_id: 3d592efc-493a-4548-8008-f738fd0877ab
                      status: Failed
                      ingest_request_id: 213be00c-60ce-9af5-95ab-d450a9ffc2ac
                      ingest_route: v2_ingest_transactions_post
                      ingest_schema: application/bud-transaction-v3+json
                Partially Completed Task:
                  value:
                    operation_id: v2_ingest_status_get
                    data:
                      - customer_id: c63e1aa6-954c-4cac-9c89-a86715574063
                        status: Completed
                        error: null
                      - customer_id: f89ae931-8cb3-4352-ac9e-4e4572fe5026
                        status: Failed
                        error:
                          accounts[0].currency: 'unexpected currency code: GlkjlkjBP, expected ISO-4217 currency code'
                    metadata:
                      task_id: 3d592efc-493a-4548-8008-f738fd0877ab
                      status: PartialCompleted
                      ingest_request_id: 213be00c-60ce-9af5-95ab-d450a9ffc2ac
                      ingest_route: v2_ingest_transactions_post
                      ingest_schema: application/bud-transaction-v3+json
        '401':
          description: Unauthorized (BearerToken in 'Authorization' header fails the authentication)
        '404':
          description: The task couldn't be found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskNotFoundError'
              example:
                operation_id: v2_ingest_status_get
                code_id: task_not_found
                message: Task ID [6c7d06a7-5b40-4556-91d4-6b6d1a7db3f1] does not exist or it has expired
        '405':
          description: The request uses an unexpected HTTP method
        5XX:
          description: An unexpected error occurred on the server side
  /financial/v2/transactions:
    get:
      tags:
        - Enriched Transactions
      summary: Retrieve Enriched Transactions V2
      description: |
        List the transactions for a customer across all ingestion sources. Ordered by `date_time` and then `transaction_id` descending.
      operationId: v2_transactions_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/CustomerSecret'
        - in: query
          name: date_from
          schema:
            type: string
          example: '2022-02-28'
          description: UTC Date (YYYY-MM-DD) from which the transactions should be returned from.
        - in: query
          name: date_to
          schema:
            type: string
          example: '2022-05-28'
          description: UTC Date (YYYY-MM-DD) from which the transactions should be returned to.
        - in: query
          name: page_size
          schema:
            type: integer
          example: 100
          description: Maximum number of results to be returned. Defaults to 100, maximum is 200
        - in: query
          name: page_token
          schema:
            type: string
          example: eyJvZmZzZXQiOjEwMH0
          description: The token required to fetch a specific page of results. Provided by the `next_page_token` field in the previous request.
        - in: query
          name: account_id
          schema:
            type: string
          example: an_account_id
          description: Identifier of the accounts from which transactions should be returned.
        - in: query
          name: merchant
          schema:
            type: string
          description: Human readable identifier of the merchants for which associated transactions should be returned.
          example: a_merchant_slug
        - in: query
          name: category_l1
          schema:
            type: string
          example: bills
          description: Identifier of the Category Level 1 for which associated transactions should be returned.
        - in: query
          name: category_l2
          schema:
            type: string
          example: tv_and_broadband
          description: Identifier of the Category Level 2 for which associated transactions should be returned.
        - in: query
          name: include_tags
          schema:
            type: array
            items:
              type: string
          example: regular-transaction
          description: Tags for which associated transactions should be returned.
        - in: query
          name: exclude_tags
          schema:
            type: array
            items:
              type: string
          example: benefit
          description: Tags for which associated transactions should not be returned.
      responses:
        '200':
          description: The request was successfully processed.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListTransactionsResponse'
              examples:
                Multiple Transactions:
                  value:
                    operation_id: v2_transactions_get
                    data:
                      - transaction_id: '692529081002'
                        account_id: '3009327691'
                        provider: finicity
                        description: NETFLIX
                        credit_debit_indicator: credit
                        amount:
                          value: '19.99'
                          currency: USD
                        date_time: '2022-08-01T12:02:48Z'
                        status: booked
                        enrichments:
                          merchant:
                            id: 60bf3a60-c872-4f45-909d-c84b140fc6e1
                            slug: netflix
                            display_name: Netflix
                            logo: https://url/netflix.jpeg
                          categories:
                            l1:
                              slug: entertainment
                              confidence: '0.86'
                            l2:
                              slug: media_subscriptions
                              confidence: '0.86'
                          regularity:
                            frequency: monthly
                            predicted_date_times:
                              - '2022-09-01T12:02:48Z'
                              - '2022-10-01T12:02:48Z'
                              - '2022-11-01T12:02:48Z'
                            group_label: 13ed070478ef62c3a7baa36c8d042a9d1cdc0fcbb2af93a795f2ad20ad6e9cb5-0
                        tags:
                          - regular-transaction
                      - transaction_id: '692529081000'
                        account_id: '3009327691'
                        provider: finicity
                        description: John Doe
                        credit_debit_indicator: debit
                        amount:
                          value: '12.77'
                          currency: USD
                        date_time: '2022-07-05T12:02:48Z'
                        status: booked
                        enrichments:
                          categories:
                            l1:
                              slug: general
                              confidence: '0.20'
                            l2:
                              slug: other_general
                              confidence: '0.14'
                          names:
                            - john doe
                    metadata:
                      results: 2
                      next_page_token: eyJvZmZzZXQiOjEwMH0
                Single Transaction Without Enrichments:
                  value:
                    operation_id: v2_transactions_get
                    data:
                      - transaction_id: a_transaction_id
                        account_id: an_account_id
                        provider: a_bank_account_provider
                        description: a_transaction_description
                        credit_debit_indicator: credit
                        status: pending
                        amount:
                          value: '10.99'
                          currency: USD
                        date_time: '2022-01-02T15:00:00Z'
                    metadata:
                      results: 1
                      next_page_token: eyJvZmZzZXQiOjEwMH0
                No Transactions:
                  value:
                    operation_id: v2_transactions_get
                    data: []
                    metadata:
                      results: 0
        '401':
          description: An unauthenticated request was received.
        '405':
          description: The request uses an unexpected HTTP method.
        5XX:
          description: An unexpected error occurred on the server side.
  /v1/categories/totals:
    get:
      tags:
        - Enrichment Totals
      summary: Retrieve Category Totals
      deprecated: true
      description: |
        Provides a customer’s total income and expenditure for each category and subcategory, over a given time period.

        Each income and expenditure total is separated by currency, as we cannot sum totals in different currencies.
      operationId: v1_categories_totals_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/CustomerSecret'
        - in: header
          name: X-From
          required: false
          schema:
            type: string
          example: '2022-02-28'
          description: |
            The date from when results are to be retrieved in the format [ISO-8601](https://www.iso.org/iso-8601-date-and-time-format.html).

            When ommited from the request, a default value of 30 days from before today's date will be used.

            Example: `2022-02-28`
        - in: header
          name: X-To
          required: false
          schema:
            type: string
          example: '2022-01-28'
          description: |
            The date up to when results are to be retrieved in the format [ISO-8601](https://www.iso.org/iso-8601-date-and-time-format.html).

            When ommited from the request, a default value of today's date will be used.

            Example: `2022-01-28`
      responses:
        '200':
          description: The operation was successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoriesTotalResponse'
              example:
                operation_id: v1_categories_totals_get
                data:
                  categories:
                    - category:
                        id: shopping
                        label: Shopping
                      credit_amount:
                        - amount: '15.90'
                          currency: USD
                      debit_amount:
                        - amount: '397.80'
                          currency: USD
                  sub_categories:
                    - category:
                        id: online_shopping
                        label: Online Shopping
                      credit_amount:
                        - amount: '0.00'
                          currency: USD
                        - amount: '9.99'
                          currency: GBP
                      debit_amount:
                        - amount: '90.99'
                          currency: USD
                        - amount: '0.00'
                          currency: GBP
        '400':
          description: The request contains an invalid payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: v1_categories_totals_get
                code_id: failed_validation
                message: Failed validation.
                errors:
                  client_id:
                    - This value should not be blank
        '401':
          description: An unauthenticated request was received
        '405':
          description: The request uses an unexpected HTTP method
        5XX:
          description: An unexpected error occurred on the server side
  /aggregations/v2/totals/categories:
    get:
      tags:
        - Enrichment Totals
      summary: Retrieve Category Totals V2
      description: |
        Provides a customer’s total income and expenditure for each l1 and l2 category, over a given time period.
        L1 and l2 categories can be filtered using the category query parameter.
        Example:
          - 'shopping'
          - 'shopping.groceries'

        Each income and expenditure total is separated by currency, as we cannot sum totals in different currencies.
      operationId: v2_category_totals_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/CustomerSecret'
        - $ref: '#/components/parameters/CategoryTotalsQueryFromTimestamp'
        - $ref: '#/components/parameters/CategoryTotalsQueryToTimestamp'
        - $ref: '#/components/parameters/QueryBudCategory'
        - $ref: '#/components/parameters/QueryCurrency'
        - in: query
          name: include_l2
          schema:
            type: boolean
          example: true
          description: Whether to include the L2 categories in result. Defaults to false.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoriesTotalV2Response'
              example:
                operation_id: v2_category_totals_get
                data:
                  - name: shopping
                    credit_amount:
                      - amount:
                          value: '357.90'
                          currency: GBP
                        transaction_count: 1
                    debit_amount:
                      - amount:
                          value: '397.80'
                          currency: GBP
                        transaction_count: 2
                    l2_totals:
                      - name: clothing
                        credit_amount:
                          - amount:
                              value: '357.90'
                              currency: GBP
                            transaction_count: 1
                        debit_amount:
                          - amount:
                              value: '397.80'
                              currency: GBP
                            transaction_count: 2
        '400':
          description: The request contains an invalid payload
        '401':
          description: An unauthenticated request was received
        5XX:
          description: An unexpected error occurred on the server side
  /aggregations/v2/totals/categories/trends:
    get:
      tags:
        - Enrichment Totals
      summary: Retrieve Category Totals Trends
      description: |
        Provides category totals for desired categories over a given time period of time with a given granularity.

        L1 and l2 categories can be filtered using the category query parameter.
        Example:
          - 'shopping'
          - 'shopping.groceries'
        Each income and expenditure total is separated by currency, as we cannot sum totals in different currencies.

        Can be used for producing graphs of category totals over time.
      operationId: v2_category_totals_trends_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/CustomerSecret'
        - $ref: '#/components/parameters/CategoryTotalsQueryFromTimestamp'
        - $ref: '#/components/parameters/CategoryTotalsQueryToTimestamp'
        - $ref: '#/components/parameters/QueryCurrency'
        - $ref: '#/components/parameters/QueryBudCategory'
        - in: query
          name: include_l2
          schema:
            type: boolean
          example: true
          description: Whether to include the L2 categories in result. Defaults to false.
        - in: query
          name: granularity
          schema:
            type: string
          example: monthly
          description: |
            Specifies in what interval the balance over time should be retrieved.

            Currently supported values include (but are not necessarily limited to):
              - `daily`
              - `weekly`
              - `biweekly`
              - `monthly`
              - `quarterly`
              - `six_monthly`
              - `annually`

              Defaults to `monthly`.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoriesTotalTrendsV2Response'
              example:
                operation_id: v2_category_totals_get
                data:
                  - from: '2023-05-21T07:20:50.52Z'
                    to: '2023-05-21T07:20:50.52Z'
                    data:
                      - name: shopping
                        credit_amount:
                          - amount:
                              value: '357.90'
                              currency: GBP
                            transaction_count: 1
                        debit_amount:
                          - amount:
                              value: '397.80'
                              currency: GBP
                            transaction_count: 2
                        l2_totals:
                          - name: clothing
                            credit_amount:
                              - amount:
                                  value: '357.90'
                                  currency: GBP
                                transaction_count: 1
                            debit_amount:
                              - amount:
                                  value: '397.80'
                                  currency: GBP
                                transaction_count: 2
        '400':
          description: The request contains an invalid payload
        '401':
          description: An unauthenticated request was received
        5XX:
          description: An unexpected error occurred on the server side
  /v2/merchants/totals:
    get:
      tags:
        - Enrichment Totals
      summary: Retrieve Merchant Totals V2
      description: |
        Provides a customer’s total debit and credit amounts for each merchant.
      operationId: v2_merchants_totals_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/CustomerSecret'
        - in: header
          name: X-From
          required: false
          schema:
            type: string
          example: '2022-02-28'
          description: |
            The date from when results are to be retrieved in the format [ISO-8601](https://www.iso.org/iso-8601-date-and-time-format.html).

            When ommited from the request, a default value of 30 days from before today's date will be used.

            Example: `2022-02-28`
        - in: header
          name: X-To
          required: false
          schema:
            type: string
          example: '2022-01-28'
          description: |
            The date up to when results are to be retrieved in the format [ISO-8601](https://www.iso.org/iso-8601-date-and-time-format.html).

            When ommited from the request, a default value of today's date will be used.

            Example: `2022-01-28`
        - $ref: '#/components/parameters/MerchantsTotalsIncludeCategories'
        - $ref: '#/components/parameters/MerchantsTotalsExcludeCategories'
      responses:
        '200':
          description: The request was successfully processed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantTotalsResponseV2'
              example:
                operation_id: v2_merchants_totals_get
                data:
                  - merchant:
                      id: walmart
                      logo: https://thisisbud.com/merchants/walmart.png
                      name: Walmart
                    total_debit:
                      value: '130.23'
                      currency: USD
                    total_credit:
                      value: '12.21'
                      currency: USD
                    transaction_count: 8
                  - merchant:
                      id: target
                      logo: https://thisisbud.com/merchants/target.png
                      name: Target
                    total_debit:
                      value: '240.23'
                      currency: USD
                    total_credit:
                      value: '6.56'
                      currency: USD
                    transaction_count: 10
                metadata:
                  from: '2018-01-01'
                  to: '2018-01-17'
                  results: 2
        '204':
          description: No transactions found
        '400':
          description: The request contains an invalid payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: v2_merchants_totals_get
                code_id: failed_validation
                message: Failed validation
                errors:
                  client_id:
                    - This value should not be blank
        '401':
          description: Unauthorised request
        '405':
          description: An unexpected HTTP method was used
        5XX:
          description: An unexpected error occurred on the server side
  /resources/v2/categories/models:
    get:
      tags:
        - Enrichment Resources
      summary: Retrieve Available Categorisation Models V2
      description: Retrieve the available Bud categorisation models.
      operationId: resources_v2_models_get
      parameters:
        - $ref: '#/components/parameters/ClientId'
      security:
        - OAuth2: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetModelsResponse'
              example:
                operation_id: resources_v2_models_get
                data:
                  - name: us-v1
                    description: 'A US categorisation model. This model can be used for the following use cases: affordability assessments, collections assessments, affordability monitoring, customer engagement and product recommendations.'
        '400':
          description: The request contains an invalid payload
        '401':
          description: Unauthorised request
        '405':
          description: An unexpected HTTP method was used
        5XX:
          description: An unexpected error occurred on the server side
  /resources/v2/categories:
    get:
      tags:
        - Enrichment Resources
      summary: Retrieve Categories V2
      description: Retrieve a list of primary and secondary categories supported by Bud's categorisation model.
      operationId: resources_v2_categories_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - in: query
          name: format
          schema:
            type: string
            enum:
              - map
              - flat
            default: flat
          description: |
            Determines if the response will be structured:
              - As a flat object where all categories and subcategories are listed separately under different fields. See the example response `Flat Response`.
              - As a map where all categories are listed as objects themselves with their respective subcategories listed in fields within the category objects. See the example response `Map Response`.
        - in: query
          name: model
          schema:
            type: string
          description: |
            The name of the model for which categories should be returned. See the *List Categorisation Models V2* endpoint for available model names.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetCategoriesV2Response'
              examples:
                flat:
                  value:
                    operation_id: resources_v2_categories_get
                    data:
                      categories:
                        - travel
                      subcategories:
                        - flights
                        - insurance
                        - other_travel
                    metadata:
                      model:
                        name: us-v1
                        description: 'A US categorisation model. This model can be used for the following use cases: affordability assessments, collections assessments, affordability monitoring, customer engagement and product recommendations.'
                map:
                  value:
                    operation_id: resources_v2_categories_get
                    data:
                      - name: travel
                        subcategories:
                          - name: flights
                          - name: insurance
                          - name: other_travel
                    metadata:
                      model:
                        name: uk-v2
                        description: 'A US categorisation model. This model can be used for the following use cases: affordability assessments, collections assessments, affordability monitoring, customer engagement and product recommendations.'
        '400':
          description: The request contains an invalid payload
        '401':
          description: Unauthorised request
        '405':
          description: An unexpected HTTP method was used
        5XX:
          description: An unexpected error occurred on the server side
  /v1/categories:
    get:
      tags:
        - Enrichment Resources
      summary: Retrieve Categories
      deprecated: true
      description: |
        Retrieve the category taxonomies related to Bud's categorisation service
      operationId: categories_get
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - in: query
          name: format
          schema:
            type: string
            enum:
              - map
              - flat
          description: |
            Determines if the response will be structured:
              - As a flat object where all categories and subcategories are listed separately under different fields. See the example response `Flat Response`.
              - As a map where all categories are listed as objects themselves with their respective subcategories listed in fields within the category objects. See the example response `Map Response`.
      security:
        - OAuth2: []
      responses:
        '200':
          description: The operation was successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoriesResponse'
              examples:
                Flat Response:
                  value:
                    operation_id: categories_double_cat_get
                    data:
                      categories:
                        - dependent_costs
                        - other_expenses
                        - entertainment
                        - transport
                        - banking
                        - eating_out
                        - insurance
                        - borrowing_and_loans
                        - shopping
                        - income
                        - charity
                        - health_and_personal_care
                        - home
                        - groceries
                        - holidays_and_travel
                        - pensions_savings_and_investments
                        - education
                        - transfers
                        - bills
                        - general
                      subcategories:
                        - other_dependent_costs
                        - children_and_babies
                        - childcare
                        - business_expenses
                        - financial_and_legal_expenses
                        - postage_and_office_supplies
                        - other_expenses
                        - amusement
                        - hobbies
                        - books_and_reading
                        - events
                        - gambling
                        - media_subscriptions
                        - cinema
                        - arts_and_culture
                        - nightclubs
                        - other_entertainment
                        - vehicle
                        - transport
                        - petrol
                        - parking_and_tolls
                        - service_stations
                        - vehicle_hire
                        - other_transport
                        - general_banking
                        - deposits_and_withdrawals
                        - interest
                        - refunds
                        - other_banking
                        - bars_and_pubs
                        - coffee
                        - restaurants
                        - other_eating_out
                        - business_insurance
                        - health_and_life_insurance
                        - house_or_home_insurance
                        - pet_insurance
                        - travel_insurance
                        - other_insurance
                        - vehicle_insurance
                        - loans
                        - car_loan
                        - credit_cards
                        - debt_management
                        - other_credit
                        - student_loan
                        - other_borrowing_and_loans
                        - flowers_and_gifts
                        - clothing_and_accessories
                        - technology
                        - general_stores
                        - online_shopping
                        - other_shopping
                        - other_income
                        - benefits_and_social_security
                        - child_support_income
                        - investment_income
                        - employment_income
                        - pension_income
                        - rental_income
                        - charity
                        - other_charity
                        - healthcare
                        - beauty
                        - sports_and_fitness
                        - pharmacies_and_health_products
                        - other_health_and_personal_care
                        - home_maintenance
                        - furniture_and_appliances
                        - gardening
                        - laundry
                        - other_home
                        - pets
                        - supermarkets_and_convenience
                        - speciality_groceries
                        - other_groceries
                        - accommodation_and_travel_agencies
                        - flights_and_air_travel_purchases
                        - other_travel
                        - other_holidays_and_travel
                        - investments
                        - pension_contribution
                        - savings
                        - other_pensions_savings_and_investments
                        - other_education
                        - education_and_school_fees
                        - transfers_in
                        - internal_transfers
                        - transfers_out
                        - other_transfers
                        - taxes
                        - mortgage_and_rent
                        - utilities
                        - telecom
                        - other_bills
                        - other_general
                Map Response:
                  value:
                    operation_id: categories_double_cat_get
                    data:
                      - name: dependent_costs
                        subcategories:
                          - name: other_dependent_costs
                          - name: children_and_babies
                          - name: childcare
                      - name: other_expenses
                        subcategories:
                          - name: business_expenses
                          - name: financial_and_legal_expenses
                          - name: postage_and_office_supplies
                          - name: other_expenses
                      - name: entertainment
                        subcategories:
                          - name: amusement
                          - name: hobbies
                          - name: books_and_reading
                          - name: events
                          - name: gambling
                          - name: media_subscriptions
                          - name: cinema
                          - name: arts_and_culture
                          - name: nightclubs
                          - name: other_entertainment
                      - name: transport
                        subcategories:
                          - name: vehicle
                          - name: transport
                          - name: petrol
                          - name: parking_and_tolls
                          - name: service_stations
                          - name: vehicle_hire
                          - name: other_transport
                      - name: banking
                        subcategories:
                          - name: general_banking
                          - name: deposits_and_withdrawals
                          - name: interest
                          - name: refunds
                          - name: other_banking
                      - name: eating_out
                        subcategories:
                          - name: bars_and_pubs
                          - name: coffee
                          - name: restaurants
                          - name: other_eating_out
                      - name: insurance
                        subcategories:
                          - name: business_insurance
                          - name: health_and_life_insurance
                          - name: house_or_home_insurance
                          - name: pet_insurance
                          - name: travel_insurance
                          - name: other_insurance
                          - name: vehicle_insurance
                      - name: borrowing_and_loans
                        subcategories:
                          - name: loans
                          - name: car_loan
                          - name: credit_cards
                          - name: debt_management
                          - name: other_credit
                          - name: student_loan
                          - name: other_borrowing_and_loans
                      - name: shopping
                        subcategories:
                          - name: flowers_and_gifts
                          - name: clothing_and_accessories
                          - name: technology
                          - name: general_stores
                          - name: online_shopping
                          - name: other_shopping
                      - name: income
                        subcategories:
                          - name: other_income
                          - name: benefits_and_social_security
                          - name: child_support_income
                          - name: investment_income
                          - name: employment_income
                          - name: pension_income
                          - name: rental_income
                      - name: charity
                        subcategories:
                          - name: charity
                          - name: other_charity
                      - name: health_and_personal_care
                        subcategories:
                          - name: healthcare
                          - name: beauty
                          - name: sports_and_fitness
                          - name: pharmacies_and_health_products
                          - name: other_health_and_personal_care
                      - name: home
                        subcategories:
                          - name: home_maintenance
                          - name: furniture_and_appliances
                          - name: gardening
                          - name: laundry
                          - name: other_home
                          - name: pets
                      - name: groceries
                        subcategories:
                          - name: supermarkets_and_convenience
                          - name: speciality_groceries
                          - name: other_groceries
                      - name: holidays_and_travel
                        subcategories:
                          - name: accommodation_and_travel_agencies
                          - name: flights_and_air_travel_purchases
                          - name: other_travel
                          - name: other_holidays_and_travel
                      - name: pensions_savings_and_investments
                        subcategories:
                          - name: investments
                          - name: pension_contribution
                          - name: savings
                          - name: other_pensions_savings_and_investments
                      - name: education
                        subcategories:
                          - name: other_education
                          - name: education_and_school_fees
                      - name: transfers
                        subcategories:
                          - name: transfers_in
                          - name: internal_transfers
                          - name: transfers_out
                          - name: other_transfers
                      - name: bills
                        subcategories:
                          - name: taxes
                          - name: mortgage_and_rent
                          - name: utilities
                          - name: telecom
                          - name: other_bills
                      - name: general
                        subcategories:
                          - name: other_general
        '400':
          description: The request contains an invalid payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: categories_double_cat_get
                code_id: failed_validation
                message: Failed validation
                errors:
                  client_id:
                    - This value should not be blank
        '401':
          description: Unauthorised request
        '405':
          description: An unexpected HTTP method was used
        5XX:
          description: An unexpected error occurred on the server side
  /v1/regular-transactions:
    get:
      tags:
        - Regular Insights
      summary: Retrieve Regular Transactions
      description: |
        Provides a list of customer transactions that occur regularly over various different periodicities.
      operationId: regular_transactions_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/CustomerSecret'
      responses:
        '200':
          description: The request was successfully processed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RegularTransactionsResponse'
              example:
                operation_id: regular_transactions_get
                data:
                  - label: 7fa6c13ac15468dd61cc7680f005b1dcdd9504d7-0
                    period: monthly
                    score: '0.9892'
                    transactions:
                      - provider: Amex
                        account_id: 688cb2e1-fca9-4d77-bbd3-604abb3c9d46
                        transaction_id: 3c6f2abd-87ff-4b57-b7c7-c500926571e7
                        transaction_description: Bank credit paypal
                        date: 2019-07-04T00:00:00+0000
                        amount:
                          amount: '49.99'
                          currency: USD
                        credit_debit_indicator: Debit
                      - provider: Amex
                        account_id: 688cb2e1-fca9-4d77-bbd3-604abb3c9d46
                        transaction_id: d06bef46-7500-4d34-a419-bb2c5e4ee9fa
                        transaction_description: Bank credit paypal
                        date: 2019-08-04T00:00:00+0000
                        amount:
                          amount: '52.3'
                          currency: USD
                        credit_debit_indicator: Debit
                  - label: 8a29913437a6d2e72a9576a15593f43d92cfc2eb-0
                    period: monthly
                    score: '0.9892'
                    transactions:
                      - provider: Chase
                        account_id: 688cb2e1-fca9-4d77-bbd3-604abb3c9d46
                        transaction_id: c5a50ce9-5523-47b4-8c08-3cd8e30e34a6
                        transaction_description: Rent
                        date: 2019-06-02T00:00:00+0000
                        amount:
                          amount: '1325'
                          currency: USD
                        credit_debit_indicator: Debit
                      - provider: Chase
                        account_id: 688cb2e1-fca9-4d77-bbd3-604abb3c9d46
                        transaction_id: 70778a02-ea30-4465-b651-65189fd3c51d
                        transaction_description: Rent
                        date: 2019-07-02T00:00:00+0000
                        amount:
                          amount: '1325'
                          currency: USD
                        credit_debit_indicator: Debit
        '204':
          description: No transactions found
        '400':
          description: The request contains an invalid payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: regular_transactions_get
                code_id: failed_validation
                message: Failed validation
                errors:
                  client_id:
                    - This value should not be blank
        '401':
          description: Unauthorised request
        '405':
          description: An unexpected HTTP method was used
        5XX:
          description: An unexpected error occurred on the server side
  /v2/future-transactions:
    get:
      tags:
        - Regular Insights
      summary: Retrieve Future Forecasted Transactions V2
      description: |
        Provides a list of transactions predicted to occur in the next specified number of months. Currently the following periods are supported:
        - `daily`
        - `weekly`
        - `biweekly`
        - `monthly`
        - `quarterly`
        - `unknown`
      operationId: v2_future_transactions_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/CustomerSecret'
        - $ref: '#/components/parameters/FutureTransactionsMonthsProjection'
        - $ref: '#/components/parameters/FutureTransactionsChangePercentage'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FutureTransactionV2Response'
              example:
                operation_id: v2_future_transactions_get
                data:
                  - transaction_id: fdcc55c6-f347-4abc-8c66-61ff290d8bd4
                    account_id: fdcc55c6-f347-4abc-8c66-61ff290d8bd4
                    transaction_description: Bud
                    label: 8a29913437a6d2e72a9576a15593f43d92cfc2eb-0
                    period: monthly
                    date_time: '2019-07-01T01:00:00Z'
                    amount:
                      value: '100.00'
                      currency: USD
                    credit_debit_indicator: credit
                    confidence: '0.9892'
                    future_transactions:
                      - date: '2022-08-01'
                        amount:
                          value: '102.00'
                          currency: USD
                      - date: '2022-09-01'
                        amount:
                          value: '104.04'
                          currency: USD
                      - date: '2022-10-01'
                        amount:
                          value: '106.12'
                          currency: USD
                      - date: '2022-11-01'
                        amount:
                          value: '108.24'
                          currency: USD
                metadata:
                  results: 1
                  months: 4
                  change_percentages:
                    - l2: bills
                      value: 2
        '204':
          description: No transactions
        '400':
          description: Bad request
        '401':
          description: Unauthorized request
  /v1/subscriptions:
    get:
      tags:
        - Expenditure Insights
      summary: Retrieve Subscriptions
      description: This endpoint is used to retrieve information about a user's subscriptions
      operationId: v1_subscriptions_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/CustomerSecret'
        - $ref: '#/components/parameters/From'
        - $ref: '#/components/parameters/To'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetSubscriptionsResponseV1'
              example:
                operation_id: v1_subscriptions_get
                data:
                  - subscription_type: tv_and_film
                    period: monthly
                    categories:
                      l1: bills
                      l2: tv_and_film
                    merchant:
                      id: netflix
                      name: Netflix
                      logo: https://assets.thisisbud.com/netflix_logo_placeholder.jpeg
                    transactions:
                      - transaction_id: fdcc55c6-f347-4abc-8c66-61ff290d8bd4
                        account_id: an_account_id
                        transaction_description: Netflix
                        provider: Amex
                        date: 2022-03-21T01:00:00+0100
                        amount:
                          value: '9.99'
                          currency: USD
                        credit_debit_indicator: Debit
                      - transaction_id: hdcc55c6-f347-4abc-8c66-61ff290d8bd4
                        account_id: an_account_id
                        transaction_description: Netflix
                        provider: Amex
                        date: 2022-04-21T01:00:00+0100
                        amount:
                          value: '9.99'
                          currency: USD
                        credit_debit_indicator: Debit
                  - subscription_type: unknown
                    period: unknown
                    categories:
                      l1: general
                      l2: other_general
                    transactions:
                      - transaction_id: idcc55c6-f347-4abc-8c66-61ff290d8bd4
                        account_id: an_account_id
                        transaction_description: A Random Subscription Payment
                        provider: Amex
                        date: 2022-05-11T01:00:00+0100
                        amount:
                          value: '59.99'
                          currency: USD
                        credit_debit_indicator: Debit
                metadata:
                  results: 2
                  from: '2022-03-19'
                  to: '2022-05-19'
        '204':
          description: No subscriptions found
        '400':
          description: The request contains an invalid payload
        '401':
          description: Unauthorised request
        '405':
          description: An unexpected HTTP method was used
        5XX:
          description: An unexpected error occurred on the server side
  /insights/v2/products:
    get:
      tags:
        - Expenditure Insights
      summary: Retrieve Financial Products V2
      description: |
        Financial Products returns the finance oriented products and services that a customer uses. 
        This endpoint generates data using a customer's transaction history.

        Financial Products detects the following types of products and services: 
        - Loans
        - Buy Now, Pay Later (BNPL)
        - Mortgages
        - Insurance products
        - Credit Cards
        - Private Pensions
        - Savings and Investments

        > 🚧 Limitations
        > 
        > Financial Products are only identified from debit transactions.
      operationId: insights_v2_products
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/CustomerSecret'
        - $ref: '#/components/parameters/QueryFromDate'
        - $ref: '#/components/parameters/QueryToDate'
      responses:
        '200':
          description: OK - everything worked as expected
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetProductsResponseV2'
              example:
                operation_id: insights_v2_products
                data:
                  - type:
                      - credit_card
                    merchant:
                      id: americanexpress
                      logo: https://assets.thisisbud.com/bud-datasci-images/merchant_logos/5e190e47-3ed5-4549-a29a-7f832862fd3a/v1/americanexpress.jpeg
                      name: American Express
                    amount:
                      value: '300.00'
                      currency: USD
                    period: unknown
                  - type:
                      - insurance
                    merchant:
                      id: unitedhealthgroup
                      logo: https://assets.thisisbud.com/bud-datasci-images/merchant_logos/3d46d358-6600-4eb8-a23e-2c548ffa2de0/v1/unitedhealthgroup.jpeg
                      name: UnitedHealth Group
                    amount:
                      value: '59.99'
                      currency: USD
                    period: monthly
                metadata:
                  from: '2022-09-03T11:28:22.00Z'
                  to: '2023-03-03T11:28:22.00Z'
                  results: 2
        '400':
          description: Bad Request - the request was unacceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: insights_v2_products
                code_id: failed_validation
                message: Invalid request payload.
                errors:
                  from:
                    - 'invalid ''from'' date: ''7th March 2023'''
        '401':
          description: Unauthorised Request - the request was not authenticated or authorised
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Unauthorised request
                errors: {}
        '500':
          description: Server Error - an unexpected error occurred on the server side
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: 'An error occurred while processing your request. Get in touch with us and provide us your request id: 7ef63242-ba6d-4661-8014-f9eaa9cb2ad8'
components:
  securitySchemes:
    Basic:
      type: http
      scheme: basic
    OAuth2:
      type: oauth2
      flows:
        clientCredentials:
          tokenUrl: /v1/oauth/token
          scopes: {}
      description: |

        Authentication flow:

        1. Perform OAuth2 Client Credentials authentication using API Credentials (`client_id`,`client_secret`) to obtain an `access_token` against `/v1/oauth/token` endpoint,
        2. Use `access_token` as Bearer Authorisation for every other API request,
        3. Include `X-Client-Id` (=client_id) within the header of every API request
        4. Note that some of the requests may also require `X-Customer-Id` to be provided within the request header.

        ### Examples
        Obtain OAuth2 `access_token` and `refresh_token` using `grant_type=client_credentials` and HTTP Basic auth header

        ```
        curl --basic --user {{client_id}}:{{client_secret}} \
          -X POST https://api-sandbox.thisisbud.com/v1/oauth/token \
          -H 'Content-Type: application/x-www-form-urlencoded' \
          -d grant_type=client_credentials
        ```

        Successful response:
        ```
        {
          "operation_id": "oauth_token_post",
          "data": {
            "access_token": "dd0c17e3fd6d2ce94aa091257a3ea393b4f9b5cf3d3e998f07dc9826da86ff15",
            "token_type": "bearer",
            "expires_in": 3600,
            "refresh_token": "fac32cca7559d9f6e8f1dfe9a99c71fa1dcfeb482bedf287d7934d2667ae54b3"
          }
        }
        ```

        Refresh `access_token` token using `refresh_token` against `/v1/oauth/token` endpoint with `grant_type=refresh_token`

        ```
        curl -X POST \
          https://api-sandbox.thisisbud.com/v1/oauth/token \
          -H 'Content-Type: application/x-www-form-urlencoded' \
          -H 'X-Client-Id: {{client_id}}' \
          -d 'grant_type=refresh_token&refresh_token={{refresh_token}}'
        ```

        Successful response:
        ```
        {
            "operation_id": "oauth_token_post",
            "data": {
                "access_token": "cc0c17e3fd6d2ce94aa091257a3ea393b4f9b5cf3d3e998f07dc9826da86ff94",
                "token_type": "bearer",
                "expires_in": 3600,
                "refresh_token": "ffc30cca7559d9f6e8f1dfe9a99c71fa1dcfeb482bedf287d7934d2667ae54b3"
            }
        }
        ```
  schemas:
    RetrieveAuthTokenResponse:
      title: Retrieve Auth Token Response
      required:
        - operation_id
        - data
      properties:
        operation_id:
          type: string
          enum:
            - oauth_token_create
        data:
          type: object
          required:
            - access_token
            - token_type
            - expires_in
            - refresh_token
          properties:
            access_token:
              type: string
              description: A short-lived token that is used to authenticate requests to Bud endpoints.
            token_type:
              type: string
              description: The type of token provided in the `access_token` field (typically `Bearer`).
            expires_in:
              type: integer
              description: The amount of time (in seconds) in which the `access_token` will expire.
            refresh_token:
              type: string
              description: A long-lived token that can be used to obtain a new `access_token` when the current `access_token` expires.
    USIngestStatusV2Response:
      title: Ingest Response
      type: object
      description: Expected response structure.
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          anyOf:
            - $ref: '#/components/schemas/IngestStatusCompletedData'
            - title: Pending Task Data
              required:
                - status
              properties:
                status:
                  type: string
                  enum:
                    - Pending
        metadata:
          $ref: '#/components/schemas/IngestStatusTaskMetadata'
    IngestStatusCompletedData:
      title: Completed Task Data
      type: array
      items:
        $ref: '#/components/schemas/IngestResponseV2SubTask'
    IngestStatusTaskMetadata:
      title: Ingest Task Metadata
      description: Expected response structure.
      type: object
      required:
        - task_id
        - status
      properties:
        task_id:
          type: string
          format: uuid
          description: Unique task identifier.
        status:
          $ref: '#/components/schemas/OverallIngestResponseStatus'
        ingest_request_id:
          type: string
          format: uuid
          description: Unique identifier of the initial ingest request
        ingest_route:
          type: string
          description: The endpoint used for this ingest task
          enum:
            - ingest_accounts_post
            - v2_ingest_transactions_post
        ingest_schema:
          type: string
          description: The account/transaction schema used for the ingest
          enum:
            - application/bud-accounts+json
            - application/plaid-accounts-v1+json
            - application/finicity-accounts-v1+json
            - application/bud-transaction-v3+json
            - application/plaid-transactions-v1+json
            - application/finicity-transactions-v1+json
    IngestPlaidAccountsRequest:
      title: Plaid V1 Accounts Request
      type: array
      items:
        $ref: '#/components/schemas/PlaidCustomerWithAccounts'
    PlaidCustomerWithAccounts:
      title: Customer With Accounts
      type: object
      required:
        - customer_id
        - accounts
      properties:
        customer_id:
          type: string
          format: uuid
          description: Unique identifier for the Customer.
          example: c3829683-b6b2-4988-a7f7-697a9fa201bc
        customer_secret:
          $ref: '#/components/schemas/CustomerSecret'
        accounts:
          type: array
          description: List of accounts that belongs to the customer.
          minLength: 1
          items:
            $ref: '#/components/schemas/PlaidCustomerAccount'
    PlaidCustomerAccount:
      title: Customer Account
      type: object
      required:
        - account_id
        - name
        - subtype
      properties:
        account_id:
          type: string
          description: Unique identifier for the account.
        balances:
          $ref: '#/components/schemas/PlaidAccountBalance'
        name:
          type: string
          description: The name of the account, either assigned by the user or by the financial institution itself
        official_name:
          type: string
          description: The official name of the account as given by the financial institution
        type:
          type: string
          enum:
            - investment
            - credit
            - depository
            - loan
            - brokerage
            - other
        subtype:
          type: string
          enum:
            - checking
            - savings
            - hsa
            - cd
            - money market
            - paypal
            - prepaid
            - cash management
            - ebt
            - credit card
            - auto
            - business
            - commercial
            - construction
            - consumer
            - home equity
            - loan
            - mortgage
            - overdraft
            - line of credit
            - student
            - other
            - '529'
            - 401a
            - 401k
            - 403b
            - 457b
            - brokerage
            - cash isa
            - crypto exchange
            - education savings account
            - fixed annuity
            - gic
            - health reimbursement arrangement
            - ira
            - isa
            - keogh
            - lif
            - life insurance
            - lira
            - lrif
            - lrsp
            - mutual fund
            - non-taxable brokerage account
            - other annuity
            - pension
            - prif
            - profit sharing plan
            - qshr
            - rdsp
            - resp
            - retirement
            - rlif
            - roth
            - roth 401k
            - rrif
            - rrsp
            - sarsep
            - sep ira
            - simple ira
            - sipp
            - stock plan
            - tfsa
            - trust
            - ugma
            - utma
            - variable annuity
    PlaidAccountBalance:
      title: Customer Account Balance
      type: object
      required:
        - current
        - iso_currency_code
        - last_updated_datetime
      properties:
        available:
          type: number
          format: double
          description: The amount of funds available to be withdrawn from the account, as determined by the financial institution.
        current:
          type: number
          format: double
          description: The amount of funds available to be withdrawn from the account, as determined by the financial institution.
        limit:
          type: number
          format: double
          description: The amount of funds available to be withdrawn from the account, as determined by the financial institution.
        iso_currency_code:
          type: string
          format: currency
          description: The ISO-4217 currency code of the balance
        last_updated_datetime:
          type: string
          format: date
          description: Timestamp in ISO 8601 format (YYYY-MM-DDTHH:mm:ssZ) indicating the last time that the balance for the given account has been updated
    IngestPlaidTransactionsRequest:
      title: Plaid V1 Transactions Request
      type: array
      items:
        $ref: '#/components/schemas/PlaidTransactions'
    PlaidTransactions:
      title: Customer With Transactions
      type: object
      required:
        - customer_id
        - transactions
      properties:
        customer_id:
          $ref: '#/components/schemas/CustomerID'
        customer_secret:
          $ref: '#/components/schemas/CustomerSecret'
        sync_enrichments:
          $ref: '#/components/schemas/SynchronousEnrichmentsList'
        transactions:
          type: array
          description: List of transactions that belongs to the customer.
          minLength: 1
          items:
            $ref: '#/components/schemas/PlaidTransaction'
        transaction_windows:
          $ref: '#/components/schemas/TransactionWindowArray'
    PlaidTransaction:
      title: Plaid Customer Transaction
      type: object
      description: A plaid formatted transaction for ingestion.
      required:
        - account_id
        - transaction_id
        - amount
        - date
        - name
        - iso_currency_code
        - pending
      properties:
        account_id:
          type: string
          description: Unique identifier for the Customer bank account.
          example: 6PdjjRP6LmugpBy5NgQvUqpRXMWxzktg3rwrk
        transaction_id:
          type: string
          description: Unique identifier for the transaction.
          example: lPNjeW1nR6CDn5okmGQ6hEpMo4lLNoSrzqDje
        amount:
          type: number
          format: double
          description: The settled value of the transaction
          example: 99.99
        date:
          type: string
          format: date
          description: For pending transactions, the date that the transaction occurred; for posted transactions, the date that the transaction posted. Both dates are returned in an ISO 8601 format ( YYYY-MM-DD ).
          example: '2020-01-31'
        datetime:
          type: string
          format: date-time
          description: Date and time when a transaction was posted in ISO 8601 format ( YYYY-MM-DDTHH:mm:ssZ ).
          example: '2020-06-17T11:00:00Z'
        name:
          type: string
          description: The merchant name or transaction description.
          example: The RSPCA, Southwater
        original_description:
          type: string
          description: TThe string returned by the financial institution to describe the transaction.
        iso_currency_code:
          type: string
          format: ISO-4217
          description: The ISO-4217 currency code of the transaction
          example: USD
        pending:
          type: boolean
          description: The status of the transaction.
        payment_channel:
          type: string
          description: The channel used to make a payment.
          example: online or in store
        merchant_name:
          type: string
          description: The merchant name
          example: Apple
        location:
          $ref: '#/components/schemas/PlaidLocation'
    PlaidLocation:
      title: Customer Transaction Location
      type: object
      description: A representation of where a transaction took place
      properties:
        address:
          type: string
          description: The street address where the transaction occurred.
          example: 900 fancy street
        city:
          type: string
          description: The city where the transaction occurred.
          example: New York
        region:
          type: string
          description: The region or state where the transaction occurred
          example: NY
        postal_code:
          type: string
          description: The postal code where the transaction occurred
          example: 96858
        country:
          type: string
          format: ISO 3166-1 alpha-2
          description: The ISO 3166-1 alpha-2 country code where the transaction occurred.
          example: US
    IngestFinicityAccountsRequest:
      title: Finicity V1 Accounts Request
      type: array
      items:
        $ref: '#/components/schemas/FinicityCustomerWithAccounts'
    FinicityCustomerWithAccounts:
      title: Customer With Accounts
      type: object
      required:
        - customer_id
        - accounts
      properties:
        customer_id:
          type: string
          format: uuid
          description: Unique identifier for the Customer.
          example: c3829683-b6b2-4988-a7f7-697a9fa201bc
        customer_secret:
          $ref: '#/components/schemas/CustomerSecret'
        accounts:
          type: array
          description: List of accounts that belongs to the customer.
          minLength: 1
          items:
            $ref: '#/components/schemas/FinicityCustomerAccount'
    FinicityCustomerAccount:
      title: Customer Account
      type: object
      required:
        - id
        - name
        - type
        - status
        - institutionId
        - currency
        - balance
        - balanceDate
      properties:
        id:
          type: string
          description: The ID of the account.
        name:
          type: string
          description: The account name from the institution.
        type:
          type: string
          description: Finicity Account Types
          enum:
            - checking
            - savings
            - cd
            - moneyMarket
            - creditCard
            - lineOfCredit
            - investment
            - investmentTaxDeferred
            - employeeStockPurchasePlan
            - ira
            - 401k
            - roth
            - 403b
            - 529plan
            - rollover
            - ugma
            - utma
            - keogh
            - 457plan
        status:
          type: string
          description: The type of the account
          enum:
            - active
            - pending
        institutionId:
          type: string
          description: The ID of the institution for this account.
        currency:
          type: string
          format: currency
          description: ISO 4217 currency code
        balance:
          type: number
          format: double
          description: The cleared balance of the account as-of balanceDate.
        balanceDate:
          type: number
          description: A Unix Time timestamp showing when the balance was captured.
        detail:
          $ref: '#/components/schemas/FinicityCustomerAccountDetail'
    FinicityCustomerAccountDetail:
      title: Customer Account Detail
      type: object
      properties:
        availableBalanceAmount:
          type: number
          format: double
          description: (Checking/Savings/CD/MoneyMarket) and (Mortgage/Loan) The available balance (typically the current balance with adjustments for any pending transactions)
        creditMaxAmount:
          type: number
          format: double
          description: The account’s credit limit
        creditAvailableAmount:
          type: number
          format: double
          description: The available credit (typically the credit limit minus the current balance)
    IngestFinicityTransactionsRequest:
      title: Finicity V1 Transactions Request
      type: array
      items:
        $ref: '#/components/schemas/FinicityTransactions'
    FinicityTransactions:
      title: Finicity Customer Transactions
      type: object
      required:
        - customer_id
        - transactions
      properties:
        customer_id:
          $ref: '#/components/schemas/CustomerID'
        customer_secret:
          $ref: '#/components/schemas/CustomerSecret'
        sync_enrichments:
          $ref: '#/components/schemas/SynchronousEnrichmentsList'
        transactions:
          type: array
          description: List of transactions that belongs to the customer.
          minLength: 1
          items:
            $ref: '#/components/schemas/FinicityTransaction'
        transaction_windows:
          $ref: '#/components/schemas/TransactionWindowArray'
    FinicityTransaction:
      title: Customer Transaction
      type: object
      description: A finicity formatted transaction for ingestion - US only
      required:
        - id
        - amount
        - accountId
        - status
        - transactionDate
        - currencySymbol
      properties:
        id:
          type: number
          description: The ID of the transaction.
          example: 100976507328
        amount:
          type: number
          format: double
          description: The total amount of the transaction.
          example: -828.9
        feeAmount:
          type: number
          format: double
          description: The portion of the overall transaction amount applied to fees.
          example: 0.03
        accountId:
          type: number
          description: The ID of the account associated with this transaction.
          example: 3009327691
        status:
          type: string
          description: The ID of the customer associated with the transaction.
          enum:
            - pending
            - active
        description:
          type: string
          description: The description value is from the financial institution (FI), often known as the payee. Required if memo is blank.
          example: Buy Stock
        memo:
          type: string
          description: Required if description is blank.
          example: GOOGLE*YOUTUBEPREMIUM GOOGLE*YOUTUBEPREM
        type:
          type: string
          description: If provided by the institution, the following values may be returned in the field of a record.
          enum:
            - atm
            - cash
            - check
            - credit
            - debit
            - deposit
            - directDebit
            - directDeposit
            - dividend
            - fee
            - interest
            - other
            - payment
            - pointOfSale
            - repeatPayment
            - serviceCharge
            - transfer
        transactionDate:
          type: string
          format: unix-time
          description: The timestamp of the transaction when it occurred. Unix timestamp
          example: 1642521600
        postedDate:
          type: string
          format: unix-time
          description: The timestamp of the transaction when it was posted or cleared by the institution. Unix timestamp
          example: 1642521600
        effectiveDate:
          type: string
          format: unix-time
          description: A timestamp of the transaction when it became effective on an account by an institution. Unix timestamp
          example: 1642521600
        currencySymbol:
          type: string
          format: ISO 4217
          description: ISO 4217 currency code
          example: USD
        categorization:
          $ref: '#/components/schemas/Categorization'
    Categorization:
      title: Transaction Categorization
      type: object
      description: categorization Record
      properties:
        normalizedPayeeName:
          type: string
          description: A normalized payee, derived from the transaction’s description and memo fields.
          example: Apple
        category:
          type: string
          description: One of the values from Categories (assigned based on the payee name)
          example: New York
        city:
          type: string
          description: City of transaction
          example: New York
        state:
          type: string
          description: State of transaction
          example: NY
        postal_code:
          type: string
          description: The postal code where the transaction occurred
          example: 96858
        country:
          type: string
          description: The ISO 3166-1 country code where the transaction occurred.
          example: USA
    IngestUSTransactionsRequest:
      title: Ingest Transactions Request
      description: Ingest transaction expected request body.
      type: array
      items:
        $ref: '#/components/schemas/CustomerWithFinicityTransactions'
    CustomerWithFinicityTransactions:
      title: Customer With Transactions
      description: A customer with a list of transactions.
      type: object
      required:
        - customer_id
        - customer_secret
        - transactions
      properties:
        customer_id:
          type: string
          format: uuid
          description: Unique identifier for a Customer, as registered on Bud's platform.
          example: c3339af9-2426-44d4-9c4d-ddb8fd281e23
        customer_secret:
          type: string
          description: Customer secret.
          example: 6075654df0e057e97535ab31b80561d7d9e8409606738c2633cdd6dab63e089a
        transactions:
          type: array
          description: List of transactions belonging to the customer.
          items:
            $ref: '#/components/schemas/MastercardTransaction'
    EnrichedTransaction:
      title: Enrich Transactions
      description: A list of enriched transactions
      type: object
      allOf:
        - $ref: '#/components/schemas/MastercardTransaction'
        - required:
            - categories
            - entities
          properties:
            categories:
              description: A list of the different category levels associated with the transaction
              title: Categories Enrichment
              type: object
              required:
                - l1
                - l2
              properties:
                l1:
                  allOf:
                    - description: Level 1 Category details
                    - $ref: '#/components/schemas/MastercardCategoryEnrichment'
                l2:
                  allOf:
                    - description: Level 2 Category details
                    - $ref: '#/components/schemas/MastercardCategoryEnrichment'
            entities:
              allOf:
                - description: Entity extraction and enrichment details
                - $ref: '#/components/schemas/EntitiesEnrichment'
    MastercardTransaction:
      title: Transaction
      type: object
      required:
        - id
        - amount
        - currency
        - description
        - memo
        - account_type
      properties:
        id:
          type: string
          description: Unique transaction identifier
        amount:
          type: string
          description: The value of the transaction in the corresponding currency including its sign (used to define Debit/Credit)
        currency:
          type: string
          description: The currency (in ISO4217 format) of the transaction amount
        description:
          type: string
          description: Free text string containing details of the transaction. This is the transaction narrative.
        memo:
          description: Further details related to the transaction.
          nullable: true
          type: string
        account_type:
          type: string
          description: To define whether the transaction belongs to a 'business' or 'consumer' account.
          enum:
            - business
            - consumer
        date:
          type: string
          description: 'The date of the transaction, required if the transactions are to be  run through Bud''s Regular Transactions service. Note, date must be in the following format:  ''Year-Month-Day Hour:Minute:Second''. E.g ''2022-02-01T11:32:00-0600''.'
    MastercardCategoryEnrichment:
      title: Category Enrichment
      type: object
      required:
        - name
        - confidence
      properties:
        name:
          type: string
          description: The name of the category
        confidence:
          type: string
          description: The confidence association with the category prediction
    EntitiesEnrichment:
      title: Entities Enrichment
      type: object
      required:
        - merchants
        - other_organisations
        - transaction_types
        - locations
        - names
        - dates
      properties:
        merchants:
          nullable: true
          type: array
          items:
            $ref: '#/components/schemas/OrganisationPrediction'
        other_organisations:
          nullable: true
          type: array
          items:
            $ref: '#/components/schemas/OrganisationPrediction'
        transaction_types:
          nullable: true
          type: array
          items:
            $ref: '#/components/schemas/TransactionTypePrediction'
        names:
          nullable: true
          type: array
          items:
            $ref: '#/components/schemas/EntityPrediction'
        dates:
          nullable: true
          type: array
          items:
            $ref: '#/components/schemas/EntityPrediction'
    OrganisationPrediction:
      title: Organisation prediction
      type: object
      required:
        - text
        - confidence
      properties:
        text:
          type: string
          description: Segment of text taken from the transaction description predicted to relevant to an organisation
        confidence:
          type: string
          description: Confidence value for the predicted text
        id:
          type: string
          description: Bud's unique organisation id -- always present if organisation is matched
        name:
          type: string
          description: Standardised Organization name -- always present if organisation is matched
        website:
          type: string
          description: Primary organisation website present where available
        logo:
          type: string
          description: Organization logo link website present where available
    TransactionTypePrediction:
      title: Transaction Type Prediction
      type: object
      allOf:
        - $ref: '#/components/schemas/EntityPrediction'
        - type: object
          properties:
            type:
              type: string
              description: Transaction Type name where available
              enum:
                - DEBIT_CARD
                - CREDIT_CARD
                - WIRE_TRANSFER
                - TRANSFER
                - ACH
                - ATM
                - POS
                - CHECK
                - PAYROLL
                - BILL_PAY
                - REFUND_AND_REVERSAL
                - MOBILE_PAYMENTS_AND_DEPOSITS
    EntityPrediction:
      title: Entity prediction
      type: object
      required:
        - text
        - confidence
      properties:
        text:
          type: string
          description: Segment of text taken from the transaction description predicted to relevant to an entity
        confidence:
          type: string
          description: Confidence value for the predicted text
    EnrichedTransactionsResponse:
      title: Transactions Response
      type: object
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: array
          description: The data associated with the response payload
          items:
            allOf:
              - $ref: '#/components/schemas/EnrichedTransaction'
              - type: object
                properties:
                  regular_payments:
                    type: object
                    description: Information detailing any regularity found to be associated with the transaction.
                    allOf:
                      - $ref: '#/components/schemas/RegularPaymentsUSJuly22'
        metadata:
          allOf:
            - $ref: '#/components/schemas/ResultsMetadata'
            - type: object
              required:
                - task_id
              properties:
                task_id:
                  description: Bud Task identifier
                  type: string
                  format: uuid
    RegularPaymentsUSJuly22:
      title: Regular Payment Object
      type: object
      description: Details surrounding the regularity of the transaction
      properties:
        label:
          type: string
          nullable: true
          description: A recurring transaction group identifier label associating regular transactions e.g. all Spotify transactions that are regular by the same monthly period will share the same label. If a transaction is irregular it will have a label of -1. All regular payments will be grouped by a label identifier. The format of the label includes a hash of the transaction description and the amount, followed by an integer corresponding to the number of regular groups found, i.e. <hash>-<i>. Null if this field is not applicable.
        score:
          nullable: true
          type: string
          description: A floating point number between 0 and 1, to define the confidence level that the transaction is regular or not. Null if this field is not applicable.
        period:
          nullable: true
          type: string
          description: 'To describe the period between each transaction in a regular group. Null if this field is not applicable. '
          enum:
            - daily
            - weekly
            - biweekly
            - monthly
            - quarterly
            - six monthly
            - annually
            - unknown
    ListTransactionsResponse:
      title: Retrieve Transactions Response
      type: object
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          type: string
          enum:
            - v2_transactions_get
        data:
          type: array
          items:
            $ref: '#/components/schemas/Transaction'
        metadata:
          type: object
          required:
            - results
          properties:
            results:
              type: integer
              description: The number of results returned.
            next_page_token:
              type: string
              description: The token required to retrieve the next page of results. Will be omitted if no next page exists.
    Transaction:
      title: Transaction
      type: object
      description: A financial transaction
      required:
        - transaction_id
        - account_id
        - description
        - amount
        - credit_debit_indicator
        - status
        - date_time
      properties:
        transaction_id:
          type: string
          description: Unique identifier for the transaction. May be mutable depending on original ingestion source.
        account_id:
          type: string
          description: Identifier for the account associated with the transaction.
        provider:
          type: string
          description: Name of the transaction source provider.
        description:
          type: string
          description: Description of the transaction. Similar to the transaction information in Open Banking.
        credit_debit_indicator:
          type: string
          description: Credit/Debit Indicator
          enum:
            - credit
            - debit
        status:
          type: string
          description: Status of the transaction. Defaults to booked.
          enum:
            - booked
            - pending
        amount:
          $ref: '#/components/schemas/BudAmount'
        date_time:
          type: string
          description: Date of the transaction compliant with RFC3339.
        enrichments:
          $ref: '#/components/schemas/Enrichments'
        tags:
          type: array
          description: |
            A list of potential tags associated with the transaction after contextual enrichment, which can be used for filtering.
            Region and client specific.

            | Value                   | Description                                               |
            |:------------------------|:----------------------------------------------------------|
            | `benefit`               | A government/non-profit benefit transaction               |
            | `debt-collection`       | A transaction associated with a known debt-collector      |
            | `income`                | A transaction associated with income                      |
            | `regular-transaction`   | A transaction predicted to occur with a regular frequency |
            | `salary`                | A transaction associated with a regular wage              |
            | `subscription`          | A transaction associated with a subscription service      |
          items:
            type: string
    Enrichments:
      title: Enrichments
      type: object
      description: Contextual enrichments associated with a Transaction
      properties:
        categories:
          $ref: '#/components/schemas/Categories'
        merchant:
          $ref: '#/components/schemas/Merchant'
        processor:
          $ref: '#/components/schemas/Processor'
        regularity:
          $ref: '#/components/schemas/Regularity'
        locations:
          $ref: '#/components/schemas/Location'
        transaction_types:
          type: array
          description: Transaction types associated with the transaction
          items:
            type: string
        names:
          type: array
          description: Names that were detected in the transaction description
          items:
            type: string
    Categories:
      title: Categories
      type: object
      description: Categories enrichment associated with a Transaction
      properties:
        l1:
          $ref: '#/components/schemas/Category'
          description: Level 1 Category
        l2:
          $ref: '#/components/schemas/Category'
          description: Level 2 Category
    Category:
      title: Category
      type: object
      description: Category associated with a Transaction
      required:
        - slug
        - confidence
      properties:
        slug:
          type: string
          description: Unique human readable identifier of the category. Not subject to version control.
        confidence:
          type: string
          description: Degree of belief of correct assignment, expressed as a probability.
    Merchant:
      title: Merchant
      type: object
      description: Merchant enrichment associated with a Transaction
      properties:
        id:
          type: string
          description: UUID corresponding to the merchant, if available. Subject to version control.
        slug:
          type: string
          description: Unique human readable identifier of the merchant. Not subject to version control.
        display_name:
          type: string
          description: UI friendly display name for the merchant.
        logo:
          type: string
          description: URL supplying merchant logo, if available.
    Processor:
      title: Processor
      type: object
      description: Processor enrichment associated with a Transaction
      properties:
        id:
          type: string
          description: UUID corresponding to the processor, if available. Subject to version control.
        slug:
          type: string
          description: Unique human readable identifier of the merchant. Not subject to version control.
        display_name:
          type: string
          description: UI friendly display name for the processor.
        logo:
          type: string
          description: URL supplying processor logo, if available.
    Regularity:
      title: Regularity
      type: object
      description: Regularity enrichment associated with a Transaction.
      properties:
        frequency:
          type: string
          description: Detected frequency of the Transaction.
          enum:
            - unknown
            - daily
            - weekly
            - biweekly
            - monthly
            - quarterly
            - six_monthly
            - annually
        predicted_date_times:
          type: array
          description: Expected date times for the Transaction to repeat.
          items:
            type: string
        group_label:
          type: string
          description: Unique label applied to multiple transactions in the same group.
    Location:
      title: Location
      type: object
      description: Location enrichment associated with a Transaction
      properties:
        address:
          type: object
          description: The address of the detected location.
          properties:
            address_lines:
              type: array
              description: |
                The lines of the detected address. These could be anything from a full street address down to a simple town or city.
                The level of detail depends on the resolution with which we are able to detect the transaction location.
              items:
                type: string
            country:
              type: string
              description: An ISO-3166 Alpha-3 country code representing the detected country the transaction was located.
    RegularTransactionsResponse:
      title: Regular Transactions Response
      type: object
      description: Regular Transactions Response
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: array
          description: Information surrounding possible groups of Regular transactions
          items:
            $ref: '#/components/schemas/RegularTransaction'
        metadata:
          $ref: '#/components/schemas/ResultsMetadata'
    RegularTransaction:
      title: Regular Transaction Group
      description: Information surrounding a possible group of Regular transactions
      allOf:
        - $ref: '#/components/schemas/RegularPaymentsConfirmed'
        - type: object
          required:
            - transactions
          properties:
            transactions:
              type: array
              items:
                $ref: '#/components/schemas/BasicTransaction'
    RegularPaymentsConfirmed:
      title: Regular Payment Object
      type: object
      description: Details surrounding the regularity of the transaction
      required:
        - label
        - score
        - period
      properties:
        label:
          type: string
          description: A recurring transaction group identifier label associating regular transactions e.g. all Spotify transactions that are regular by the same monthly period will share the same label. The format of the label includes a hash of the transaction description and the amount, followed by an integer corresponding to the number of regular groups found, i.e. <hash>-<i>.
        score:
          type: string
          description: A floating point number between 0 and 1, to define the confidence level that the transaction is regular or not.
        period:
          type: string
          description: To describe the period between each transaction in a regular group.
          enum:
            - daily
            - weekly
            - biweekly
            - monthly
            - quarterly
            - six monthly
            - annually
            - unknown
    OperationId:
      title: Operation Id Field
      type: string
      description: A unique identifier/reference associated with a given endpoint/operation
    Error:
      title: Error Object
      type: object
      nullable: true
      description: Contains a field specific error message
      additionalProperties:
        type: string
    Errors:
      title: Array of Error Object
      description: Contains a list of error messages
      type: object
      additionalProperties:
        type: array
        items:
          type: string
    ServerErrorResponse:
      title: Server Error Response
      type: object
      required:
        - operation_id
        - code_id
        - message
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        code_id:
          type: string
          description: A descriptive enough string that is linked to the reason for the error.
        message:
          type: string
          description: An actual user friendly error message.
        errors:
          anyOf:
            - $ref: '#/components/schemas/Error'
            - $ref: '#/components/schemas/Errors'
    CustomerContextType:
      title: Customer Context Type
      type: string
      enum:
        - personal
        - business
      description: |
        The type of customer signed up:

        | Value      | Description                             |
        |------------|-----------------------------------------|
        | `personal` | Individuals with personal bank accounts |
        | `business` | Businesses with business accounts       |
    CustomerContextRegion:
      title: Customer Context Region
      type: string
      description: The region/country where the customer is located, format defined by ISO 3166 Alpha-2.
    CustomerContextLocale:
      title: Customer Context Locale
      type: string
      description: The locale/language, based on the region, format defined by BCP 47.
    CustomerContextModels:
      title: Customer Context Models
      type: object
      description: The configuration for Bud's enrichment models.
      properties:
        categorisation:
          type: string
          description: The name of the categorisation model to use for this customer at enrichment. See *List Categorisation Models V2* for available models.
    CustomerContextRequest:
      title: Customer Context
      description: The context in which a customer is processed throughout the Bud platform.
      type: object
      properties:
        type:
          $ref: '#/components/schemas/CustomerContextType'
        region:
          $ref: '#/components/schemas/CustomerContextRegion'
        locale:
          $ref: '#/components/schemas/CustomerContextLocale'
        models:
          $ref: '#/components/schemas/CustomerContextModels'
    IdempotentIdentifier:
      title: Idempotent Identifier
      description: An internal client identifier. If specified will ensure we only have one customer id per identifier.
      type: string
    ClientMetadata:
      title: Client Metadata
      description: A set of Client Metadata
      type: object
      maxLength: 255
      properties:
        idempotent_identifier:
          $ref: '#/components/schemas/IdempotentIdentifier'
    CustomerContextHostSecret:
      title: Customer Context Host Secret
      type: boolean
      description: Determines whether the customer secret key should be stored with Bud, meaning the API consumer does not need to store this and provide it on subsequent API calls related to that customer.
    CustomerContext:
      title: Customer Context
      description: The context in which a customer is processed throughout the Bud platform.
      type: object
      properties:
        type:
          $ref: '#/components/schemas/CustomerContextType'
        region:
          $ref: '#/components/schemas/CustomerContextRegion'
        locale:
          $ref: '#/components/schemas/CustomerContextLocale'
        host_secret:
          $ref: '#/components/schemas/CustomerContextHostSecret'
        models:
          $ref: '#/components/schemas/CustomerContextModels'
    CustomerCreatedV3:
      title: Customer Created V3
      type: object
      required:
        - customer_id
        - customer_context
      properties:
        customer_id:
          description: A unique identifier for a Customer, as registered on Bud's platform
          type: string
          format: uuid
        customer_secret:
          description: A unique Customer encryption key used to encrypt their data on the Bud platform. Only returned if the secret is *not* hosted on the Bud Platform.
          type: string
        customer_context:
          $ref: '#/components/schemas/CustomerContext'
        client_metadata:
          $ref: '#/components/schemas/ClientMetadata'
    CustomerCreatedV3Metadata:
      title: Customer Created V3 Metadata
      type: object
      properties:
        created_at:
          type: string
          format: date-time
          description: The date and time the customer was created. Format ISO 8601.
    CustomerCreateV3Response:
      title: Create Customer V3 Response
      type: object
      description: Expected response structure.
      required:
        - operation_id
        - data
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          $ref: '#/components/schemas/CustomerCreatedV3'
        metadata:
          $ref: '#/components/schemas/CustomerCreatedV3Metadata'
    BadRequestResponse:
      title: Bad Request Response
      type: object
      description: Expected response structure
      required:
        - operation_id
        - code_id
        - message
        - errors
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        code_id:
          type: string
          description: A descriptive enough string that is linked to the reason for the error.
        message:
          type: string
        errors:
          $ref: '#/components/schemas/Errors'
    CreateCustomersV3BatchPayload:
      title: Create Customers V3 Batch Payload
      type: object
      properties:
        number_of_customers:
          description: The number of customers to create (register) on Bud's platform in a single request.
          type: integer
          default: 1
          maximum: 200
        customer_context:
          $ref: '#/components/schemas/CustomerContextRequest'
    CreateCustomersV3BatchResponse:
      title: Create Customers V3 Batch Response
      type: object
      description: Expected response structure.
      required:
        - operation_id
        - data
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          description: An array of Customer Created objects.
          items:
            $ref: '#/components/schemas/CustomerCreatedV3'
        metadata:
          $ref: '#/components/schemas/CustomerCreatedV3Metadata'
    TaskId:
      title: Task Id
      type: string
      description: Bud Task identifier returned from an async task for the requested action
    CustomerDeleteV3:
      title: Customer Delete V3
      type: object
      required:
        - task_id
      properties:
        task_id:
          $ref: '#/components/schemas/TaskId'
    AsyncTaskMetadata:
      title: Async Task Metadata
      type: object
      description: Metadata associated with an asynchronous task
      properties:
        status:
          type: string
          description: The status of the job associated with the specified task id
          enum:
            - Completed
            - Pending
            - Failed
        next_url:
          type: string
          description: The URL to call to obtain the results of the task
        next_url_delay:
          type: number
          description: The time in milliseconds that the client should wait before polling the relevant GET endpoint with the above task id
    CustomerDeleteV3Response:
      title: Delete Customer V3 Response
      type: object
      description: Expected response structure.
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          $ref: '#/components/schemas/CustomerDeleteV3'
        metadata:
          $ref: '#/components/schemas/AsyncTaskMetadata'
    DeleteResultCodes:
      type: string
      description: The result of the operation. Either success or failed.
      enum:
        - success
        - failed
    TaskCustomerDeleteV3:
      title: Customer Delete Task Response
      type: object
      description: Result of GET customer delete taskId
      required:
        - task_id
      properties:
        result:
          $ref: '#/components/schemas/DeleteResultCodes'
        task_id:
          $ref: '#/components/schemas/TaskId'
    TaskCustomerDeleteV3MetaData:
      title: Task Status Metadata
      type: object
      description: Standard metadata response from the Customer Delete V3
      required:
        - status
      properties:
        status:
          type: string
          description: The status of the job associated with the specified task id
          enum:
            - Completed
            - Pending
            - Failed
        next_url:
          type: string
          description: The url to try next if the `status` property returned is `Pending`
        next_url_delay:
          type: number
          description: The time in milliseconds that the client should wait before polling the relevant GET endpoint with the above task id if the `status` property returned is `Pending`
    CustomerDeleteV3StatusResponse:
      title: Customer Delete Status Response
      type: object
      description: Expected response structure
      required:
        - operation_id
        - metadata
        - data
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          $ref: '#/components/schemas/TaskCustomerDeleteV3'
        metadata:
          $ref: '#/components/schemas/TaskCustomerDeleteV3MetaData'
    CustomerContextResponse:
      title: Customer Context Response
      description: Customer context response.
      type: object
      required:
        - operation_id
        - data
      properties:
        operation_id:
          type: string
        data:
          $ref: '#/components/schemas/CustomerContext'
    UpdateCustomerContextRequest:
      title: Update Customer Context Request
      type: object
      description: Expected request payload structure.
      properties:
        region:
          $ref: '#/components/schemas/CustomerContextRegion'
        locale:
          $ref: '#/components/schemas/CustomerContextLocale'
        models:
          $ref: '#/components/schemas/CustomerContextModels'
    UpdateCustomerContextResponse:
      title: Customer Context Update Response
      description: Customer context update response.
      type: object
      required:
        - operation_id
        - data
      properties:
        operation_id:
          type: string
        data:
          title: Updated Customer Context
          type: object
          properties:
            region:
              $ref: '#/components/schemas/CustomerContextRegion'
            locale:
              $ref: '#/components/schemas/CustomerContextLocale'
            models:
              $ref: '#/components/schemas/CustomerContextModels'
    BudCurrency:
      title: Currency
      description: |
        The three-letter [ISO currency code](https://www.iso.org/iso-4217-currency-codes.html) of the monetary amount.

        Example: `GBP`
      type: string
    BudMonetaryValue:
      title: Monetary Value
      description: |
        The value of the monetary amount. The value is formatted with the number of decimal places for the respective currency. 

        Example: `10.98`
      type: string
    BudAmount:
      title: Standard Bud Amount
      type: object
      description: The monetary amount.
      required:
        - value
        - currency
      properties:
        value:
          $ref: '#/components/schemas/BudMonetaryValue'
        currency:
          $ref: '#/components/schemas/BudCurrency'
    AccountV2:
      title: Account
      type: object
      required:
        - account_id
        - currency
      properties:
        account_id:
          type: string
          description: |
            A unique id associated with the account.

            Example: `sdb4eRMaad8XVEvdIoISOQ`
        currency:
          $ref: '#/components/schemas/BudCurrency'
        holder:
          title: Account_Holder
          description: |
            The account holder. This field is only present if parties data **is not** available.

            Parties data will only be present if you are a Check customer, and the provider is support by Check. 
            Providers that support Check can be found in the Connect coverage table in Guides, under Connect.
          type: object
          properties:
            name:
              type: string
              description: |
                The name of the given account holder.

                Example: `John Smith`
            relationship:
              type: string
              description: |
                The relationship that the individual holder has with the account. If parties data is not present, this will always be `unknown`.

                Currently supported values include (but are not necessarily limited to):
                  - `sole`
                  - `joint`
                  - `delegate`
                  - `unknown`
        holders:
          type: array
          description: |
            The account holders. This field is only present if parties data **is** available.

            Parties data will only be present if you are a Check customer, and the provider is supported by Check. 
            Providers that support Check can be found in the Connect coverage table in Guides, under Connect.
          items:
            title: Account_Holder
            type: object
            properties:
              name:
                type: string
                description: |
                  The name of the given account holder.

                  Example: `John Smith`
              relationship:
                type: string
                description: |
                  The relationship that the individual holder has with the account. If parties data is not present, this will always be `unknown`

                  Currently supported values include (but are not necessarily limited to):
                    - `sole`
                    - `joint`
                    - `delegate`
                    - `unknown`
        account_name:
          type: string
          description: |
            The name associated with the account, this is often a friendly name assigned to the account to make it easier to refer to.

            Example: `Household Savings Account`
        account_type:
          type: string
          description: |
            The type of account.

            Currently supported values include (but are not necessarily limited to):
              - `charge_card`
              - `credit_card`
              - `current_account`
              - `e_money`
              - `investment`
              - `loan`
              - `mortgage`
              - `other`
              - `pre_paid_card`
              - `savings`
        usage_type:
          type: string
          description: |
            The intended usage of the account.

            Currently supported values include (but are not necessarily limited to):
              - `personal`
              - `business`
        provider:
          type: string
          description: |
            The account's provider, this is usually the bank or building society the account is held with.

            Example: `Nationwide`
        identifiers:
          type: object
          description: These are wellknown fields which uniquely identify the account.
          properties:
            uk_sort_code:
              type: string
              description: |
                A six digit number identifying the UK bank or building society the account is held with. This is usually supplied alongside a `uk_account_number` to uniquely identify the account.

                Example: `601613`
            uk_account_number:
              type: string
              description: |
                An eight digit number uniquely identifying the account for the UK bank or building society the account is held with. This is usually supplied alongside a `uk_sort_code` to uniquely identify the account from accounts with other UK banks or building societies.

                Example: `31926819`
            nz_account_number:
              type: string
              description: |
                A sixteen digit number uniquely identifying the account and New Zealand bank the account is held with.

                Example: `1212341234567123`
            iban:
              type: string
              description: |
                A thirty-four character alphanumerical code (ISO 13616), internationally and uniquely identifying the account.

                Example: `GB29NWBK60161331926819`
            pan:
              type: string
              description: |
                A number between 14 and 19 digits that uniquely identifies the account, this is usually the number printed on the card assigned to the account.

                Example: `4444333322221111`
        balances:
          type: array
          title: Balances
          description: The latest balances for the account.
          items:
            type: object
            title: Balance
            required:
              - date
              - type
              - amount
              - credit_debit_indicator
            properties:
              date:
                type: string
                description: |
                  The date when the balance was last updated in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).

                  Examples:
                    - `2023-01-17T17:29:51Z`
                    - `2023-01-17T17:29:51-08:00`
              type:
                type: string
                description: |
                  The type for the given balance

                  Currently supported values include (but are not necessarily limited to):
                    - `closing_available`
                    - `closing_booked`
                    - `closing_cleared`
                    - `expected`
                    - `forward_available`
                    - `information`
                    - `interim_available`
                    - `interim_booked`
                    - `interim_cleared`
                    - `opening_available`
                    - `opening_booked`
                    - `opening_cleared`
                    - `previously_closed_booked`
              amount:
                $ref: '#/components/schemas/BudAmount'
              credit_debit_indicator:
                type: string
                description: The credit or debit state of the given balance
                enum:
                  - credit
                  - debit
        credit_lines:
          type: array
          title: Credit Lines
          description: The latest lines of credit available to the account. This is typically a representation of the overdraft or credit limits.
          items:
            type: object
            title: Credit_Line
            required:
              - date
              - type
              - amount
            properties:
              date:
                type: string
                description: |
                  The date when the credit line was last updated in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).

                  Examples:
                    - `2023-01-17T17:29:51Z`
                    - `2023-01-17T17:29:51-08:00`
              type:
                type: string
                description: |
                  The type of the given credit line.

                  Currently supported values include (but are not necessarily limited to):
                    - `available`
                    - `credit`
                    - `emergency`
                    - `pre_agreed`
                    - `temporary`
              amount:
                $ref: '#/components/schemas/BudAmount'
    ListAccountsV2Response:
      title: Retrieve Accounts Response
      type: object
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          type: string
          enum:
            - financial_v2_accounts
        data:
          type: array
          items:
            $ref: '#/components/schemas/AccountV2'
        metadata:
          type: object
          required:
            - parameters
            - result_count
          properties:
            parameters:
              type: object
              properties:
                currencies:
                  description: The Currency values supplied in the request to generate the given result set.
                  type: array
                  items:
                    $ref: '#/components/schemas/BudCurrency'
                account_types:
                  description: |
                    The Account Type values supplied in the request to generate the given result set.

                    Currently supported values include (but are not necessarily limited to):
                      - `charge_card`
                      - `credit_card`
                      - `current_account`
                      - `e_money`
                      - `investment`
                      - `loan`
                      - `mortgage`
                      - `other`
                      - `pre_paid_card`
                      - `savings`
                  type: array
                  items:
                    type: string
                usage_types:
                  description: |
                    The Usage Type values supplied in the request to generate the given result set.

                    Currently supported values include (but are not necessarily limited to):
                      - `personal`
                      - `business`
                  type: array
                  items:
                    type: string
                holder_types:
                  description: |
                    The Holder Type values supplied in the request to generate the given result set.

                    Currently supported values include (but are not necessarily limited to):
                      - `sole`
                      - `joint`
                      - `delegate`
                      - `unknown`
                  type: array
                  items:
                    type: string
                providers:
                  description: The Provider values supplied in the request to generate the given result set.
                  type: array
                  items:
                    type: string
            result_count:
              type: number
              description: The number of accounts returned in the results
    RetrieveAccountByIDV2Response:
      title: Retrieve Account By ID Response
      type: object
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          type: string
          enum:
            - financial_v2_accounts_account_id
        data:
          $ref: '#/components/schemas/AccountV2'
        metadata:
          type: object
    CustomerSecret:
      type: string
      description: The Bud Customer secret used to encrypt customer data. This is required only if the customer secret is not already stored with Bud.
    IngestAccountDetails:
      title: Ingest Account Details
      type: object
      description: Schema to define any further details about a given account
      required:
        - scheme_name
        - identification
        - secondary_identification
      properties:
        scheme_name:
          type: string
          description: Name of the scheme associated with the account
        identification:
          type: string
          description: A unique identifier for the account
        secondary_identification:
          type: string
          description: Any secondary identifier associated with the account
        name:
          type: string
          description: The name of the account holder
    InpAmount:
      title: Amount
      description: Amount structure
      allOf:
        - type: object
          properties:
            local_currency:
              allOf:
                - description: |
                    The original three-letter [ISO currency code](https://www.iso.org/iso-4217-currency-codes.html) the payment was transacted in.

                    Example: `USD`
                - $ref: '#/components/schemas/BudCurrency'
            local_value:
              allOf:
                - description: |
                    The original value of the payment in the local currency. The value is formatted with the number of decimal places for the respective currency. 

                    Example: `10.98`
                - $ref: '#/components/schemas/BudMonetaryValue'
        - $ref: '#/components/schemas/BudAmount'
    IngestCreditLine:
      title: Ingest Credit Line
      type: object
      description: A set of elements used to provide details on the credit line
      properties:
        included:
          type: boolean
          description: Indicates whether or not the credit line is included in the balance of the account, if not present, credit line is not included in the balance amount of the account
        amount:
          $ref: '#/components/schemas/InpAmount'
        type:
          type: string
          description: Limit type, in a coded form
          enum:
            - Available
            - Credit
            - Emergency
            - Pre-Agreed
            - Temporary
    IngestAccountBalance:
      title: Ingest Account Balance
      type: object
      description: Information surrounding a Customer's Account Balance
      required:
        - amount
        - date
        - type
        - credit_debit_indicator
        - credit_line
      properties:
        amount:
          $ref: '#/components/schemas/InpAmount'
        credit_debit_indicator:
          type: string
          description: To describe whether the account balance is in debit or credit
          enum:
            - incoming_credit
            - outgoing_debit
        credit_line:
          items:
            $ref: '#/components/schemas/IngestCreditLine'
        date:
          type: string
          format: YYYY-MM-DD
          description: The date associated with the balance of the given account
        time:
          type: string
          format: hh:mm:ss
          description: The time associated with the balance of the given account
        type:
          type: string
          description: |
            Describes the state of the balance

            | Value                     | Description                                               |
            |:--------------------------|:----------------------------------------------------------|
            | `ClosingAvailable`        | Closing balance of amount of money that is at the disposal of the account owner on the date specified.               |
            | `ClosingBooked`           | Balance of the account at the end of the pre-agreed account reporting period. It is the sum of the opening booked balance at the beginning of the period and all entries booked to the account during the pre-agreed account reporting period.      |
            | `ClosingCleared`          | Closing balance of amount of money that is cleared on the date specified.                     |
            | `Expected`                | Balance, composed of booked entries and pending items known at the time of calculation, which projects the end of day balance if everything is booked on the account and no other entry is posted.  |
            | `ForwardAvailable`        | Forward available balance of money that is at the disposal of the account owner on the date specified.               |
            | `Information`             | Balance for informational purposes.      |
            | `InterimAvailable`        | Available balance calculated in the course of the account servicer's business day, at the time specified, and subject to further changes during the business day. The interim balance is calculated on the basis of booked credit and debit items during the calculation time/period specified.       |
            | `InterimBooked`           | Balance calculated in the course of the account servicer's business day, at the time specified, and subject to further changes during the business day. The interim balance is calculated on the basis of booked credit and debit items during the calculation time/period specified.       |
            | `InterimCleared`          | Cleared balance calculated in the course of the account servicer's business day, at the time specified, and subject to further changes during the business day.        |
            | `OpeningAvailable`        | Opening balance of amount of money that is at the disposal of the account owner on the date specified.        |
            | `OpeningBooked`           | Book balance of the account at the beginning of the account reporting period. It always equals the closing book balance from the previous report.        |
            | `OpeningCleared`          | Opening balance of amount of money that is cleared on the date specified.       |
            | `PreviouslyClosedBooked`  | Balance of the account at the previously closed account reporting period. The opening booked balance for the new period has to be equal to this balance.  |
          enum:
            - ClosingAvailable
            - ClosingBooked
            - ClosingCleared
            - Expected
            - ForwardAvailable
            - Information
            - InterimAvailable
            - InterimBooked
            - InterimCleared
            - OpeningAvailable
            - OpeningBooked
            - OpeningCleared
            - PreviouslyClosedBooked
    IngestCustomerAccount:
      title: Ingest Customer Account
      description: An account item.
      type: object
      required:
        - provider
        - account_id
        - currency
        - account_type
        - account_sub_type
        - details
        - balances
      properties:
        provider:
          type: string
          description: The name of the provider.
        account_id:
          type: string
          description: The unique id associated with the account
        currency:
          type: string
          description: Main currency (in ISO4217 format) of the account
        account_type:
          type: string
          description: The type of the account
          enum:
            - Business
            - Personal
        account_sub_type:
          type: string
          description: The sub type of the account
          enum:
            - ChargeCard
            - CreditCard
            - CurrentAccount
            - EMoney
            - Loan
            - Mortgage
            - PrePaidCard
            - Savings
        details:
          type: array
          description: Provides the details to identify an account
          items:
            $ref: '#/components/schemas/IngestAccountDetails'
        balances:
          type: array
          description: The balances associated with the account
          items:
            $ref: '#/components/schemas/IngestAccountBalance'
    IngestCustomerWithAccounts:
      title: Ingest Customer With Accounts
      description: A customer with a accounts data.
      type: object
      required:
        - customer_id
        - accounts
      properties:
        customer_id:
          type: string
          format: uuid
          description: A unique identifier for a Customer, as registered on Bud's platform.
        customer_secret:
          $ref: '#/components/schemas/CustomerSecret'
        accounts:
          type: array
          description: List of accounts that belongs to the customer.
          minLength: 1
          items:
            $ref: '#/components/schemas/IngestCustomerAccount'
    IngestAccountsRequest:
      title: Bud V1 Accounts Request
      description: Ingest accounts expected request body.
      type: array
      items:
        $ref: '#/components/schemas/IngestCustomerWithAccounts'
    IngestTransactionsResponse:
      title: Ingest First Party Transaction Data Response
      description: Ingest transactions response body.
      type: object
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: object
          properties:
            task_id:
              $ref: '#/components/schemas/TaskId'
        metadata:
          $ref: '#/components/schemas/AsyncTaskMetadata'
    IngestV2Response:
      type: object
      required:
        - operation_id
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
          example: v2_ingest_transactions_post
    IngestV2Metadata:
      title: Created Task Details
      description: Metadata on the created task, including the task_id
      type: object
      required:
        - task_id
      properties:
        task_id:
          type: string
          format: uuid
          description: Can be used with the transaction status endpoint to retrieve the status of the full enriched process
        next_url:
          type: string
          format: url
          description: The URL to call to obtain the current status of the task.
          example: /v1/enrich-transactions/4cef424c-1d7f-4cab-8be2-aee7e1774a00
        next_url_delay:
          type: number
          description: The time in milliseconds that the client should wait before trying to retrieve the current status of the task.
          example: 50
    IngestV2AsyncResponse:
      title: Ingest Transactions V2 Async Response
      type: object
      allOf:
        - $ref: '#/components/schemas/IngestV2Response'
        - type: object
          required:
            - operation_id
            - metadata
          properties:
            metadata:
              $ref: '#/components/schemas/IngestV2Metadata'
    BodyDecodeError:
      type: object
      title: JSON Decoding Error
      required:
        - operation_id
        - code_id
        - message
        - errors
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        code_id:
          type: string
          enum:
            - failed_body_decode
        message:
          type: string
          description: 'High level description on what has failed '
        errors:
          type: object
          description: Contains more details on the decoding error
          required:
            - decode_error
          properties:
            decode_error:
              type: string
    FirstPartyIngestionGenericError:
      type: object
      title: Content Type Error
      required:
        - operation_id
        - code_id
        - message
        - errors
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        code_id:
          type: string
          enum:
            - failed_validation
        message:
          type: string
          description: 'High level description on what has failed '
        errors:
          type: object
          description: Error details
          properties:
            content_type:
              type: string
              description: The content type header provided in the request is unknown
            <index>.customer_id:
              type: string
              description: Missing customer ID. Index prefix is the index of the customer in the request
            <index>.customer_secret:
              type: string
              description: Missing customer secret. Index is the index of the customer in the request
            <index>.accounts:
              type: string
              description: Missing customer accounts. Index is the index of the customer in the request
      example:
        operation_id: ingest_accounts_post
        code_id: failed_validation
        message: validation failure(s) in request payload
        errors:
          0.customer_secret: The customer secret is mandatory
    ValidationMissing:
      type: array
      title: Missing Fields
      description: list of required missing fields for a transaction
      items:
        type: string
    ValidationInvalid:
      type: array
      title: Invalid Fields
      description: list of invalid fields for a transaction
      items:
        type: string
    AccountsDataValidationError:
      type: object
      title: Accounts validation error
      required:
        - operation_id
        - code_id
        - message
        - errors
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        code_id:
          type: string
          enum:
            - failed_validation
        message:
          type: string
          description: High level description on what has failed
        errors:
          type: object
          title: Map of customers
          description: a map of customer IDs to account validation errors
          properties:
            missing_fields:
              type: object
              title: Map of Account
              description: |
                A map of accounts to missing fields array. 
                The key contains the index of the account causing issues. 
                See example
              additionalProperties:
                $ref: '#/components/schemas/ValidationMissing'
            invalid_fields:
              type: object
              title: Map of Account
              description: |
                A map of accounts to invalid fields array. 
                The key contains the index of the account causing issues. 
                See example
              additionalProperties:
                $ref: '#/components/schemas/ValidationInvalid'
      example:
        operation_id: v2_ingest_accounts_post
        code_id: failed_validation
        message: validation failure(s) in request payload
        errors:
          1db8c4b5-e5ae-429e-947b-6a4616ffc717:
            missing_fields:
              accounts[0]:
                - provider
                - account_id
              accounts[1]:
                - account_id
            invalid_fields:
              accounts[0]:
                - currency
    CustomerID:
      type: string
      format: uuid
      description: A unique identifier for a Customer, as registered on Bud's platform.
      example: c3339af9-2426-44d4-9c4d-ddb8fd281e23
    SynchronousEnrichmentsList:
      type: array
      description: |
        The list of enrichments product to execute during the synchronous execution of the request. Based on this list, the transactions sent 
        will be processed through a number of enrichment flows, and this drives the amount of additional information attached to each transactions 
        in the synchronous process.

        The list of available enrichement products during the synchronous ingestion is the following:
        - categories
        - merchants

        The default behaviour is to execute `categories` and `merchants`.
              
        Note: This attribute doesn't limit the execution of all Bud's enrichments, we'll still return a number of additional information (eg: tokens), 
        but it switches on and off the two enrichments listed above.
      example:
        - categories
        - merchants
      items:
        type: string
        enum:
          - categories
          - merchants
    CustomerTransactionV3:
      title: Customer Transaction V3
      description: A schema for Bud V3 transaction format
      type: object
      required:
        - transaction_id
        - account_id
        - description
        - date_time
        - amount
      properties:
        transaction_id:
          type: string
          format: uuid
          description: Unique, immutable transaction identifier
          example: 4cef424c-1d7f-4cab-8be2-aee7e1774a00
        description:
          type: string
          description: Free text string providing details on the transaction itself
        account_id:
          type: string
          format: uuid
          description: The account identifier that the transaction belongs to
          example: 2f5b2055-6253-4cd0-b646-06788342a609
        date_time:
          type: string
          format: datetime
          description: The date detailing when the transaction occurred, compliant with RFC3339
          example: '2022-11-10T23:00:00Z'
        amount:
          type: string
          description: |
            The value of the monetary amount. The value is formatted with the number of decimal places for the respective currency.

            A positive amount is a credit entry and a negative a debit entry.

            Example: `"10.98"` or `"-10.98"`
        currency:
          $ref: '#/components/schemas/BudCurrency'
    TransactionWindow:
      type: object
      title: Transaction Window
      description: |
        The transaction window is used to describe the entire period for which you have 
        provided full coverage for the transactions within the request. It is used by Bud to 
        ascertain periods of inactivity on the account(s) in question to ensure accurate data 
        can be provided across downstream endpoints (e.g. Retrieve Balances Over Time).
      required:
        - account_id
        - start
        - end
      properties:
        account_id:
          type: string
          format: uuid
          description: The account identifier that the transaction belongs to
          example: 2f5b2055-6253-4cd0-b646-06788342a609
        start:
          type: string
          format: datetime
          description: The date detailing the start of the transaction window, compliant with RFC3339
          example: '2022-05-10T23:00:00Z'
        end:
          type: string
          format: datetime
          description: The date detailing the end of the transaction window, compliant with RFC3339
          example: '2022-10-10T23:00:00Z'
    TransactionWindowArray:
      type: array
      description: |
        If not provided, the transaction window is inferred from the date of the first and last transactions.
      items:
        $ref: '#/components/schemas/TransactionWindow'
    IngestTransactionsV3Request:
      title: Bud V3 Transactions Request
      description: Ingest transaction expected request body.
      type: array
      items:
        type: object
        required:
          - customer_id
          - transactions
        properties:
          customer_id:
            $ref: '#/components/schemas/CustomerID'
          customer_secret:
            $ref: '#/components/schemas/CustomerSecret'
          sync_enrichments:
            $ref: '#/components/schemas/SynchronousEnrichmentsList'
          transactions:
            type: array
            description: List of transactions belonging to the customer.
            minLength: 1
            items:
              $ref: '#/components/schemas/CustomerTransactionV3'
          transaction_windows:
            $ref: '#/components/schemas/TransactionWindowArray'
    schemas-Categories:
      title: Categories
      type: object
      description: |
        Categories enrichment associated with a Transaction, as generated by Bud's artificial intelligence models. 
        Currently two levels of category are supported, with `l1` being a coarse-grained category level and `l2` being
        more refined.
      properties:
        l1:
          $ref: '#/components/schemas/Category'
          description: Level 1 Category
        l2:
          $ref: '#/components/schemas/Category'
          description: Level 2 Category
    schemas-Merchant:
      title: Merchant
      type: object
      description: |
        Merchant enrichment associated with a Transaction, as generated using a combination of Bud's artificial 
        intelligence models and database of known merchants.
      properties:
        id:
          type: string
          description: UUID corresponding to the merchant, if available. Subject to version control.
        slug:
          type: string
          description: Unique human readable identifier of the merchant. Not subject to version control.
        display_name:
          type: string
          description: UI friendly display name for the merchant.
        logo:
          type: string
          description: URL supplying merchant logo, if available.
    schemas-Processor:
      title: Processor
      type: object
      description: |
        Processor enrichment associated with a Transaction, as generated using a combination of Bud's artificial 
        intelligence models and database of known payment processors.
      properties:
        id:
          type: string
          description: UUID corresponding to the processor, if available. Subject to version control.
        slug:
          type: string
          description: Unique human readable identifier of the processor. Not subject to version control.
        display_name:
          type: string
          description: UI friendly display name for the processor.
        logo:
          type: string
          description: URL supplying processor logo, if available.
    schemas-Regularity:
      title: Regularity
      type: object
      description: |
        Regularity enrichment associated with a Transaction, as generated by Bud's artificial intelligence models. 
        Transactions that are similar and have a known frequency will all have the same regularity enrichment.
      properties:
        frequency:
          type: string
          description: Detected frequency of the Transaction.
          enum:
            - unknown
            - daily
            - weekly
            - biweekly
            - monthly
            - quarterly
            - six_monthly
            - annually
        predicted_date_times:
          type: array
          description: Expected date times for the Transaction to repeat.
          items:
            type: string
        group_label:
          type: string
          description: Unique label applied to multiple transactions in the same group.
    schemas-Enrichments:
      title: Enrichments
      type: object
      description: Contextual enrichments associated with a Transaction
      properties:
        categories:
          $ref: '#/components/schemas/schemas-Categories'
        merchant:
          $ref: '#/components/schemas/schemas-Merchant'
        processor:
          $ref: '#/components/schemas/schemas-Processor'
        regularity:
          $ref: '#/components/schemas/schemas-Regularity'
        locations:
          $ref: '#/components/schemas/Location'
        transaction_types:
          type: array
          description: Transaction types associated with the transaction
          items:
            type: string
        names:
          type: array
          description: Names that were detected in the transaction description
          items:
            type: string
    schemas-Transaction:
      title: Transaction
      type: object
      description: A financial transaction
      required:
        - transaction_id
        - account_id
        - description
        - amount
        - credit_debit_indicator
        - status
        - date_time
      properties:
        transaction_id:
          type: string
          description: Unique identifier for the transaction. May be mutable depending on original ingestion source.
        account_id:
          type: string
          description: Identifier for the account associated with the transaction.
        provider:
          type: string
          description: Name of the transaction source provider. Optional as it may not have been supplied when using first party data.
        description:
          type: string
          description: Description of the transaction.
        credit_debit_indicator:
          type: string
          description: Credit/Debit Indicator
          enum:
            - credit
            - debit
        status:
          type: string
          description: Status of the transaction. Defaults to booked.
          enum:
            - booked
            - pending
        amount:
          $ref: '#/components/schemas/BudAmount'
        date_time:
          type: string
          description: Date of the transaction compliant with RFC3339.
        enrichments:
          $ref: '#/components/schemas/schemas-Enrichments'
        tags:
          type: array
          description: |
            A list of potential tags associated with the transaction after contextual enrichment, which can be used for filtering.
            Region and client specific.

            | Value                   | Description                                               |
            |:------------------------|:----------------------------------------------------------|
            | `benefit`               | A government/non-profit benefit transaction               |
            | `debt-collection`       | A transaction associated with a known debt-collector      |
            | `loan`                  | A transaction associated with a loan                      |
            | `income`                | A transaction associated with income                      |
            | `pending`               | A transaction which has not been booked                   |
            | `regular-transaction`   | A transaction predicted to occur with a regular frequency |
            | `salary`                | A transaction associated with a regular wage              |
            | `subscription`          | A transaction associated with a subscription service      |
          items:
            type: string
    IngestV2SyncResponseData:
      type: object
      title: Enriched Customer Transactions
      required:
        - customer_id
        - enriched_transactions
      properties:
        customer_id:
          $ref: '#/components/schemas/CustomerID'
        enriched_transactions:
          type: array
          items:
            $ref: '#/components/schemas/schemas-Transaction'
    IngestV2SyncResponse:
      title: Ingest Transactions V2 Sync Response
      type: object
      allOf:
        - $ref: '#/components/schemas/IngestV2Response'
        - type: object
          required:
            - operation_id
            - metadata
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/IngestV2SyncResponseData'
            metadata:
              $ref: '#/components/schemas/IngestV2Metadata'
    ValidationError:
      type: object
      title: Validation Errors
      required:
        - operation_id
        - code_id
        - message
        - errors
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        code_id:
          type: string
          enum:
            - failed_validation
        message:
          type: string
          description: 'High level description on what has failed '
        errors:
          type: object
          title: Map_of_customer_IDs
          description: a map of customer IDs to transaction validation errors
          properties:
            missing_fields:
              type: object
              title: Map of transaction IDs
              description: |
                A map of transaction IDs to missing fields array. 
                If the transaction ID was missing use the request transaction array index to identify it. 
                See example
              additionalProperties:
                $ref: '#/components/schemas/ValidationMissing'
            invalid_fields:
              type: object
              title: Map of transaction IDs
              description: |
                A map of transaction IDs to invalid fields array. 
                If the transaction ID was missing use the request transaction array index to identify it. 
                See example
              additionalProperties:
                $ref: '#/components/schemas/ValidationInvalid'
      example:
        operation_id: enrich_transactions_post
        code_id: failed_validation
        message: validation failure(s) in request payload
        errors:
          1db8c4b5-e5ae-429e-947b-6a4616ffc717:
            missing_fields:
              8b13ac45-9fe6-4c17-8c6d-b60ab2b4edad:
                - description
                - customer_id
              ba466961-d623-4173-9001-2f6487a9a41e:
                - customer_id
              tx-1:
                - transaction_id
              578f24f2-5046-463a-bca6-239e0dfac7fa:
                - amount
            invalid_fields:
              8b13ac45-9fe6-4c17-8c6d-b60ab2b4edad:
                - date
              ba466961-d623-4173-9001-2f6487a9a41e:
                - date
    IngestResponseV2SubTask:
      title: Customer Ingest Task
      description: A single customer ingest task status
      type: object
      required:
        - customer_id
        - status
        - error
      properties:
        customer_id:
          type: string
          format: uuid
          description: A unique identifier for a Customer, as registered on Bud's platform.
        status:
          title: Ingest Response Status
          description: Ingest response status.
          type: string
          enum:
            - Completed
            - Failed
        error:
          nullable: true
          description: Any error messages describing why a sub task has failed.
          type: object
          additionalProperties: true
    OverallIngestResponseStatus:
      title: Ingest Task Overall Status
      description: Ingest response status.
      type: string
      enum:
        - Completed
        - Pending
        - Failed
        - PartialCompleted
    TaskNotFoundError:
      type: object
      title: Task Not Found
      required:
        - operation_id
        - code_id
        - message
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        code_id:
          type: string
        message:
          type: string
          description: High level description on what has failed
      example:
        operation_id: ingest_transactions_get
        code_id: not_found
        message: Task not found
    CategoryObject:
      title: Category Object
      type: object
      description: Category information
      required:
        - id
        - label
      properties:
        id:
          type: string
          description: The identifier (slug) of the category
        label:
          type: string
          description: The label (name) of the transaction category for display purposes
    LegacyBudAmount:
      title: Legacy Bud Amount
      type: object
      description: The monetary amount.
      required:
        - amount
        - currency
      properties:
        amount:
          $ref: '#/components/schemas/BudMonetaryValue'
        currency:
          $ref: '#/components/schemas/BudCurrency'
    LegacyCategoryTotalSpend:
      title: Category Total Object
      type: object
      description: Information regarding the total income and expenditure of a given category
      required:
        - category
        - credit_amount
        - debit_amount
      properties:
        category:
          $ref: '#/components/schemas/CategoryObject'
        credit_amount:
          items:
            $ref: '#/components/schemas/LegacyBudAmount'
        debit_amount:
          items:
            $ref: '#/components/schemas/LegacyBudAmount'
    CategoriesTotalResponse:
      title: Categories Totals Response
      type: object
      description: ''
      required:
        - operation_id
        - data
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: object
          description: Total spend by categories
          required:
            - categories
            - sub_categories
          properties:
            categories:
              type: array
              description: A list of category total objects
              items:
                $ref: '#/components/schemas/LegacyCategoryTotalSpend'
            sub_categories:
              type: array
              description: A list of subcategory total objects
              items:
                $ref: '#/components/schemas/LegacyCategoryTotalSpend'
    CategoryTotalAmountWithTrxCount:
      type: object
      title: Amount with transaction count
      description: Amount of money in the cash transaction entry, including the number of transactions used in the calculation.
      required:
        - transaction_count
        - amount
      properties:
        amount:
          $ref: '#/components/schemas/BudAmount'
        transaction_count:
          type: integer
    CategoriesTotalV2L2:
      title: Categories Totals Response
      type: object
      required:
        - name
      properties:
        credit_amount:
          type: array
          items:
            $ref: '#/components/schemas/CategoryTotalAmountWithTrxCount'
        debit_amount:
          type: array
          items:
            $ref: '#/components/schemas/CategoryTotalAmountWithTrxCount'
        name:
          type: string
          description: Category id as slug.
    CategoriesTotalV2:
      type: object
      required:
        - name
      properties:
        credit_amount:
          type: array
          items:
            $ref: '#/components/schemas/CategoryTotalAmountWithTrxCount'
        debit_amount:
          type: array
          items:
            $ref: '#/components/schemas/CategoryTotalAmountWithTrxCount'
        name:
          type: string
          description: Category id as slug.
        l2_totals:
          type: array
          description: L2 category totals.
          items:
            $ref: '#/components/schemas/CategoriesTotalV2L2'
    CategoriesTotalV2Response:
      title: Categories Totals Response
      type: object
      description: ''
      required:
        - operation_id
        - data
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: array
          items:
            $ref: '#/components/schemas/CategoriesTotalV2'
    CategoriesTotalTrendsV2Response:
      type: object
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: array
          items:
            type: object
            required:
              - data
              - to
              - from
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/CategoriesTotalV2'
              to:
                type: string
                example: '2023-05-21T07:20:50.52Z'
                description: RFC 3339 Compliant date stamp indicating the beginning of the transaction window used in this calculation
              from:
                type: string
                example: '2023-05-21T07:20:50.52Z'
                description: RFC 3339 Compliant date stamp indicating the end of the transaction window used in this calculation
    components_schemas-Merchant:
      title: Bud Merchant Object
      type: object
      description: Details regarding a merchant associated with a transaction
      required:
        - id
        - name
        - logo
      properties:
        id:
          type: string
          description: Identifier for the detected merchant
        name:
          type: string
          description: Display name for the detected merchant
        logo:
          type: string
          description: URL for logo of the detected merchant
    MerchantTotalV2:
      type: object
      title: Merchant Total
      required:
        - merchant
        - total_debit
        - total_credit
        - transaction_count
      properties:
        merchant:
          $ref: '#/components/schemas/components_schemas-Merchant'
        total_debit:
          allOf:
            - title: Total Debit
              description: Total debit amount of all transactions identified with the named merchant
            - $ref: '#/components/schemas/BudAmount'
        total_credit:
          allOf:
            - title: Total Credit
              description: Total credit amount of all transactions identified with the named merchant
            - $ref: '#/components/schemas/BudAmount'
        transaction_count:
          type: number
          title: Transaction Count
          description: Total number of transactions identified with the named merchant
    LegacyBudDateRangeMetadata:
      title: Metadata
      type: object
      required:
        - from
        - to
      properties:
        from:
          type: string
          description: |
            The date from when results were retrieved in the format [ISO-8601](https://www.iso.org/iso-8601-date-and-time-format.html).
            This is either populated with the default value used when retrieving the results, or the user specified parameter.

            Example: `2023-01-17`
        to:
          type: string
          description: |
            The date up to when results were retrieved in the format [ISO-8601](https://www.iso.org/iso-8601-date-and-time-format.html).
            This is either populated with the default value used when retrieving the results, or the user specified parameter.

            Example: `2023-03-17`
    TransactionsResultsMetadata:
      title: Metadata
      description: Metadata associated with the response schema
      allOf:
        - $ref: '#/components/schemas/LegacyBudDateRangeMetadata'
        - type: object
          required:
            - results
          properties:
            results:
              type: number
              description: Number of results returned
    MerchantTotalsMetadataV2:
      allOf:
        - $ref: '#/components/schemas/TransactionsResultsMetadata'
        - type: object
          title: Metadata
          properties:
            categories_included:
              description: Categories included in total (from `X-Include-Categories`)
              type: array
              items:
                type: string
            categories_excluded:
              description: Categories excluded from total (from `X-Exclude-Categories`)
              type: array
              items:
                type: string
    MerchantTotalsResponseV2:
      title: Merchant Totals
      type: object
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: array
          items:
            $ref: '#/components/schemas/MerchantTotalV2'
        metadata:
          $ref: '#/components/schemas/MerchantTotalsMetadataV2'
    CategorisationModel:
      title: Categorisation Model
      type: object
      description: Bud categorisation model.
      required:
        - name
        - description
      properties:
        name:
          type: string
          description: Name of the model.
        description:
          type: string
          description: Description of the model & use-cases it provides.
        deprecated:
          type: boolean
          description: A flag to mark a particular model version as deprecated (this field is omitted if the model is not deprecated).
    GetModelsResponse:
      title: Models Response
      required:
        - operation_id
        - data
      properties:
        operation_id:
          type: string
        data:
          type: array
          items:
            $ref: '#/components/schemas/CategorisationModel'
    CategoriesFlat:
      title: Category List
      type: object
      description: A list of all the available categories and subcategories.
      properties:
        categories:
          type: array
          description: List of all the available categories.
          items:
            type: string
        subcategories:
          type: array
          description: List of all the available subcategories.
          items:
            type: string
    CategoriesMap:
      title: Category Map
      description: A map of all the available categories and respective subcategories
      type: array
      items:
        title: Category
        description: A single category and its respective subcategories.
        type: object
        properties:
          name:
            title: Category Name
            description: The name of the category.
            type: string
          subcategories:
            title: Subcategories
            description: The respective subcategories for the given category.
            type: array
            items:
              title: subcategory
              description: A subcategory that belongs to the given category.
              type: object
              properties:
                name:
                  title: Subcategory Name
                  description: The name of the subcategory.
                  type: string
    GetCategoriesV2Response:
      title: Categories Response
      type: object
      description: Expected response structure for the get categories endpoint.
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          oneOf:
            - $ref: '#/components/schemas/CategoriesFlat'
            - $ref: '#/components/schemas/CategoriesMap'
        metadata:
          type: object
          required:
            - model
          properties:
            model:
              $ref: '#/components/schemas/CategorisationModel'
    CategoriesResponse:
      title: Categories Response
      type: object
      description: Expected response structure for the get categories endpoint.
      required:
        - operation_id
        - data
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          oneOf:
            - $ref: '#/components/schemas/CategoriesFlat'
            - $ref: '#/components/schemas/CategoriesMap'
    BasicTransaction:
      title: Basic Transaction Schema
      type: object
      description: Basic transaction schema
      required:
        - transaction_id
        - account_id
        - transaction_description
        - provider
        - date
        - amount
        - credit_debit_indicator
      properties:
        transaction_id:
          type: string
          description: A unique identifier for the transaction
        account_id:
          type: string
          description: A unique identifier for the Customer bank account
        transaction_description:
          type: string
          description: Any Customer defined input, e.g. a bank transfer reference
        provider:
          type: string
          description: The name of the relevant provider relevant to the source of the original transaction data
        date:
          type: string
          description: |
            The date of the transaction in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).

            Examples:
              - `2023-03-17T17:29:51Z`
              - `2023-03-17T17:29:51-08:00`
        amount:
          $ref: '#/components/schemas/LegacyBudAmount'
        credit_debit_indicator:
          type: string
          description: Indication as to whether the transaction was a credit or debit
          enum:
            - Credit
            - Debit
    ResultsMetadata:
      title: Results Metadata Object
      type: object
      description: Metadata associated with the response schema
      properties:
        results:
          type: number
          description: The number of results returned
    FutureTransactionV2:
      allOf:
        - type: object
          description: Expected transaction structure
          required:
            - transaction_id
            - account_id
            - transaction_description
            - date_time
            - amount
            - credit_debit_indicator
            - label
            - period
            - confidence
            - future_transactions
          properties:
            transaction_id:
              type: string
              description: Unique identifier for the transaction.
            account_id:
              type: string
              description: Unique identifier for the account.
            transaction_description:
              type: string
              description: Further details of the transaction. This is the transaction narrative, which is unstructured text.
            date_time:
              type: string
              description: The date of the transaction. In the following format RFC-3339 'Year-Month-Day Hour:Minute:Second'. E.g '2019-07-01T01:00:00'
            amount:
              $ref: '#/components/schemas/BudAmount'
            credit_debit_indicator:
              type: string
              description: Indication as to whether the transaction was a credit or debit. If credit then debtor is required. If debit then creditor required.
              enum:
                - credit
                - debit
            label:
              type: string
              description: Unique identifier for the regular transaction group
            period:
              type: string
              description: To describe the frequency of each transaction
              enum:
                - daily
                - weekly
                - biweekly
                - monthly
                - quarterly
                - six_monthly
                - annually
                - unknown
            confidence:
              type: string
              description: Probability score
            categories:
              type: object
              description: Categories of the original transaction
              properties:
                l1:
                  type: object
                  description: Level 1 Category
                  properties:
                    slug:
                      type: string
                      description: Unique human readable identifier of the category
                    confidence:
                      type: string
                      description: Degree of belief of correct assignment, expressed as a probability
                l2:
                  type: object
                  description: Level 2 Category
                  properties:
                    slug:
                      type: string
                      description: Unique human readable identifier of the category
                    confidence:
                      type: string
                      description: Degree of belief of correct assignment, expressed as a probability
            future_transactions:
              type: array
              items:
                type: object
                description: Dates and amounts of the predicted future occurrences
                required:
                  - date
                properties:
                  date:
                    type: string
                    description: The next date at which the future transaction will occur in the following format, 'Year-Month-Day'. E.g '2019-07-01'
                  amount:
                    type: object
                    $ref: '#/components/schemas/BudAmount'
    FutureTransactionV2Response:
      allOf:
        - type: object
          required:
            - operation_id
            - data
            - metadata
          properties:
            operation_id:
              $ref: '#/components/schemas/OperationId'
            data:
              type: array
              items:
                $ref: '#/components/schemas/FutureTransactionV2'
            metadata:
              type: object
              required:
                - results
                - months
              properties:
                results:
                  type: number
                  description: The number of different upcoming transactions that have been found
                months:
                  type: number
                  description: The number of months for which the upcoming transactions have been projected
                change_percentages:
                  type: array
                  description: A list of all of the percentage value changes that have been applied to different Level 2 categories
                  items:
                    type: object
                    required:
                      - l2
                      - value
                    properties:
                      l2:
                        type: string
                        description: The l2 category that a percentage change has been applied to
                        example: bills
                      value:
                        type: number
                        description: The percentage of change that has been applied to the given l2 category
                        example: 2
    BasicTransactionV2:
      title: Basic Transaction Schema
      type: object
      description: Basic transaction schema
      required:
        - transaction_id
        - account_id
        - transaction_description
        - provider
        - date
        - amount
        - credit_debit_indicator
      properties:
        transaction_id:
          type: string
          description: A unique identifier for the transaction
        account_id:
          type: string
          description: A unique identifier for the Customer bank account
        transaction_description:
          type: string
          description: A description of the transaction, similar to the transaction information in Open Banking. e.g. a bank transfer reference"
        provider:
          type: string
          description: The name of the relevant provider relevant to the source of the original transaction data
        date:
          type: string
          description: |
            The date of the transaction in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).

            Examples:
              - `2023-03-17T17:29:51Z`
              - `2023-03-17T17:29:51-08:00`
        amount:
          $ref: '#/components/schemas/BudAmount'
        credit_debit_indicator:
          type: string
          description: Indication as to whether the transaction was a credit or debit
          enum:
            - Credit
            - Debit
    Subscription:
      type: object
      required:
        - subscription_type
        - transactions
        - categories
        - period
      properties:
        subscription_type:
          type: string
          description: |
            Type of subscription identified. Potential values are subject to change and may be converted to enums at a future unspecified date.

            | Subscription type           | Description |
            | --------------------------- | ----------- |
            | `unknown`                   | Unknown subscription type |
            | `media_streaming`           | Digital media streaming subscriptions |
            | `newspapers_and_magazines`  | Print media subscriptions |
            | `food_and_drink`            | Grocery and specialty food/drink subscriptions |
            | `technology`                | Technology subscriptions, including software and hardware |
            | `fitness_and_gym`           | Health and fitness subscriptions |
            | `charitable_donations`      | Recurring donations to charity |
        period:
          type: string
          description: To describe the period between each transaction within a subscription. Potential values could be (but are not limited to) `monthly`, `quarterly` and `unknown`, and may be converted to enums at a future unspecified date.
        categories:
          type: object
          description: Categories of the subscription
          required:
            - l1
            - l2
          properties:
            l1:
              type: string
              description: Details on the Level One category associated with the subscription
            l2:
              type: string
              description: Details on the Level Two category associated with the subscription
        merchant:
          type: object
          description: Details surrounding the identified merchant of the transaction (this field will be omitted if a merchant is not detected)
          required:
            - id
            - name
            - logo
          properties:
            id:
              type: string
              description: A unique ID for the identified merchant.
            name:
              type: string
              description: The clean name of the identified merchant.
            logo:
              type: string
              description: The merchant's logo image URL location.
        transactions:
          type: array
          items:
            $ref: '#/components/schemas/BasicTransactionV2'
    GetSubscriptionsResponseV1:
      title: Subscription Products Response
      description: Subscription products and associated transactions for a customer
      type: object
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          type: string
          enum:
            - v1_subscriptions_get
        data:
          type: array
          title: Subscriptions Finder Response Data
          items:
            $ref: '#/components/schemas/Subscription'
        metadata:
          $ref: '#/components/schemas/TransactionsResultsMetadata'
    BudDateRangeMetadata:
      title: Metadata
      type: object
      required:
        - from
        - to
      properties:
        from:
          type: string
          description: |
            The date from when results were retrieved in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).
            This is either populated with the default value used when retrieving the results, or the user specified parameter.

            Examples:
              - `2023-01-17T17:29:51Z`
              - `2023-01-17T17:29:51-08:00`
        to:
          type: string
          description: |
            The date up to when results were retrieved in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).
            This is either populated with the default value used when retrieving the results, or the user specified parameter.

            Examples:
              - `2023-03-17T17:29:51Z`
              - `2023-03-17T17:29:51-08:00`
    GetProductsResponseV2:
      title: Retrieve Financial Products V2 Response Strucutre
      type: object
      required:
        - operation_id
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: array
          items:
            title: Financial_Product
            description: A Financial Product that a customer uses.
            type: object
            required:
              - type
              - merchant
              - amount
              - period
            properties:
              type:
                title: Financial_Product_Type
                description: |
                  A list of the types products and services identified for the given Financial Product. Potential values could be (but not limited to):
                    - `loan`
                    - `bnpl`
                    - `mortgage`
                    - `insurance`
                    - `credit_card`
                    - `private_pension`
                    - `savings_and_investment`
                type: array
                items:
                  type: string
              merchant:
                title: Financial_Product_Merchant
                description: Details of the merchant providing the Financial Product.
                type: object
                required:
                  - id
                  - name
                  - logo
                properties:
                  id:
                    type: string
                    description: A unique ID for the merchant.
                  name:
                    type: string
                    description: The merchant's name in a displayable format.
                  logo:
                    type: string
                    description: The merchant's logo image URL location.
              amount:
                $ref: '#/components/schemas/BudAmount'
              period:
                title: Transaction Period
                description: |
                  The period between each transaction for the given product. Possible values are:
                  - `daily` -  This product is charged once a day.
                  - `weekly` - This product is charged once a week.
                  - `biweekly` - This product is charged once every two weeks.
                  - `monthly` - This product is charged once a monthy.
                  - `quarterly` - This product is charged once a quater (every 3 months).
                  - `six_monthly` - product is charged every six months.
                  - `annually` - This product is charged once a year.
                  - `unknown` - It is unknown how frequently this product is charged.
                type: string
                enum:
                  - daily
                  - weekly
                  - biweekly
                  - monthly
                  - quarterly
                  - six_monthly
                  - annually
                  - unknown
        metadata:
          title: Metadata
          allOf:
            - $ref: '#/components/schemas/BudDateRangeMetadata'
            - type: object
              required:
                - results
              properties:
                results:
                  type: number
                  title: Results count
                  description: Number of products returned.
  parameters:
    IngestAccountsContentType:
      in: header
      name: Content-Type
      required: true
      schema:
        type: string
        enum:
          - application/plaid-accounts-v1+json
          - application/finicity-accounts-v1+json
          - application/bud-accounts+json
      description: Define the accounts' format for this request.
    IngestTransactionsContentType:
      in: header
      name: Content-Type
      required: true
      schema:
        type: string
        enum:
          - application/plaid-transactions-v1+json
          - application/finicity-transactions-v1+json
          - application/bud-transaction-v2+json
      description: Define the transactions' format for this request.
    V2IngestTransactionsContentType:
      in: header
      name: Content-Type
      required: true
      schema:
        type: string
        enum:
          - application/plaid-transactions-v1+json
          - application/finicity-transactions-v1+json
          - application/bud-transaction-v3+json
      description: Define the transactions' format for this request.
    ClientId:
      in: header
      name: X-Client-Id
      schema:
        type: string
      required: true
      description: The API Client Identifier (Service Application Identifier).
      example: 8711bbef-b357-4c2d-97ca-0d9df4206e9a
    TaskId:
      in: path
      name: task_id
      schema:
        type: string
        format: uuid
      required: true
      description: Bud Task identifier returned from an async task for the requested action
    PathCustomerID:
      in: path
      name: customer_id
      schema:
        type: string
        format: uuid
      required: true
      description: A unique identifier for a Customer, as registered on Bud's platform.
      example: c3339af9-2426-44d4-9c4d-ddb8fd281e23
    CustomerId:
      in: header
      name: X-Customer-Id
      schema:
        type: string
        format: uuid
      required: true
      description: A unique identifier for a Customer, as registered on Bud's platform.
      example: c3339af9-2426-44d4-9c4d-ddb8fd281e23
    CustomerSecret:
      in: header
      name: X-Customer-Secret
      schema:
        type: string
      required: false
      description: The Bud Customer secret used to encrypt customer data. This is required only if the customer secret is not already stored with Bud.
    QueryCurrencyUSD:
      in: query
      name: currency
      schema:
        type: string
      example: USD
      description: Use this parameter to filter the results returned on the `currency` associated with each result. Multiple values are accepted. If this parameter is not provided then results of any `currency` will be returned.
    QueryProvider:
      in: query
      name: provider
      schema:
        type: string
      example: BankOfBud
      description: Use this parameter to filter the results returned on the `provider` associated with each result. Multiple values are accepted. If this parameter is not provided then results of any `provider` will be returned.
    PathAccountID:
      in: path
      name: account_id
      schema:
        type: string
      required: true
      description: The account ID to retrieve data for.
    parameters-IngestAccountsContentType:
      in: header
      name: Content-Type
      required: true
      schema:
        type: string
        enum:
          - application/bud-accounts+json
      description: Define the transactions' format for this request.
    DisableSynchronous:
      in: header
      name: X-Disable-Synchronous
      description: |
        If provided as true, the task will **not** be processed synchronously.

        If false or the header is not included, the task **will** be processed synchronously.
      schema:
        type: string
        enum:
          - 'true'
          - 'false'
    CategoryTotalsQueryFromTimestamp:
      in: query
      name: from
      schema:
        type: string
      example: '2023-05-21T07:20:50.52Z'
      description: |
        The date from when results are to be retrieved in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).

        Defaults to 6 months ago.

        Examples:
          - `2023-01-17T17:29:51Z`
          - `2023-01-17T17:29:51-08:00`
    CategoryTotalsQueryToTimestamp:
      in: query
      name: to
      schema:
        type: string
      example: '2023-06-21T07:20:50.52Z'
      description: |
        The date up to when results are to be retrieved in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).

        Defaults to today.

        Examples:
          - `2023-03-17T17:29:51Z`
          - `2023-03-17T17:29:51-08:00`
    QueryBudCategory:
      in: query
      name: category
      schema:
        type: string
      example: shopping
      description: |
        Use this parameter to filter the results on l1 categories to include.
        Accepts multiple values, or values separated by comma.

        To specify l2 categories to include, use the following format: `l1.l2`.

        Examples:
          - `shopping` - Filters the result set to only include data where the l1 category is `shopping`.
          - `shopping.groceries` - Filters the result set to only include data where the l1 category is `shopping` and the l2 category is `groceries`.
    QueryCurrency:
      in: query
      name: currency
      schema:
        type: string
      example: GBP
      description: Use this parameter to filter the results returned on the `currency` associated with each result. Multiple values are accepted. If this parameter is not provided then results of any `currency` will be returned.
    MerchantsTotalsIncludeCategories:
      in: header
      name: X-Include-Categories
      schema:
        type: string
      example: shopping,entertainment
      description: Comma-separated list of transaction categories to include in the total
    MerchantsTotalsExcludeCategories:
      in: header
      name: X-Exclude-Categories
      schema:
        type: string
      example: bills,finances
      description: Comma-separated list of transaction categories to exclude from the total
    FutureTransactionsMonthsProjection:
      in: query
      name: months
      schema:
        type: integer
        default: 3
      required: false
      example: 6
      description: To specify how many months we return the prediction for, the default is 3 months.
    FutureTransactionsChangePercentage:
      in: query
      name: change_percentage[subcategory]
      schema:
        type: number
        default: 2
      required: false
      description: To set a percentage value used in the calculation of the forecasted amount for the future transactions categorised with specific transaction subcategory; for example `change_percentage[loans]=2.0`. This can be a positive or negative float number. To apply the same percentage to all transactions use the `subcategory=all`.
    From:
      in: header
      name: X-From
      schema:
        type: string
      example: '2022-01-29'
      description: Transaction from date
    To:
      in: header
      name: X-To
      schema:
        type: string
      example: '2022-03-29'
      description: Transaction to date
    QueryFromDate:
      in: query
      name: from
      schema:
        type: string
      example: '2019-02-29'
      description: 'Filter from this date (format: `YYYY-MM-DD`).'
    QueryToDate:
      in: query
      name: to
      schema:
        type: string
      example: '2019-02-29'
      description: 'Filter to this date (format: `YYYY-MM-DD`).'
x-tagGroups:
  - name: ''
    tags:
      - OAuth2
      - Authentication
  - name: ''
    tags:
      - Manage Customers
      - Customers API
  - name: ''
    tags:
      - Retrieve Financial Data
      - Financial Data API
  - name: ''
    tags:
      - Ingest Data
      - Enriched Transactions
      - Enrichment Totals
      - Enrichment Resources
      - Ingest & Enrich API
  - name: ''
    tags:
      - Regular Insights
      - Expenditure Insights
      - Insights API
