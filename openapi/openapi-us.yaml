openapi: 3.0.3
info:
  title: Transaction Enrichment Service - API Documentation
  version: 1.8.3
  description: |-
    # Overview

    ## Introduction
    Welcome to the API documentation for Bud's Transaction Enrichment Service. All endpoints follow standard RESTful principles and example request and response payload snippets are provided to get you up and running quickly and easily.

    To start interacting with Bud's platform, please sign up for access [here](http://thisisbud.com/en-us/sign-up). You will be provided with access to the Bud Developer Console where you can create the API Credentials required to obtain an OAuth2 access token.

    If you have any questions, please use our [Support Center](https://support.thisisbud.com/hc/en-us) or email us on [help@thisisbud.com](mailto:help@thisisbud.com).

    ## Service Breakdown

    | Service | Description |
    |--|--|
    | Customers API | Create and manage your customers on the Bud platform |
    | Ingest & Enrich API | Ingest & Enrich first party transactional data using Bud's core enrichment services, gain access to enrichment resource, and submit customer recategorisation corrections |
    | Insights API | Obtain a deeper understanding of your customers transactional data and use these endpoints to help build personal financial management tools and more |
    | Signal API | Contextual, relevant triggers and notifications that drive action from customers. |

    ## Environments and API Base URIs

    1.  Budâ€™s Sandbox Environment - [https://api-sandbox.thisisbud.com/](https://api-sandbox.thisisbud.com/)

    2.  Budâ€™s US Production Environment - [https://api-us.thisisbud.com](https://api-us.thisisbud.com)

    #### About

    Budâ€™s production environment is designed for use within your application when going live to real Customers. The environment is fully scalable, secure and facilitates the use of real Customer data.

    #### API Access

    To start interacting with Budâ€™s Production environment you must first sign up for a developer account. For further assistance please contact: help@thisisbud.com.

    ## Message formats

    Budâ€™s platform is made available through Application Programming Interface (API) endpoints, all of which adhere to [RESTful](https://restfulapi.net/) principles. Standard HTTP verbs and status codes are used for requests and response statuses. Request and response payloads are [JSON](http://www.json.org/) encoded data formatted. Communication with the Bud Platform is handled over HTTPS protocol only.

    | Data Type | Standard |
    | -- | -- |
    | Strings encoding | `UTF-8` |
    | Datetime | `ISO 8601` |
    | Currency codes | `ISO 4217` |

    ### HTTP Verbs

    | Verb | Usage Context |
    | -- | -- |
    | GET | Used to retrieve the resource representation or metadata |
    | POST | Used to create a new resource on the server |
    | PUT | Used to update the resource state |
    | PATCH | Used to partially update a resource |
    | DELETE | Used to delete the resource|

    ### HTTP Response Codes

    | Code Class |  Description |
    | -- | -- |
    | `1XX` | Informational - provisional response from the server |
    | `2XX` | Success - the request has been processed successfully by the server |
    | `4XX` | Client Error - the request has not been processed due to client-side issue with the request |
    | `5XX` | Server Error - the request has not been processed due to server-side issue |

    ## Requests Custom Headers

    Some endpoints will require the presence of custom headers in the HTTP Request to be properly processed by Bud Platform services.

    | Header Name | Description|
    | ----------- | ---------------------------- |
    | `X-Client-Id` | API Credentials `client_id` value required for request authorisation purposes |
    | `X-Customer-Id` | Customer Identifier value necessary for establishing the Customer context of the data to be retrieved or processed |
    | `X-Account-Id` | Customer Account Identifier value necessary for establishing the context to retrieve specific customerâ€™s account data.|
    | `X-From` | Start date from when the transactions data should be returned |
    | `X-To` | End date till when the transactions data should be returned |

    ## Response Styling

    ### Response Custom Headers

    | Header Name |  Description |
    | -- | -- |
    | `X-Request-Id` | Bud request identifier for troubleshooting purposes |

    ## Success Responses

    The description and the listed status codes below indicate that an action requested by the client was successfully processed.

    The successful responses will have status codes in the `200-299` range and have relevant response content where required. However, `204 No Content` and `205 Reset Content` status codes won't contain a response content.

    ### Response Style Properties
    | Field        | Description                                                          | Properties                                    |
    | ------------ | -------------------------------------------------------------------- | --------------------------------------------- |
    | operation_id | A descriptive enough string that is linked to the operation/feature. | A `required` lower case snake case `string`   |
    | data         | A data-set that is relevant to the endpoint.                         | An `optional` single/multidimensional `array` |
    | metadata     | Contains endpoint specific additional information.                   | An `optional` JSON `object`                   |

    #### Examples

    ##### 200 OK

    After getting an existing resource with `GET /resources/{id}`.

    ```json
    {
      "operation_id": "resources_get",
      "data": {
        "id": "111-AAA-222-BBB",
        "name": "Bud",
        "email": "bud@thisisbud.com",
        "created_at": "2019-01-01T15:53:00+05:00"
      }
    }
    ```

    ##### 201 Created

    After creating a new resource with `POST /resources`.

    ```json
    {
      "operation_id": "resources_post",
      "data": {
        "id": "111-AAA-222-BBB"
      }
    }
    ```
    ## Error Responses

    ### Response Style Properties

    | Field        | Description                                                             | Properties                                    |
    | ------------ | ----------------------------------------------------------------------- | --------------------------------------------- |
    | operation_id | A descriptive enough string that is linked to the operation/feature.    | A `required` snake case `string`              |
    | code_id      | A descriptive enough string that is linked to the reason for the error. | A `required` snake case `string`              |
    | message      | An actual user friendly error message.                                  | A `required` `string`                         |
    | metadata     | Contains endpoint specific additional information.                      | An `optional` JSON `object`                   |
    | errors       | A data-set that is relevant to the error.                               | An `optional` JSON `object`                   |

    ### Client Error Responses

    The description and the listed status codes below indicate that the action requested by the client was not successfully processed due to apparent client errors in the request.

    The client errors will have status codes in the 400-499 range and have relevant response content where required.

    #### Generic Client Error Responses
    | Error Code | Cause | Response Body |
    |--------------|---------|-----------|
    |401|Unauthorized|`{"operation_id": "unknown","code_id":"unknown","message": "Unauthorised request","errors": {}}` |
    |404|Not Found|`{"operation_id": "unknown","code_id":"unknown","message": "Route or resource not found","errors": {}}` |
    |405|Method Not Allowed|`{"operation_id": "unknown","code_id":"unknown","message": "Method not allowed","errors": {}}` |

    #### List of Code Ids

    | Name               | Description                                                           |
    | ------------------ | --------------------------------------------------------------------- |
    | failed_validation  | Occurs when a request validation process fails.                       |
    | invalid_login      | Occurs when insufficient login credentials were provided.             |
    | resource_not_found | Occurs when a requested record or a feature was not found.            |
    | unique_constraint  | Occurs when a request tries to create an existing record in database. |

    #### Examples

    ##### 400 Bad Request

    Returned after a failed attempt to create a new resource by passing invalid data to POST /resources.

    After trying to create a new resources by passing invalid data to `POST /resources`.

    ```json
    {
      "operation_id": "resources_post",
      "code_id": "failed_validation",
      "message": "Invalid request payload.",
      "metadata": {},
      "errors": {
        "name": "This value is required.",
        "email": "This value is invalid."
      }
    }
    ```
    ### Server Error Responses

    The server errors will have status codes in the 500-599 range. The server errors will look very much like the "Client Errors" but will contain bare minimum information attached to them.

    #### Generic Server Error Responses
    | Error Code | Cause | Response Body |
    |--------------|---------|-----------|
    |`500`| Internal Server Error| `{"message": "An error occurred while processing your request"}`|
    |`503`| Service Unavailable| `{"message": "Service unavailable"}` |

    # Updates & Versioning
    Updates to Bud's API documentation are made frequently. The current version of the documentation can be clearly viewed at the very top of this page.

    ## Backward Compatibility

    Bud aims to make integration as seamless as possible for its clients and therefore takes all possible steps to prevent backward-compatibility breaks. In the scenario where a backward-compatibility break is unavoidable, Bud creates a new endpoint, either: (a) by bumping the version within the endpoint URL; or (b) in some circumstances renaming the URL entirely. The previous endpoint may then become deprecated, and support for the endpoint will cease after a period of three months. Clients with access to any of Budâ€™s API services will be notified of deprecations to any endpoints and provided with ample time in which to make any necessary changes.

    Fields within response or request schemas may also become deprecated. Along with deprecated endpoints, these breaking changes will be clearly highlighted within the below changelog.

    ## Deprecations

    Bud will continue to support deprecations for a period of **three months** after they are first announced.

    | Date of Announcement | Deprecation Details                                                                                               |
    |:---------------------|:------------------------------------------------------------------------------------------------------------------|
    | 05/09/2022           | Deprecated **Retrieve Merchant Totals V1** in favour of new **Retrieve Merchant Totals V2** endpoint              |
    | 10/02/2023           | Deprecated **Retrieve Enriched Transactions V1** in favour of new **Retrieve Enriched Transactions V2** endpoint  |
    | 15/01/2024           | Deprecated **Remove Customer** in favour of **Remove Customer V3**                                                |
    | 25/01/2024           | Deprecated **Retrieve Ingestion Task Status V2** in favour of **Retrieve Ingestion Task Status V3**               |
    | 21/05/2024           | Deprecated **Initiate Refresh** in favour of **Initiate Refresh V2** (Six month deprecation Notice)               |
    | 21/05/2024           | Deprecated **Retrieve Refresh Status** in favour of **Retrieve Refresh Status V2** (Six month deprecation Notice) |

    ## Changelog

    This changelog represents a list of all changes that have been made to Budâ€™s API documentation. This includes both backward-compatible and backward-incompatible changes.

    **Version 1.9.2: 21/06/2024**
    > - Added __website__ field to merchant field in enrichments field in  __Retrieve Transactions V2__.
    > - Added __website__ field to processor field in enrichments field in  __Retrieve Transactions V2__.

    **Version 1.9.1: 19/06/2024**
    > - Added a new __Correct Financial Data__ section within __FINANCIAL DATA API__.
    > - Relocated __Correct Transaction Categories V2__ endpoint to __Correct Financial Data__ from __Manage Financial Data__.
    > - Added new  __Similar Transactions__ endpoint under __Correct Financial Data__.
    > - Added new  __Similar Transactions Including Merchants__ endpoint under __Correct Financial Data__.

    **Version 1.9.0: 21/05/2024**
    > - Added __Initiate Refresh V2__ endpoint.
    > - Added __Retrieve Refresh Status V2__ endpoint.
    > - Deprecated __Initiate Refresh__ endpoint in favour of __Initiate Refresh V2__ endpoint (Six month deprecation period).
    > - Deprecated __Retrieve Refresh Status__ endpoint in favour of __Retrieve Refresh Status V2__ endpoint (Six month deprecation period).


    **Version 1.8.3: 17/05/2024**:
    >- Add optional `X-Customer-Ip-Address` header to __Initiate Refresh__.

    **Version 1.8.2: 25/10/2024**:
    > - Deprecated __Retrieve Ingestion Task Status V2__ endpoint in favour of __Retrieve Ingestion Task Status V3__ endpoint.

    **Version 1.8.1: 24/01/2024**
    > - **Retrieve Category Totals**

    **Version 1.7.6: 15/01/2024**
    > - Deprecate __Remove Customer__ endpoint in favour of the __Remove Customer V3__ endpoint.
    > - Added __Remove Customer V3__ and __Retrieve Remove Customer V3__ Status endpoints.

    **Version 1.7.5: 07/12/2023**
    > - Updated __Create Customer V3__ endpoint to include `created_at` and a new 200 response for existing customers.

    **Version 1.7.4: 06/12/2023**
    > - Fixed __Retrieve Future Transactions V2__ change\_percentage query parameter example.

    **Version 1.7.3: 05/12/2023**
    > - Updated __Retrieve Accounts V2__ and __Retrieve Account By ID V2__ endpoints with US currency example and updated guide reference.

    **Version 1.7.1: 05/12/2023**
    > - Included documentation for the __Retrieve Accounts V2__ and __Retrieve Account By ID V2__ endpoints to retrieve customer account data with US examples.

    **Version 1.7.0: 01/11/2023**
    > - Added the __Goals API__.

    **Version 1.6.8: 20/10/2023**
    > - Added the  `idempotent_identifier` attribute to the __Create Customer V3__ endpoint.

    **Version 1.6.7: 01/09/2023**
    > - Fixed typo in __Ingest Transaction V2__ schema

    **Version 1.6.6: 02/08/2023**
    > - Fixed error in __Category Totals V2__ path
    > - Fixed error in __Category Totals V2__ include L2 attribute

    **Version 1.6.5: 28/07/2023**
    > - Added documentation for __Category Totals V2__ endpoints

    **Version 1.6.2: 18/07/2023**
    > - Added link to guide to __Create Customers V3__ and __Create Customers V3 (Batch)__.

    **Version 1.6.1: 16/05/2023**
    > - Added documentation for __Retrieve Auth Tokens__ endpoint.

    **Version 1.6.0: 11/05/2023**
    > - Adds two new endpoints: __Create Customers V3__ and __Create Customers V3 (Batch)__.
    > - Introduces the concept of Hosted Customers, which makes Customer Secrets optional on all endpoints which previously required them.

    **Version 1.5.2: 27/04/2023**
    > - Deprecated __Retrieve Financial Products__.
    > - Corrected sample Financial Products in __Retrieve Financial Products V2__.

    **Version 1.5.1: 25/04/2023**
    > - Small fixes in __Enrichment Resources__ endpoints.

    **Version 1.5.0: 25/04/2023**
    > - Added new __Retrieve Categories V2__ endpoint.
    > - Added new __Retrieve Available Categorisation Models V2__ endpoint.
    > - Deprecated __Retrieve Categories__.
    > - Added `models.categorisation` field to _Customer Context_ models.

    **Version 1.4.4: 20/04/2023**
    > - Updated __Retrieve Category Totals__ X-From and X-To parameter descriptions and endpoint description.
    > - Updated __Retrieve Merchant Totals V2__ X-From and X-To parameter descriptions.
    > - Updated __Retrieve Benefits Totals__ X-From and X-To parameter descriptions.
    > - Removed __Retrieve Merchant Totals V1__ following deprecation period.

    **Version 1.4.3: 19/04/2023**
    > - Added `format` query parameter to __Retrieve Categories__.

    **Version 1.4.2: 28/03/2023**
    > - Improve examples in **Ingest Data**

    **Version 1.4.1: 23/03/2023**
    > - Improve examples in **Insights API**
    > - Reorganise **Ingest & Enrich API** and the **Insights API**
    > - Removed **Create Customers V2** to simplify the **Customers API** (we are currently working on our Customers API and a new & improved Create Customers endpoint will be added soon)

    **Version 1.4.0: 21/03/2023**
    > - Clean up some old endpoints to provide a simpler set of currently supported endpoints.
    > - Added new __ Get Subscriptions V1__ endpoint.

    **Version 1.3.4: 16/03/2023**
    > - Update amount descriptions

    **Version 1.3.3: 09/03/2023**
    The changes in this release carry no change to URLs, this is purely the name of the endpoint.
    > - Renamed __List Categories__ to __Retrieve Categories__

    **Version 1.3.2 08/03/2023**
    > - Added new __Get Financial Products V2__ endpoint.

    **Version 1.3.0: 10/02/2023**
    > - Added new **Retrieve Enriched Transactions V2** endpoint
    > - Deprecated **Retrieve Enriched Transactions V1** in favour of new **Retrieve Enriched Transactions V2** endpoint

    **Version 1.2.0: 08/09/2022**
    > - Deprecated __Retrieve Merchant Totals V1__ in favour of the new __Retrieve Merchant Totals V2__ endpoint.

    # Authentication

    <SecurityDefinitions />
  contact:
    name: Bud Support
    email: help@thisisbud.com
    url: https://www.thisisbud.com/en-us/
  x-logo:
    url: data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATAAAABuCAQAAAAKAYdLAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAB3RJTUUH4wQDDggcbXcx7wAABeJJREFUeNrt3W2IFVUcx/HvXRW1VdQedy1bZVfoYX0osVQyfSGElKbRA5oFIaIlhAkWUYm6gvqqDMHMoBeKlhayCCZC2AMRPay7aJrSZmauZhQqaj7t7u1Fi965987s7D1n7pk7/j73zX2Y85//mXt2Zu45Z2ZBREREREREREREREREREREREREREREREREREREREREREREREREROIiZSFGH+YxgsOs5U/X1bFiPDPpQT3bu1DmcaZyg+vErWpjD+s47zoN6Mte0qRJc4Iq18lYMJv2jvosD11mRUeJpD32UO7664BFGQl94DoZY704fbU2rQwKVWYwbc6bQlSPBaYbtMz4K7nP53lpGkK/q8+7MTxUmeEWtmJcGX+j5psmM0I3l9vCirKAV36OuE46QsbfaHL/9opnL9tcpxBf3V0nkAgzWMRj9HadhrH+3Gk7pBqYDZdY3oXfnHE2gc1U2gyoQ6Rk+pKZdgOqgYnXF7TYDGe3gcWgW85QH9cJxMAVm8HsNrBqhhV1U9g33XUCzo1gsM1wdhtYio8ZWsytYdksFrpOwbGhbLYb0PavyLs5wA+c9v28lRa+Zzt/+y5RwwKqaOCdgCjZRvEit/A1a7jou8xwJjOMAb7D+ylqqCmw1imeZ0oCBrv7Mzp+/QofFTDCdZG13Jw3Wi1nOpbZT9+QGUziUkeZ3T49z+P4pqCRuCkhM1jjfMwwqsdG182rsAaWJs0JxuWJ9knGEq+EzODHjDLTcj5NsbjgwehwDazm6vyL5D2MG5i7booKdjE25917M57XhoxUG1hmJUsjrmWtlVl18ZQ2DeCyH6ycT7kpIJ+wuQWVeZJXI69HcpsXHDQN4LajtZIlkcbvzWqn9St1R3nPNIT93wzt/MSZPO+nqKA65699Nos5FdHmgZkMzHnvIj9zLm9+Q7jd0nqP8VtkdSqWNppYxT+u08g+yW8OnKRXw4ac08hnPUscyvjkw5AZXM4os9jzyY6sdZ3h5YC++jLm0lrASf50T5krzEn0QbOLbB8in2FvwKfNPJczCXd0hLV7wPPqL8bybt691//aWWfhkPo2681PjZPDbgP7lYZOl1nNJs9rW4elXD2zfkK8wIFOy2w1XuuWyOpTkuw2sHOhlqrzvIqu59gbuYEdIcqcjSyb65SLX5EHOepgrbuKtJ6nHNQtxtx0U5xM8DoXMkez7K5xM7Tp4iS4WOvszvss5feSP9Fvo5EVnDDfHGJfpd157Y48xFRGmfaEaWcu/qqYZxpCDcxcqR8Mg9xlGkANzNz+BDcx4zEJNTBzv5gPCSeXTvJtmM+3PJqIKdNj6GE3pJsG5mIwOMp1ptnABgd1sq+G7ebnXZncHCKjG3+M1zpLTzMz7AZ00cBG5pmlFb3JmkQTSpPd21HZbWD9Qy21zPPK/zricNH6+B7mvZFreTpEtAFWt0dpsnoWZreBVTG+kyVS1GVN4/vDd9lJVIRY5yzfPdPlrPHHdTwYItr1bkLcTia8M1qPM9F3yRRjcuaYprNmHxzyfNbQyQlnGTM47ynhndFan7WuCywLODz35I2sC9DCXheZHBNpsXvZmu1fkZXs5rjPnPzb8hyAzrIzINr9HOBIwNXat+ZcleS1hame1714izc55jNvbVDBtz7pyWuJuI15P/tnx1F0UwzsQpprO5nil2KIQSZbqcspnwp57+iu2MQT1mMmhNue/MMR3xfwMi8VYRhnmJqXP/MG1lZwyVNMy9l/FR4tf/mdvB553Uz2sXFn+n1YaGCNBZZr5mH25by7xzCb3PKrmM+lgmK1BV4hdc0+2g2zjq8m1wlAOY1dvqXGKep87oZYzUmDW3Vs8+myuIf6Am6AsiT0Nljp/CYl0Twaze9ZaaN3u5w5jAy5L2ylhe/4nAu+S1Qwl+oCsrjCV2wM2KXfwSPUcmPIGv9LPZ91Ye1TEnEb80ztNLE+Dv8MS0RERERERERERERERERERERERERERERERERERERERERERERERERs+Q/rhi5WauEgfQAAAABJRU5ErkJggg==
servers:
  - url: https://api-sandbox-us.thisisbud.com
tags:
  - name: Authentication
    description: |
      Endpoints related to gaining access to the Bud platform via OAuth2 authentication.
    x-displayName: Authentication
    x-traitTag: true
  - name: OAuth2
    x-displayName: OAuth2
    description: |
      Retrieve and manage access and refresh tokens to authenticate to the Bud platform via OAuth2 protocol.
  - name: Customers API
    description: |

      The Customers API allows for the manipulation of a client's "Customers" as registered on the Bud platform. The API is built around resource-oriented URLs, returns JSON-encoded responses, uses standard HTTP response codes and authentication.
    x-displayName: Customers API
    x-traitTag: true
  - name: Manage Customers
    x-displayName: Manage Customers
    description: |
      Manage the number of customers registered onto the Bud platform.
  - name: Connect API
    description: |
      These endpoints handle the connections to banking providers and the ingestion of first party transaction data. Bud manages all of the connections to each of the individual providers and enables access to all of the providers via a single set of API endpoints.

      Bud currently supports three methods of connecting your customers data to the Bud platform:

        1. You can use the [__Bud Connect__](#operation/v2_ob_authorisation_gateway_url_post) endpoint which returns a link to Budâ€™s pre-built customer connection journey that can be configured to your brand.

        2. If you have your own license you can choose to host the customer connection journey yourself, using [Bud's APIs](#operation/open_banking_authorisation_url_post) to create the connection. __If you are an agent of Bud but feel that your application could benefit from a more native feel please talk to your Bud Account Manager or email help@thisisbud.com for further details.__

        3. If you already have transactional data that youâ€™re looking to enrich, you can use Budâ€™s [Ingest Endpoints](#tag/Ingest-Data) to push your data onto the Bud platform without needing your customers to connect their accounts 
        
      Note: a number of the calls within this service are asynchronous, and as such, follow a pattern of sending a request and responding with a task ID. This task ID can then be tracked, allowing for a more efficient, cross network implementation.
    x-displayName: Connect API
    x-traitTag: true
  - name: Create a Connection
    x-displayName: Create a Connection
    description: |
      Create a new connection to a Banking provider by using either: (i) Bud's configurable frontend UI (__Bud Connect__), built to maximise conversion; or (ii) Bud's individual API endpoints to help you build your own connect flow.
  - name: Manage a Connection
    x-displayName: Manage a Connection
    description: |
      Different endpoints that allow to to manage an existing customer connection. This includes the ability to:
        (i) Refresh the data associated with a given connection, pulling in the latest account 
            information into the Bud platform;
        (ii) Renew an existing consent  by-passing the need to go through Strong Customer 
            Authentication (SCA) with their bank;
        (iii) Revoke a consent, removing the ability for Bud to fetch any further data associated
            with that consent.
  - name: Ingest First Party Data
    x-displayName: Ingest First Party Data
    description: |
      Initiate the asynchronous process of pushing a customer's account information (i.e. first party data) onto the Bud platform. These asynchronous requests create a task to store the given accounts or transactions against the specified customers. The Task ID returned by this request can be used to verify the current status of the process.
  - name: Financial Data API
    description: |
      These endpoints handle the aggregation and retrieval of financial data. They are designed to be generic across
      a range of ingestion sources and regions.
    x-displayName: Financial Data API
    x-traitTag: true
  - name: Retrieve Financial Data
    x-displayName: Retrieve Financial Data
    description: |
      Retrieve a customer's financial data from a range of sources.
  - name: Correct Financial Data
    x-displayName: Correct Financial Data
    description: |
      Manipulate Transactions held on the Bud platform by finding similar transactions and submitting corrections.
  - name: Enrichment API
    description: |
      Ingest and enrich your customers transactions using Bud's core enrichment services.
    x-displayName: Enrichment API
    x-traitTag: true
  - name: Enrichment Totals
    x-displayName: Enrichment Totals
    description: |
      Breakdown your customer's income and expenditure based on Bud's enrichments to help orientate their financial world.
  - name: Enrichment Resources
    x-displayName: Enrichment Resources
    description: |
      Retrieve information and different resources related to Bud's enrichment services.
  - name: Smart Finders API
    description: |
      Get insights about spending, identify key transactions and create your own custom transaction labels to dig deeper into the data and build new services for customers.
    x-displayName: Smart Finders API
    x-traitTag: true
  - name: Regular Payments Finder
    x-displayName: Regular Payments Finder
    description: |
      Find information relating to any regularity found across certain groups of transactions within your customer's accounts.
  - name: Income Finder
    x-displayName: Income Finder
    description: |
      Find information regarding your customer's income.
  - name: Loan Finder
    x-displayName: Loan Finder
    description: |
      Find information regarding your customer's loans.
  - name: Debt Collection Finder
    x-displayName: Debt Collection Finder
    description: |
      Find information regarding your customer's debts.
  - name: Product Finder
    x-displayName: Product Finder
    description: |
      Find information regarding your customer's financial products.
  - name: Subscription Finder
    x-displayName: Subscription Finder
    description: |
      Find information regarding your customer's subscriptions.
  - name: Goals API
    description: |
      Endpoints related to managing savings goals and spending budgets.
    x-displayName: Goals API
    x-traitTag: true
  - name: Savings Goals
    x-displayName: Savings Goals
    description: Savings goals management API.
  - name: Spending Budgets
    x-displayName: Spending Budgets
    description: Spending budgets management API.
  - name: Insights API
    description: |
      These endpoints handle the retrieval of actionable insights for a customer. An actionable insight is an indicator of
      the state of a customer's financial situation that could induce a change in behaviour.
    x-displayName: Insights API
    x-traitTag: true
  - name: Retrieve Actionable Insights
    x-displayName: Retrieve Actionable Insights
    description: |
      Retrieve a customer's actionable insights generated from their financial data.
  - name: Custom Insights
    x-displayName: Custom Insights
    description: |
      Understand and target messaging to your customers more effectively by defining your own custom insights.
  - name: Characteristics API
    description: |

      The Characteristics API provides endpoints for retrieving specific characteristics that apply to an individual
      Customer based on their financial data. The currently supported characteristics are:

      | Characteristic | Description |
      |:---------------|:---------------------------------------------------------------------------------------------|
      | `credit_card`  | Customer has made credit card repayments                                                     |
      | `loan`         | Customer has made loan repayments (excluding credit cards)                                   |
      | `overdraft`    | Customer has paid overdraft fees                                                             |
      | `saver`        | Customer has savings transactions                                                            |

      New characteristics will be released and added to this list without a breaking change notice.
    x-displayName: Characteristics API
    x-traitTag: true
  - name: Retrieve Customer Characteristics
    x-displayName: Retrieve Customer Characteristics
    description: |
      Retrieve Characteristics associated with an individual Customer based on their financial data.
paths:
  /v1/oauth/token:
    post:
      tags:
        - OAuth2
      summary: OAuth2
      description: |
        This endpoint is used to create access and refresh tokens. 

        The access token is used as a bearer token to authenticate requests to Bud endpoints; 
        the refresh token is used to generate a new access token without the need to supply your client credentials again.

        The access token usually expires after the `expires_in` time (in seconds) has elapsed. 
        However this is not guaranteed, so it is recomended to integrate such as to handle the `401` response code and refresh the token when it this response code is seen.

        Refresh tokens typically expire after 24 hours, but this is not guaranteed.

        > **ðŸš§** Recognise the sensitive nature of access tokens. Implement appropriate security measures to prevent unauthorized access.

        Related Guides:
          - https://docs.thisisbud.com/docs/authentication
      operationId: oauth_token_post
      security:
        - Basic: []
      parameters:
        - in: header
          name: Content-Type
          required: true
          schema:
            type: string
            enum:
              - application/x-www-form-urlencoded
        - $ref: '#/components/parameters/ClientId'
        - in: header
          name: authorization
          schema:
            type: string
            description: |
              The `authorization` header is used to send the client credentials in the form of a base64 encoded string. 
              The format of the string is `client_id:client_secret`.

              This is only required when retrieving an auth token and not whilst refreshing an auth token.

              Example: `Basic Y2xpZW50X2lkOmNsaWVudF9zZWNyZXQ=`
            example: Basic Y2xpZW50X2lkOmNsaWVudF9zZWNyZXQ=
      requestBody:
        required: true
        content:
          application/x-www-form-urlencoded:
            schema:
              type: object
              oneOf:
                - title: When Retrieving an Auth Token
                  required:
                    - grant_type
                  properties:
                    grant_type:
                      type: string
                      enum:
                        - client_credentials
                - title: When Refreshing an Auth Token
                  required:
                    - grant_type
                    - refresh_token
                  properties:
                    grant_type:
                      type: string
                      enum:
                        - refresh_token
                    refresh_token:
                      type: string
                      description: The `refresh_token` received when initially retieving an auth token.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RetrieveAuthTokenResponse'
              example:
                operation_id: oauth_token_create
                data:
                  access_token: RJptkI22inJMLGmRvdUWUj02WA6cuV0P2cPAF1OkG5F2FAh41hkbGw26v419M7me4qCfsu4pZwfjxB6wOO42dJeTnTAv41C4CnR0Mkism1fwbg6trIo5lNixX1roWD4gZkG8W1Mp4cjaPWe41sc9S61Jmt6TvMgXJ3VRxqnSR9UVlaF7oeJPLwi7sHHcKuaiLrNflwEDE2aZNDVHqmNeiDFrY8GQAzNCQLevqkMKGDsnRtoD2EqX8YKu6G2z3Vr
                  token_type: Bearer
                  expires_in: 3600
                  refresh_token: XO9haFEajZaEqYY8wJUkdsVWG2b3r6jY1aXdsbhNtgmiz4K6e78hZt73kTQjuO57sVo8T6xHAjxk6Day0utTpHnXzUrKy7GSESsmxJoKzcCZeXdJCQLQvyXLSYMlMf3OZVpwcwJp7fnpCARdhmP0oLocSEnTSh60FBO2HQCnseFT6DgtSTsODbx8HC230epKAbkyOeGkC2gWQctXAFb1dNa8r1W8RzPWGe5a6wkAUH2rQiv7RjIA7Eoy663Sf9Q
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              examples:
                Basic Auth Credentials Incorrect:
                  value:
                    operation_id: unknown
                    code_id: unknown
                    message: Unauthorised request
                Basic Auth Missing:
                  value:
                    operation_id: oauth_token_create
                    code_id: failed_validation
                    message: could not extract basic auth headers
                Grant Type Missing/Incorrect or Content Type missing:
                  value:
                    operation_id: oauth_token_create
                    code_id: failed_validation
                    message: could not extract basic auth headers
                    errors:
                      grant_type: grant_type must be one of [client_credentials refresh_token]
        '401':
          description: Unauthorised
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: oauth_token_create
                code_id: unauthorised
                message: Unauthorised.
        '403':
          description: Forbidden
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: oauth_token_create
                code_id: forbidden
                message: Forbidden.
        '500':
          description: Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: 'An error occurred while processing your request. Get in touch with us and provide us your request id: 7ef63242-ba6d-4661-8014-f9eaa9cb2ad8'
  /platform/v3/customers:
    post:
      security:
        - OAuth2: []
      tags:
        - Manage Customers
      summary: Create Customer V3
      description: |
        This endpoint is used to create a new Customer in order for them to consume the Bud services.

        When we refer to a Customer, we're talking about the end-user of yours and Bud's technology. Customer entities in Bud have unique identifiers and this is used to store the customer data on the Bud platform.

        For more information on how to manage your Bud Customers, please, refer to the following [guide](https://docs-us.thisisbud.com/docs/setup-customers)

        > ðŸ“˜ Note:
        >
        > By specifying a `client_metadata.idempotent_identifier` value, Bud will associate that identifier to a Customer, 
        > and in future Bud will return the same Customer entity everytime we receive the same `idempotent_identifier` value.
        >
        > This allows you to associate your internal resource to the concept of the Bud Customer.
        >
        > On subsequent requests for a customer with a given `idempotent_identifier`, Bud will return a 200 status code instead of a 201.
        >
        > Please, make sure the `idempotent_identifier` is immutable on your application.
        > 
        > For more information on Customers in the Bud platform, please refer to our handy [guide](https://docs-us.thisisbud.com/docs/setup-customers).
      operationId: platform_v3_customers_post
      parameters:
        - $ref: '#/components/parameters/ClientId'
      requestBody:
        required: false
        content:
          application/json:
            schema:
              properties:
                customer_context:
                  $ref: '#/components/schemas/CustomerContextRequest'
                client_metadata:
                  $ref: '#/components/schemas/ClientMetadata'
            example:
              customer_context:
                type: personal
                region: US
                locale: en-US
                models:
                  categorisation: us-v1
              client_metadata:
                idempotent_identifier: your_internal_id
      responses:
        '200':
          description: Returns the existing customer matching the idempotent identifier.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomerCreateV3Response'
              example:
                operation_id: platform_v3_customers_post
                data:
                  customer_id: 360e5821-4f18-4077-83f4-c9a7c1768bea
                  customer_context:
                    type: personal
                    region: US
                    locale: en-US
                    host_secret: true
                    models:
                      categorisation: us-v1
                  client_metadata:
                    idempotent_identifier: your_internal_id
                metadata:
                  created_at: '2023-01-01T07:02:11Z'
        '201':
          description: The resource has been successfully created.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomerCreateV3Response'
              example:
                operation_id: platform_v3_customers_post
                data:
                  customer_id: 360e5821-4f18-4077-83f4-c9a7c1768bea
                  customer_context:
                    type: personal
                    region: US
                    locale: en-US
                    host_secret: true
                    models:
                      categorisation: us-v1
                  client_metadata:
                    idempotent_identifier: your_internal_id
                metadata:
                  created_at: '2023-01-01T07:02:11Z'
        '400':
          description: The request contains an invalid payload.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: platform_v3_customers_post
                code_id: failed_validation
                message: invalid body
                errors:
                  body:
                    - invalid character 'a' looking for beginning of object key string
        '401':
          description: An unauthenticated request was received.
        '405':
          description: The request uses an unexpected HTTP method.
        5XX:
          description: An unexpected error occurred on the server side.
    get:
      security:
        - OAuth2: []
      tags:
        - Manage Customers
      summary: Retrieve Customers V3
      description: |
        This endpoint is used to list customers associated with the current project.

        Customers are listed ordered by their ID. Deleted customers will not be included in the list.

        The list of customers can be filtered by creation date with the `date_from` and `date_to` query parameters, which expect dates in the RFC3339 format.

        If more results pages are available, the response metadata object will contain a  `next_page_token` field which can be used to fetch the next page of results. The token should be provided in the `page_token` query parameter for subsequent requests.

        For more information on how to manage your Bud Customers, please, refer to the following [guide](https://docs.thisisbud.com/docs/setup-customers)
      operationId: platform_v3_customers_get
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - in: query
          name: date_from
          schema:
            type: string
          example: '2022-05-28T00:00:00Z'
          description: |
            Date (RFC3339) to filter customers created on or after which. To maintain backwards compatibility, dates in the format (YYYY-MM-DD) can also be used and will be assumed to be UTC.
        - in: query
          name: date_to
          schema:
            type: string
          example: '2022-05-29T00:00:00Z'
          description: |
            Date (RFC3339) to filter customers created on or before which. To maintain backwards compatibility, dates in the format (YYYY-MM-DD) can also be used and will be assumed to be UTC. Uses the current date by default.
        - name: page_size
          in: query
          schema:
            type: integer
            minimum: 1
            maximum: 1000
          description: Maximum number of results to be returned. Defaults to 200, maximum is 1000.
        - name: page_token
          in: query
          schema:
            type: string
          description: |
            The token required to fetch a specific page of results. Provided by the next_page_token field in the previous request.
      responses:
        '200':
          description: Returns a list of customers.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomersGetAllV3Response'
              example:
                operation_id: platform_v3_customers_get
                data:
                  - customer_id: acbff0b9-299c-4065-b933-4a991e17da6d
                    idempotent_identifier: acbff0b9-299c-4065-b933-4a991e17da6d
                    created_at: 2019-02-27T06:11:57+0000
                  - customer_id: ebb50ae5-8c5c-4205-9b61-e93ce84eb467
                    created_at: 2019-02-27T06:11:57+0000
                metadata:
                  next_page_token: eyJwYWdlX3NpemUiOjIsInBhZ2UiOjF9
                  results: 2
        '400':
          description: The request contains an invalid parameter.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: platform_v3_customers_get_all
                code_id: bad_request
                message: invalid page token
                errors:
                  page_token:
                    - Failed to parse page token
        '401':
          description: An unauthenticated request was received.
        '405':
          description: The request uses an unexpected HTTP method.
        5XX:
          description: An unexpected error occurred on the server side.
  /platform/v3/customers/batch:
    post:
      security:
        - OAuth2: []
      tags:
        - Manage Customers
      summary: Create Customers V3 (Batch)
      description: |
        This endpoint is used to create a batch of new Customers in order for them to consume the Bud services.

        For more information on Customers in the Bud platform, please refer to our handy [guide](https://docs-us.thisisbud.com/docs/setup-customers).
      operationId: platform_v3_customers_batch_post
      parameters:
        - $ref: '#/components/parameters/ClientId'
      requestBody:
        required: false
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateCustomersV3BatchPayload'
            example:
              number_of_customers: 2
              customer_context:
                type: personal
                region: US
                locale: en-US
                models:
                  categorisation: us-v1
      responses:
        '201':
          description: The resource has been successfully created.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateCustomersV3BatchResponse'
              example:
                operation_id: platform_v3_customers_batch_post
                data:
                  - customer_id: 360e5821-4f18-4077-83f4-c9a7c1768bea
                    customer_context:
                      type: personal
                      region: US
                      locale: en-US
                      models:
                        categorisation: us-v1
                      host_secret: true
                  - customer_id: 8d3e9cd4-fa92-4252-8725-9b20af307b76
                    customer_context:
                      type: personal
                      region: US
                      locale: en-US
                      host_secret: true
                      models:
                        categorisation: us-v1
                metadata:
                  created_at: '2023-01-01T07:02:11Z'
        '400':
          description: The request contains an invalid payload.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: customers_create
                code_id: failed_validation
                message: Failed validation.
                errors:
                  client_id:
                    - This value should not be blank
        '401':
          description: An unauthenticated request was received.
        '405':
          description: The request uses an unexpected HTTP method.
        5XX:
          description: An unexpected error occurred on the server side.
  /platform/v3/customers/{customer_id}:
    delete:
      security:
        - OAuth2: []
      tags:
        - Manage Customers
      summary: Remove Customer V3
      description: This endpoint is used to delete an existing Customer. Calling this endpoint initiates deleting all data relating to a customer returning a task id that can be used to check the status of the delete task.
      operationId: platform_v3_customers_delete
      parameters:
        - in: path
          name: customer_id
          schema:
            type: string
          required: true
          description: The customer identifier.
        - $ref: '#/components/parameters/ClientId'
      responses:
        '202':
          description: The request was successfully accepted for processing and details of the task was returned.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomerDeleteV3Response'
              example:
                operation_id: platform_v3_customers_delete
                data:
                  task_id: e74efdd2-bd44-42b0-9562-106286664966
                metadata:
                  status: Pending
                  next_url: /v3/customers/45cecf3f-8436-4b57-8953-cfdfbd2620d4/e74efdd2-bd44-42b0-9562-106286664966
                  next_url_delay: 50
        '401':
          description: An unauthenticated request was received.
        '404':
          description: The resource was not found.
        '405':
          description: The request uses an unexpected HTTP method.
        5XX:
          description: An unexpected error occurred on the server side.
  /platform/v3/customers/{customer_id}/{task_id}:
    get:
      security:
        - OAuth2: []
      tags:
        - Manage Customers
      summary: Retrieve Remove Customer V3 Status
      description: |
        Check the status and get the result of a Remove Customer V3 task.
      operationId: platform_v3_customers_delete_status
      parameters:
        - in: path
          name: customer_id
          schema:
            type: string
          required: true
          description: The customer identifier.
        - $ref: '#/components/parameters/TaskId'
        - $ref: '#/components/parameters/ClientId'
      responses:
        '200':
          description: The request was successfully processed.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomerDeleteV3StatusResponse'
              examples:
                complete:
                  summary: Completed
                  value:
                    operation_id: platform_v3_customers_delete_status
                    data:
                      task_id: e74efdd2-bd44-42b0-9562-106286664966
                      result: success
                    metadata:
                      status: Completed
                pending:
                  summary: Pending
                  value:
                    operation_id: platform_v3_customers_delete_status
                    data:
                      status: Pending
                      task_id: 16fa0748-8a6b-455b-9be9-30ae257965d8
                    metadata:
                      status: Pending
                      next_url: /v3/customers/45cecf3f-8436-4b57-8953-cfdfbd2620d4/e74efdd2-bd44-42b0-9562-106286664966
                      next_url_delay: 50
                failed:
                  summary: Failed
                  value:
                    operation_id: platform_v3_customers_delete_status
                    data:
                      task_id: e74efdd2-bd44-42b0-9562-106286664966
                      result: failed
                    metadata:
                      status: Failed
        '401':
          description: An unauthenticated request was received.
        '404':
          description: The resource was not found.
        '405':
          description: The request uses an unexpected HTTP method.
        5XX:
          description: An unexpected error occurred on the server side.
  /v1/customers/{customer_id}:
    delete:
      deprecated: true
      security:
        - OAuth2: []
      tags:
        - Manage Customers
      summary: Remove Customer
      description: This endpoint is used to delete an existing Customer.
      operationId: customers_delete
      parameters:
        - $ref: '#/components/parameters/PathCustomerID'
        - $ref: '#/components/parameters/ClientId'
      responses:
        '204':
          description: The request was successfully processed and no content is returned.
        '401':
          description: An unauthenticated request was received.
        '404':
          description: The resource was not found.
        '405':
          description: The request uses an unexpected HTTP method.
        5XX:
          description: An unexpected error occurred on the server side.
  /v1/customers/{customer_id}/context:
    get:
      security:
        - OAuth2: []
      tags:
        - Manage Customers
      summary: Retrieve Customer Context
      description: Retrieve the customer level customer context, i.e. a set of parameters that defines their language, region and their customer type.
      operationId: v1_customer_context_get
      parameters:
        - $ref: '#/components/parameters/PathCustomerID'
        - $ref: '#/components/parameters/ClientId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomerContextResponse'
              example:
                operation_id: v1_customer_context_get
                data:
                  type: personal
                  region: US
                  locale: en-US
                  models:
                    categorisation: us-v1
        '401':
          description: An unauthenticated request was received.
        '404':
          description: The resource was not found.
        '405':
          description: The request uses an unexpected HTTP method.
        5XX:
          description: An unexpected error occurred on the server side.
    put:
      security:
        - OAuth2: []
      tags:
        - Manage Customers
      summary: Update Customer Context
      description: Set the customer level customer context.
      operationId: v1_customer_context_put
      parameters:
        - $ref: '#/components/parameters/PathCustomerID'
        - $ref: '#/components/parameters/ClientId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateCustomerContextRequest'
            example:
              region: US
              locale: en-US
              models:
                categorisation: us-v1
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateCustomerContextResponse'
              example:
                operation_id: v1_customer_context_put
                data:
                  region: US
                  locale: en-US
                  models:
                    categorisation: us-v1
        '401':
          description: An unauthenticated request was received.
        '404':
          description: The resource was not found.
        '405':
          description: The request uses an unexpected HTTP method.
        5XX:
          description: An unexpected error occurred on the server side.
  /v1/open-banking/providers:
    get:
      tags:
        - Create a Connection
      summary: Retrieve Bank Providers
      description: |
        List the available bank providers with their name, icon and maintenance status.
      operationId: open_banking_providers_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/USBankingProvidersQueryRegionFilter'
      responses:
        '200':
          description: List of providers available via Bud's Bank Aggregation APIs
          content:
            application/json:
              schema:
                required:
                  - operation_id
                  - data
                properties:
                  operation_id:
                    $ref: '#/components/schemas/OperationId'
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/OBProvider'
                  metadata:
                    oneOf:
                      - $ref: '#/components/schemas/ResultsMetadata'
                      - type: object
                        nullable: true
                example:
                  operation_id: open_banking_providers_get
                  data:
                    - provider: citi
                      display_name: Citibank
                      maintenance_window:
                        start: 2024-01-07T11:48:00+0000
                        end: 2024-01-08T11:48:00+0000
                      maintenance_status: active
                      icon: https://assets.thisisbud.com/example-icon
                      regions:
                        - USA
                      mobile_only: false
                    - provider: chase
                      display_name: Chase
                      maintenance_window: null
                      maintenance_status: inactive
                      icon: https://assets.thisisbud.com/example-icon
                      regions:
                        - USA
                      mobile_only: false
                    - provider: bankofamerica
                      display_name: Bank of America
                      maintenance_window: null
                      maintenance_status: inactive
                      icon: https://assets.thisisbud.com/example-icon
                      regions:
                        - USA
                      mobile_only: false
                    - provider: capitalone
                      display_name: Capital One
                      maintenance_window: null
                      maintenance_status: inactive
                      icon: https://assets.thisisbud.com/example-icon
                      regions:
                        - USA
                      mobile_only: false
                    - provider: wellsfargo
                      display_name: Wells Fargo
                      maintenance_window: null
                      maintenance_status: inactive
                      icon: https://assets.thisisbud.com/example-icon
                      regions:
                        - USA
                      mobile_only: false
                    - provider: pnc
                      display_name: PNC Bank
                      maintenance_window: null
                      maintenance_status: inactive
                      icon: https://assets.thisisbud.com/example-icon
                      regions:
                        - USA
                      mobile_only: false
                    - provider: fidelity
                      display_name: Fidelity
                      maintenance_window: null
                      maintenance_status: inactive
                      icon: https://assets.thisisbud.com/example-icon
                      regions:
                        - USA
                      mobile_only: false
                    - provider: td
                      display_name: TD Bank
                      maintenance_window: null
                      maintenance_status: inactive
                      icon: https://assets.thisisbud.com/example-icon
                      regions:
                        - USA
                      mobile_only: false
                    - provider: usbank
                      display_name: US Bank
                      maintenance_window: null
                      maintenance_status: inactive
                      icon: https://assets.thisisbud.com/example-icon
                      regions:
                        - USA
                      mobile_only: false
                    - provider: transamerica
                      display_name: Transamerica
                      maintenance_window: null
                      maintenance_status: inactive
                      icon: https://assets.thisisbud.com/example-icon
                      regions:
                        - USA
                      mobile_only: false
                  metadata: null
        '400':
          description: Bad Request that fails validations on headers & payload
        '401':
          description: Unauthorized (BearerToken in 'Authorization' header fails the authentication)
        5XX:
          description: An unexpected error occurred on the server side
  /v2/open-banking/authorisation-gateway-url:
    post:
      tags:
        - Create a Connection
      summary: Retrieve Authorisation Gateway URL (v2)
      description: |
        Allow customers to authorise with, and connect to, a provider, using Budâ€™s __Bud Connect__. Bud Connect is a UI component hosted by Bud that can be integrated into any mobile or web experience, and 
        allows your customers to connect to and authorise with their chosen provider, allowing Bud to pull their account information.

        Using the different configuration options that can be set through the request body you can personalize the experience for your Customer. Please, refer to the documentation below for more information about the available configurations.

        The status of the authorisation step will be provided to you as a path parameter within the `redirect_url` specified within the request payload. 
        This `redirect_url` is where your customer will be redirected to once they have either failed, or successfully completed, the authorisation process with their provider.

        The URL generated with this endpoint is valid for up to 30 minutes. We suggest to generate the URL right before redirecting your Customer to it.

        Please note that in order to recieve status updates on a given account connection task, you will need to configure your Callback URL within the developer console. 
        Once the entire connection process has been completed and the customer's account information is ready to be collected, Bud will send a request to your callback URL.
      operationId: v2_ob_authorisation_gateway_url_post
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/USAuthGatewayURLRequestv2'
            examples:
              All providers:
                value:
                  redirect_url: https://my-agent-webapp.com/connected?my-parameter=xyz
              Specify provider(s):
                value:
                  redirect_url: https://my-agent-webapp.com/connected?my-parameter=xyz
                  providers:
                    - citi
                    - chase
                    - capitalone
              Show the "connect more accounts" button:
                value:
                  redirect_url: https://my-agent-webapp.com/connected?my-parameter=xyz
                  connect_more_accounts_button: true
              Show the account connection summary screen:
                value:
                  redirect_url: https://my-agent-webapp.com/connected?my-parameter=xyz
                  accounts_summary: true
              Show the initial screen as the account summary screen:
                value:
                  redirect_url: https://my-agent-webapp.com/connected?my-parameter=xyz
                  initial_screen": accounts_summary
              Enable a asynchronous connection:
                value:
                  redirect_url: https://my-agent-webapp.com/connected?my-parameter=xyz
                  enable_async_connect: true
      responses:
        '201':
          description: The resource has been successfully created.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AuthGatewayURLResponse'
              example:
                operation_id: v2_ob_authorisation_gateway_url_post
                data:
                  url: https://connect-us.thisisbud.com/connect?nonce=nu9ysswxk3hnrepo&token=b361e184038e25077cab277ede9362289941da928cd0d9c7ea52107aa2ad0d909d87993a532af47d9794cd5f29ba66128b3dc7f705ce9b044c636c28e31e1bb3ff8e17145a49f42f525bff51945c3a2484c89a05c1b1e484f9b84ee0cfee4640453fd599e71b5111bd880a63cc924fca8c6ce831396e2f4f8b3e5ac994c5c9
        '400':
          description: Bad Request that fails validations on headers & payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: v2_ob_authorisation_gateway_url_post
                code_id: failed_validation
                message: Failed validation.
                errors:
                  redirect_url:
                    - This value should not be blank.
        '401':
          description: Unauthorized (BearerToken in 'Authorization' header fails the authentication)
        '405':
          description: The request uses an unexpected HTTP method.
        '422':
          description: Unprocessable request (e.g. requested providers are in maintenance)
        5XX:
          description: An unexpected error occurred on the server side
      callbacks:
        ConnectCompletedCallBack:
          '{$request.body#/redirect_url}':
            description: |
              This callback is sent to your configured `Open banking Connection Completed` webhook URL on the completion of a connect task.
            post:
              security: []
              parameters:
                - $ref: '#/components/parameters/SignatureHeaderParameter'
                - $ref: '#/components/parameters/SigningIdHeaderParameter'
              summary: Connect Completed Notification Callback
              requestBody:
                required: true
                description: This callback is sent to your configured `Open banking Connection Completed` webhook URL on the completion of a connect task.
                content:
                  application/json:
                    schema:
                      $ref: '#/components/schemas/OBConnectWebhookBody'
                    examples:
                      Success:
                        description: Successful connection
                        value:
                          data:
                            task_id: 03af1639-78a6-402d-809b-902a0b00a77d
                            status: Completed
                            result: success
                            task_type: connect
                            customer_id: b6f898f8-99e8-4529-8e90-64d96fe05aa4
                      Failure:
                        description: Failed connect due to a provider failure
                        value:
                          data:
                            task_id: 03af1639-78a6-402d-809b-902a0b00a77d
                            status: Failed
                            result: provider_failure
                            task_type: connect
                            customer_id: b6f898f8-99e8-4529-8e90-64d96fe05aa4
              responses:
                '200':
                  description: Your server returns this code if it accepts the callback
                '300':
                  description: The notification will not be retried, redirects will not be followed
                '400':
                  description: Bad Request that fails validations on headers & payload
                '500':
                  description: An unexpected error occurred on the server side
  /v1/open-banking/connect/{connection_task_id}:
    get:
      tags:
        - Create a Connection
      summary: Retrieve Connection Status
      description: |
        Check the status of an account connection task. If the task is not yet completed, the status will be shown as pending. If the status is completed, then the data is ready to be ingested. 

        The __connection_task_id__ is provided as a parameter in the redirect url after the Customer has undergone a successful authorisation with a relevant banking provider.
      operationId: open_banking_connect_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/ConnectionTaskId'
      responses:
        '200':
          description: The request was successfully processed.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OpenBankingConnectResponse'
              examples:
                completed:
                  summary: Completed
                  value:
                    operation_id: open_banking_connect_get
                    data:
                      bank_name: citi
                      provider: citi
                      reconnect_required: false
                      result: success
                      status: Completed
                      step: 4
                      task_id: 030c85d8-bbbe-4ef9-894e-7e56a2e02437
                      text: Completed
                    metadata:
                      status: Completed
                      next_url: /v1/open-banking/connect/360e5821-4f18-4077-83f4-c9a7c1768bea
                      next_url_delay: 50
                pending:
                  summary: Pending
                  value:
                    operation_id: open_banking_connect_get
                    data:
                      bank_name: citi
                      provider: citi
                      reconnect_required: false
                      status: Pending
                      step: 2
                      task_id: 030c85d8-bbbe-4ef9-894e-7e56a2e02437
                      text: Fetching accounts
                    metadata:
                      status: Pending
                      next_url: /v1/open-banking/connect/360e5821-4f18-4077-83f4-c9a7c1768bea
                      next_url_delay: 50
                failed:
                  summary: Failed
                  value:
                    operation_id: open_banking_connect_get
                    data:
                      bank_name: citi
                      provider: citi
                      reconnect_required: false
                      result: auth_denied
                      status: Failed
                      step: 3
                      task_id: 030c85d8-bbbe-4ef9-894e-7e56a2e02437
                      text: Fetching balances and transactions
                    metadata:
                      status: Failed
        '400':
          description: Bad Request that fails validations on headers & payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: open_banking_connect_get
                code_id: failed_validation
                message: Failed validation
                errors:
                  customer_id:
                    - This value should not be blank
        '404':
          description: Task not found
        '405':
          description: The request uses an unexpected HTTP method
        5XX:
          description: An unexpected error occurred on the server side
  /v1/open-banking/refresh:
    post:
      deprecated: true
      tags:
        - Manage a Connection
      summary: Initiate Refresh
      description: |
        Instruct Bud to retrieve the latest account information for a customer. Refresh the accounts from a single provider with an existing connection.

        By default this task will retrieve transactions since the last pull of transactions less seven days. This can be overridden using the `from` body parameter to a maximum of 90 days previously.

        After initiating this long running process, make sure to check the status of the it till completion before trying to access the Customer's data or initiating another refresh.

        If the customer's provider was fetched (connect or refresh) within the last hour, the endpoint will return the task_id of the previous task instead of refreshing the data again.

        If the customer's consent has been revoked or expired for this provider, Bud will be unable to refresh the account. 
        This will be confirmed in the response of the refresh status endpoint associated with the `task_id` provided in the response to this endpoint, where the `reconnect_required` field will set to `true` and status set to `Completed`.
      operationId: open_banking_refresh_post
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - in: header
          name: X-Customer-Ip-Address
          schema:
            type: string
          required: false
          description: |
            The IP address of the personal device the customer is initiating the refresh from.
            This header should _only_ be supplied if the customer has initiated the refresh from a personal device, and never if the refresh has been initated from an automated process such as a script.
            The IP address is forwarded to the provider and can help avoid hitting limits on how frequently a refresh can be initiated.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OpenBankingRefreshRequest'
            example:
              provider: citi
              from: '2019-03-01T00:00:00+00:00'
              to: '2019-06-01T00:00:00+00:00'
      responses:
        '202':
          description: A new Task has been generated to request the Customer's bank account refresh. The generated `task_id` can be used to check the Task's status.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskCreatedResponseOB'
              example:
                operation_id: open_banking_refresh_post
                data:
                  provider: citi
                  task_id: 360e5821-4f18-4077-83f4-c9a7c1768bea
                metadata:
                  next_url: /v1/open-banking/refresh/360e5821-4f18-4077-83f4-c9a7c1768bea
                  next_url_delay: 50
                  status: Pending
        '400':
          description: Bad Request that fails validations on headers & payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              examples:
                Parameter missing:
                  value:
                    operation_id: open_banking_refresh_post
                    code_id: failed_validation
                    message: Failed validation
                    errors:
                      customer_id:
                        - This value should not be blank
                Provider in Maintenance:
                  value:
                    operation_id: open_banking_refresh_post
                    code_id: provider_maintenance
                    message: The provider is in maintenance.
                    errors:
                      provider:
                        - The provider is currently disabled due to planned maintenance or known issues.
        '405':
          description: The request uses an unexpected HTTP method
        5XX:
          description: An unexpected error occurred on the server side
      callbacks:
        RefreshCompletedCallBack:
          '{$request.body#/redirect_url}':
            description: |
              This callback is sent to your configured 'Aggregator refresh completed' webhook URL on the completion of a connect task.
            post:
              security: []
              parameters:
                - $ref: '#/components/parameters/SignatureHeaderParameter'
                - $ref: '#/components/parameters/SigningIdHeaderParameter'
              summary: Refresh Completed Notification Callback
              requestBody:
                required: true
                description: This callback is sent to your configured 'Aggregator refresh completed' webhook URL on the completion of a refresh task.
                content:
                  application/json:
                    schema:
                      $ref: '#/components/schemas/OBRefreshWebhookBody'
                    examples:
                      Success:
                        description: Successful refresh
                        value:
                          data:
                            task_id: 03af1639-78a6-402d-809b-902a0b00a77d
                            status: Completed
                            result: success
                            task_type: refresh
                            customer_id: b6f898f8-99e8-4529-8e90-64d96fe05aa4
                            reconnect_required: 'false'
                            has_new_transactions: 'true'
                      Failure:
                        description: Failed refresh due to a consent being revoked
                        value:
                          data:
                            task_id: 03af1639-78a6-402d-809b-902a0b00a77d
                            status: Failed
                            result: connection_revoked
                            task_type: refresh
                            customer_id: b6f898f8-99e8-4529-8e90-64d96fe05aa4
                            reconnect_required: 'true'
                            has_new_transactions: 'false'
              responses:
                '200':
                  description: Your server returns this code if it accepts the callback
                '300':
                  description: The notification will not be retried, redirects will not be followed
                '400':
                  description: The notification will not be retried
                '500':
                  description: |
                    The request will be retried shortly. If it fails multiple times, we will stop attempting to deliver the notification for this single event. 
  /v1/open-banking/refresh/{task_id}:
    get:
      deprecated: true
      tags:
        - Manage a Connection
      summary: Retrieve Refresh Status
      description: |
        Check the status of an account information refresh task. If the task is not yet completed, the status will be shown as pending. 
        If the status is completed, then the data is ready to be collected via the [Retrieve Financial Data](/reference/retrieve-financial-data) endpoints. 
        Successful requests will include `step` (1-4) and associated `text` values to indicate the current progress of the refresh task.

        Make sure to check the status of the task till completion before trying to access the Customer's data or initiating another process.

        When the task is successful, we include in the response body a `metadata.has_new_transactions` boolean attribute that tells you if the refresh resulted in storing new data. This attribute must be used to 
        decide if it's necessary to pull the Customer's data or not.

        When the refresh fails, we include the reason of the failure as part of the `data.result` attribute. We also include the `data.reconnect_required` boolean attribute that indicates if the consent used to 
        fetch the data for this customer and provider is no longer valid. If reconnect_required is true, the customer will need to go through the bank account connection flow again.
      operationId: open_banking_refresh_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/TaskId'
      responses:
        '200':
          description: The request was successfully processed.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OpenBankingRefreshResponse'
              examples:
                completed:
                  summary: Completed
                  value:
                    operation_id: open_banking_refresh_get
                    data:
                      provider: citi
                      status: Completed
                      result: success
                      reconnect_required: false
                      step: 4
                      task_id: 03af1639-78a6-402d-809b-902a0b00a77d
                      text: Completed
                    metadata:
                      has_new_transactions: true
                      status: Completed
                pending:
                  summary: Pending
                  value:
                    operation_id: open_banking_refresh_get
                    data:
                      provider: citi
                      status: Pending
                      reconnect_required: false
                      step: 1
                      task_id: 03af1639-78a6-402d-809b-902a0b00a77d
                      text: Fetching access token
                    metadata:
                      status: Pending
                      next_url: /v1/open-banking/refresh/360e5821-4f18-4077-83f4-c9a7c1768bea
                      next_url_delay: 50
                failed_provider_failure:
                  summary: Provider Failure
                  value:
                    operation_id: open_banking_refresh_get
                    data:
                      task_id: 1ceb1d81-a80e-4825-a7c0-4d69424c9874
                      provider: citi
                      status: Failed
                      result: provider_failure
                      reconnect_required: false
                      step: 2
                      text: Fetching accounts
                    metadata:
                      status: Failed
                failed_connection_not_found:
                  summary: Connection not found
                  value:
                    operation_id: open_banking_refresh_get
                    data:
                      task_id: 1ceb1d81-a80e-4825-a7c0-4d69424c9874
                      provider: citi
                      status: Failed
                      result: connection_not_found
                      reconnect_required: false
                      step: 4
                      text: Completed
                    metadata:
                      status: Failed
                failed_reconnect_required:
                  summary: Reconnection Required
                  value:
                    operation_id: open_banking_refresh_get
                    data:
                      provider: citi
                      status: Failed
                      result: connection_revoked
                      reconnect_required: true
                      step: 4
                      task_id: 03af1639-78a6-402d-809b-902a0b00a77d
                      text: Completed
                    metadata:
                      status: Failed
        '400':
          description: Bad Request that fails validations on headers & payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: open_banking_refresh_get
                code_id: failed_validation
                message: Failed validation
                errors:
                  customer_id:
                    - This value should not be blank
        '405':
          description: The request uses an unexpected HTTP method
        5XX:
          description: An unexpected error occurred on the server side
  /open-banking/v2/refresh:
    post:
      tags:
        - Manage a Connection
      summary: Initiate Refresh V2
      description: |
        Instruct Bud to retrieve the latest account information for a customer. Refresh the accounts from all providers with an existing connection.

        By default this task will retrieve transactions since the last pull of transactions less seven days. This can be overridden using the `from` body parameter to a maximum of 90 days previously.
        On completion of this task Bud will send a webhook to your configured endpoint including details of the refresh completed and the status of the refresh for each provider. Alternatively the status of the task can be checked using the Retrieve Refresh Status V2 endpoint. Please check that the task has completed successfully before trying to access the Customer's data or initiating another refresh.

        If a similar refresh (same providers) for this customer has been initiated within the last hour, the endpoint will return the task_id of the previous task instead of refreshing the data again.

        If the customer's consent has been revoked or expired for a provider, Bud will be unable to refresh the customers account at that provider. 
        This will be confirmed in the response of the refresh status endpoint associated with the `task_id` provided in the response to this endpoint, where the `reconnect_required` field will set to `true` and status set to `Completed`. If the consent within the Bud system was marked as `Authorised` at this point the consent will be updated to `Revoked` 

        To simplify your integration Bud is able to take control of your background refreshes and manage these regularly for you. Full details can be found on the following [guide](https://docs.thisisbud.com/docs/open-banking-hosted-refreshes)
      operationId: v2_open_banking_refresh_post
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/CustomerSecret'
        - in: header
          name: X-Customer-Ip-Address
          schema:
            type: string
          required: false
          description: |
            The IP address of the personal device the customer is initiating the refresh from.
            This header should _only_ be supplied if the customer has initiated the refresh from a personal device, and never if the refresh has been initated from an automated process such as a script.
            The IP address is forwarded to the provider and can help avoid hitting limits on how frequently a refresh can be initiated.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OpenBankingRefreshRequestV2'
            example:
              from: '2019-03-01T00:00:00+00:00'
              to: '2019-06-01T00:00:00+00:00'
      responses:
        '202':
          description: A new Task has been generated to request the Customer's bank account refresh. The generated `task_id` can be used to check the Task's status.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskCreatedV2ResponseOB'
              example:
                operation_id: v2_open_banking_refresh_post
                data:
                  task_id: 360e5821-4f18-4077-83f4-c9a7c1768bea
                  sub_tasks:
                    - provider: citi
                      task_id: 030d244b-c2d8-4698-b919-69a6c6974c75
                    - provider: capital_one
                      task_id: 030d7563-eb58-4319-9a62-f008ce48bd6c
                metadata:
                  next_url: /v2/open-banking/refresh/360e5821-4f18-4077-83f4-c9a7c1768bea
                  next_url_delay: 500
                  status: Pending
        '400':
          description: The request contains an invalid payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              examples:
                Parameter missing:
                  value:
                    operation_id: open_banking_refresh_post
                    code_id: failed_validation
                    message: Failed validation
                    errors:
                      customer_id:
                        - This value should not be blank
                Provider in Maintenance:
                  value:
                    operation_id: open_banking_refresh_post
                    code_id: provider_maintenance
                    message: The provider is in maintenance.
                    errors:
                      provider:
                        - The provider is currently disabled due to planned maintenance or known issues.
        '405':
          description: The request uses an unexpected HTTP method
        5XX:
          description: An unexpected error occurred on the server side
      callbacks:
        RefreshV2CompletedCallBack:
          '{$request.body#/redirect_url}':
            description: |
              This callback is sent to your configured 'Open banking refresh v2 completed' webhook URL on the completion of a refresh v2 task. This includes details of refreshes completed for all providers
            post:
              security: []
              parameters:
                - $ref: '#/components/parameters/SignatureHeaderParameter'
                - $ref: '#/components/parameters/SigningIdHeaderParameter'
              summary: Refresh Completed Notification Callback
              requestBody:
                required: true
                description: This callback is sent to your configured 'Open banking refresh completed V2' webhook URL on the completion of a refresh task. This includes details of refreshes completed for all providers.
                content:
                  application/json:
                    schema:
                      $ref: '#/components/schemas/OBV2WebhookBody'
                    examples:
                      Success:
                        description: Successful refresh
                        value:
                          customer_id: b6f898f8-99e8-4529-8e90-64d96fe05aa4
                          event: open_banking.v2.refresh.completed
                          has_new_transactions: true
                          task_id: 03af1639-78a6-402d-809b-902a0b00a77d
                          result: success
                          status: Completed
                          sub_tasks:
                            - task_id: 03af1639-78a6-402d-809b-902a0b00a789
                              has_new_transactions: true
                              provider: citi
                              reconnect_required: false
                              result: success
                              status: Completed
                              consent_ids:
                                - 2c7b5faf-2d11-47b1-b9e6-ce95f195259b
                              account_ids:
                                - d8b1390e-0106-4b65-8298-d6a4f13e662c
                      Failure:
                        description: Failed refresh due to a consent being revoked
                        value:
                          customer_id: b6f898f8-99e8-4529-8e90-64d96fe05aa4
                          event: open_banking.v2.refresh.completed
                          has_new_transactions: false
                          task_id: 03af1639-78a6-402d-809b-902a0b001234
                          status: Failed
                          result: connection_revoked
                          sub_tasks:
                            - task_id: 03af1639-78a6-402d-809b-902a0b00b283
                              has_new_transactions: false
                              provider: citi
                              reconnect_required: true
                              result: connection_revoked
                              status: Failed
                              consent_ids:
                                - 2c7b5faf-2d11-47b1-b9e6-ce95f195259b
                              account_ids:
                                - d8b1390e-0106-4b65-8298-d6a4f13e662c
              responses:
                '200':
                  description: Your server returns this code if it accepts the callback
                '300':
                  description: The notification will not be retried, redirects will not be followed
                '400':
                  description: The notification will not be retried
                '500':
                  description: |
                    The request will be retried shortly. If it fails multiple times, we will stop attempting to deliver the notification for this single event.
        ProviderRefreshCompletedCallBack:
          '{$request.body#/redirect_url}':
            description: |
              This callback is sent to your configured 'Open banking refresh v2 provider completed' webhook URL on the completion of a refresh task. This webhook includes details of the refresh completed for a specific provider.
            post:
              security: []
              parameters:
                - $ref: '#/components/parameters/SignatureHeaderParameter'
                - $ref: '#/components/parameters/SigningIdHeaderParameter'
              summary: Provider Refresh Completed Notification Callback
              requestBody:
                required: true
                description: This callback is sent to your configured 'Open banking refresh v2 provider completed' webhook URL when the refresh completes for each provider in a refresh v2 task.
                content:
                  application/json:
                    schema:
                      $ref: '#/components/schemas/ProviderOBV2WebhookBody'
                    examples:
                      Success:
                        description: Successful refresh
                        value:
                          event: open_banking.v2.refresh.provider.completed
                          task_id: 03af1639-78a6-402d-809b-902a0b00a789
                          has_new_transactions: true
                          provider: citi
                          reconnect_required: false
                          result: success
                          status: Completed
                          consent_ids:
                            - 2c7b5faf-2d11-47b1-b9e6-ce95f195259b
                          account_ids:
                            - d8b1390e-0106-4b65-8298-d6a4f13e662c
                          customer_id: b6f898f8-99e8-4529-8e90-64d96fe05aa4
                      Failure:
                        description: Failed refresh due to a consent being revoked
                        value:
                          event: open_banking.v2.refresh.provider.completed
                          task_id: 03af1639-78a6-402d-809b-902a0b00a789
                          has_new_transactions: false
                          provider: citi
                          reconnect_required: true
                          result: connection_revoked
                          status: Failed
                          consent_ids:
                            - 2c7b5faf-2d11-47b1-b9e6-ce95f195259b
                          account_ids:
                            - d8b1390e-0106-4b65-8298-d6a4f13e662c
                          customer_id: b6f898f8-99e8-4529-8e90-64d96fe05aa4
              responses:
                '200':
                  description: Your server returns this code if it accepts the callback
                '300':
                  description: The notification will not be retried, redirects will not be followed
                '400':
                  description: The notification will not be retried
                '500':
                  description: |
                    The request will be retried shortly. If it fails multiple times, we will stop attempting to deliver the notification for this single event.
  /open-banking/v2/refresh/{task_id}:
    get:
      tags:
        - Manage a Connection
      summary: Retrieve Refresh Status V2
      description: |
        Check the status of an account information refresh task. If the task is not yet completed, the status will be shown as pending. 
        If the status is completed, then the data is ready to be collected via the [Retrieve Financial Data](/reference/retrieve-financial-data) endpoints. 

        To monitor the status of a refresh task we provide two methods. The preferred approach is to utilise the webhook functionality within the Bud platform where Bud will send a webhook to your configured endpoint when the task completes. Alternatively you can poll this endpoint to retrieve the status of the task.
        Please ensure that you either receive a webhook with a status of `Completed` and result of `success` or this endpoint returns a status of `Completed` and result of `success` before trying to access the Customer's data or initiating another process.

        When the task is successful, we include in the response body a `metadata.has_new_transactions` boolean attribute that tells you if the refresh resulted in storing new data. This attribute must be used to 
        decide if it's necessary to pull the Customer's data or not.

        When the refresh fails, we include the reason of the failure as part of the `data.result` attribute. We also include the `data.sub_tasks[i].reconnect_required` boolean attribute that indicates if the consent used to 
        fetch the data for this customer and provider is no longer valid. If reconnect_required is true, the customer will need to go through the bank account connection flow and the consent will be marked as revoked.

        When only a subset of sub tasks fails the main task will be marked as `Failed` but for each provider where the refresh was successful (result is equal to `success`) customers data will be updated and available from the [Retrieve Financial Data](/reference/retrieve-financial-data) endpoints.
        In the case of a partial success you are able to specify the `providers` body parameter to the [Initiate Refresh V2](/reference/v2_open_banking_refresh_post) endpoint to initiate a refresh for the failing provider(s).
      operationId: v2_open_banking_refresh_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/TaskId'
      responses:
        '200':
          description: The request was successfully processed.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OpenBankingRefreshV2Response'
              examples:
                completed:
                  summary: Completed
                  value:
                    operation_id: open_banking_refresh_get
                    data:
                      task_id: 03af1639-78a6-402d-809b-902a0b00a77d
                      status: Completed
                      result: success
                      has_new_transactions: true
                      sub_tasks:
                        - task_id: 030d244b-c2d8-4698-b919-69a6c6974c75
                          provider: citi
                          status: Completed
                          result: success
                          reconnect_required: false
                          has_new_transactions: true
                        - task_id: 030d7563-eb58-4319-9a62-f008ce48bd6c
                          provider: capital_one
                          status: Completed
                          result: success
                          reconnect_required: false
                          has_new_transactions: false
                    metadata:
                      status: Completed
                pending:
                  summary: Pending
                  value:
                    operation_id: open_banking_refresh_get
                    data:
                      task_id: 03af1639-78a6-402d-809b-902a0b00a77d
                      status: Pending
                      sub_tasks:
                        - task_id: 030d244b-c2d8-4698-b919-69a6c6974c75
                          provider: citi
                          status: Pending
                        - task_id: 030d7563-eb58-4319-9a62-f008ce48bd6c
                          provider: capital_one
                          status: Pending
                    metadata:
                      status: Pending
                      next_url: /v2/open-banking/refresh/03af1639-78a6-402d-809b-902a0b00a77d
                      next_url_delay: 500
                partially_complete:
                  summary: Partially Complete
                  value:
                    operation_id: open_banking_refresh_get
                    data:
                      task_id: 03af1639-78a6-402d-809b-902a0b00a77d
                      status: Pending
                      sub_tasks:
                        - task_id: 030d244b-c2d8-4698-b919-69a6c6974c75
                          provider: citi
                          status: Pending
                        - task_id: 030d7563-eb58-4319-9a62-f008ce48bd6c
                          provider: capital_one
                          status: Completed
                          result: success
                          reconnect_required: false
                          has_new_transactions: false
                    metadata:
                      status: Pending
                      next_url: /v2/open-banking/refresh/03af1639-78a6-402d-809b-902a0b00a77d
                      next_url_delay: 500
                failed_provider_failure:
                  summary: Provider Failure
                  value:
                    operation_id: open_banking_refresh_get
                    data:
                      task_id: 03af1639-78a6-402d-809b-902a0b00a77d
                      status: Failed
                      sub_tasks:
                        - task_id: 030d244b-c2d8-4698-b919-69a6c6974c75
                          provider: citi
                          status: Failed
                          result: provider_failure
                          reconnect_required: false
                        - task_id: 030d7563-eb58-4319-9a62-f008ce48bd6c
                          provider: capital_one
                          status: Completed
                          result: success
                          reconnect_required: false
                          has_new_transactions: false
                    metadata:
                      status: Failed
                failed_connection_not_found:
                  summary: Connection not found
                  value:
                    operation_id: open_banking_refresh_get
                    data:
                      task_id: 03af1639-78a6-402d-809b-902a0b00a77d
                      status: Failed
                      sub_tasks:
                        - task_id: 030d244b-c2d8-4698-b919-69a6c6974c75
                          provider: citi
                          status: Failed
                          result: connection_not_found
                          reconnect_required: true
                        - task_id: 030d7563-eb58-4319-9a62-f008ce48bd6c
                          provider: capital_one
                          status: Failed
                          result: connection_not_found
                          reconnect_required: true
                    metadata:
                      status: Failed
        '400':
          description: The request contains an invalid payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: open_banking_refresh_get
                code_id: failed_validation
                message: Failed validation
                errors:
                  customer_id:
                    - This value should not be blank
        '405':
          description: The request uses an unexpected HTTP method
        5XX:
          description: An unexpected error occurred on the server side
  /v1/open-banking/account-access-consents:
    get:
      tags:
        - Manage a Connection
      summary: Retrieve Customer Consents
      description: |
        Retrieve the list of all available bank consents granted by the customer.
      operationId: open_banking_connections_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/ConsentStatus'
      responses:
        '200':
          description: The list of consents
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/USGetOBConsentsResponse'
              example:
                operation_id: open_banking_connections_get
                data:
                  - id: 1ceb1d81-a80e-4825-a7c0-4d69424c9874
                    customer_id: 8e826e72-5cab-4426-897f-5317992a95f0
                    provider: mikomo
                    transaction_from_date: '2020-03-23T14:46:32Z'
                    expiration_date: '2021-06-21T14:46:33Z'
                    created_at: '2021-03-23T14:46:33Z'
                    last_consented_on: '2021-03-23T14:47:01Z'
                    status: authorised
                    resources:
                      - accounts
                      - balances
                      - transactions
                    permissions:
                      - ReadAccounts
                      - ReadBalances
                      - ReadTransactions
                    raw_version: v1.0
                    raw_format: akoya
                    raw: null
                    account_ids:
                      - aa86f72c-476a-3355-b54c-614a815fae40
                    last_synced_at: '2021-06-15T11:01:30.07Z'
                  - id: a080272e-c449-4a75-861a-9feb53075946
                    customer_id: 8e826e72-5cab-4426-897f-5317992a95f0
                    provider: capitalone
                    transaction_from_date: '2020-04-24T15:46:32Z'
                    transaction_to_date: '0001-01-01T00:00:00Z'
                    expiration_date: '2021-07-21T14:46:33Z'
                    created_at: '2021-04-24T15:42:13Z'
                    last_consented_on: '2021-04-24T15:42:13Z'
                    status: authorised
                    resources:
                      - accounts
                      - balances
                      - transactions
                    permissions:
                      - ReadAccounts
                      - ReadBalances
                      - ReadTransactions
                    raw_version: v1.0
                    raw_format: akoya
                    raw: null
                    account_ids:
                      - bb98k51y-564t-8560-c99d-232b977gef68
                    last_synced_at: '2021-06-16T09:13:41.32Z'
                metadata:
                  results: 2
        '400':
          description: Bad Request that fails validations on headers & payload
        '401':
          description: Unauthorized (BearerToken in 'Authorization' header fails the authentication)
        5XX:
          description: An unexpected error occurred on the server side
  /v1/open-banking/account-access-consent/revoke:
    post:
      tags:
        - Manage a Connection
      summary: Initiate Revoke Consent
      description: |
        Start a task to remove consent and remove Budâ€™s ability to download further information for a specified customer account.

        This will revoke `all` the consents for the specified provider associated to the customer.

        To check the status of this task, use the `Retrieve Revoke Consent Status` using the returned `task_id`.

        Alternatively, there is a `Open Banking Consent Revoked` webhook that will trigger per consent successfully revoked. As such this task could generate multiple of these.
      operationId: open_banking_account_access_consent_revoke_post
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RevokeAccountAccessIntentRequest'
            example:
              provider: citi
      responses:
        '202':
          description: The request has been accepted for processing
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RevokeTaskCreatedResponse'
              example:
                operation_id: open_banking_revoke_post
                data:
                  provider: citi
                  task_id: 1ceb1d81-a80e-4825-a7c0-4d69424c9874
                metadata:
                  status: Pending
                  next_url: /v1/open-banking/account-access-consent/revoke/1ceb1d81-a80e-4825-a7c0-4d69424c9874
                  next_url_delay: 50
        '400':
          description: Bad Request that fails validations on headers & payload
        '401':
          description: Unauthorized (BearerToken in 'Authorization' header fails the authentication)
        5XX:
          description: An unexpected error occurred on the server side
      callbacks:
        ConsentRevokedCallBack:
          '{$request.body#/redirect_url}':
            description: |
              This callback is sent to your configured `Open Banking Consent Revoked` webhook URL when a consent is moved to a revoked status
            post:
              security: []
              parameters:
                - $ref: '#/components/parameters/SignatureHeaderParameter'
                - $ref: '#/components/parameters/SigningIdHeaderParameter'
              summary: Consent Revoked Notification Callback
              requestBody:
                required: true
                description: This callback is sent to your configured `Open Banking Consent Revoked` webhook URL when a consent has moved to a revoked status
                content:
                  application/json:
                    schema:
                      $ref: '#/components/schemas/OBConsentWebhookBody'
                    example:
                      data:
                        event: open_banking.consent.revoked
                        consent_id: 03af1639-78a6-402d-809b-902a0b00a77d
                        customer_id: b6f898f8-99e8-4529-8e90-64d96fe05aa4
                        provider: citi
                        updated_at: '2023-10-02T14:05:55Z'
              responses:
                '200':
                  description: Your server returns this code if it accepts the callback
                '300':
                  description: The notification will not be retried, redirects will not be followed
                '400':
                  description: The notification will not be retried
                '500':
                  description: |
                    The request will be retried shortly. If it fails multiple times, we will stop attempting to deliver the notification for this single event.
  /v1/open-banking/account-access-consent/revoke/{task_id}:
    get:
      tags:
        - Manage a Connection
      summary: Retrieve Revoke Consent Status
      description: |
        Check the status and result of a Revoke Consent task. 

        Use the `task_id` taken from a successful `Initiate Revoke Consent` request.
      operationId: open_banking_account_access_consent_revoke_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/TaskId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RevokeAccountAccessIntentTastStatusResponse'
              examples:
                completed:
                  summary: Completed
                  value:
                    operation_id: open_banking_revoke_task_get
                    data:
                      task_id: 1ceb1d81-a80e-4825-a7c0-4d69424c9874
                      provider: capitalone
                      status: Completed
                      result: success
                    metadata:
                      status: Completed
                pending:
                  summary: Pending
                  value:
                    operation_id: open_banking_revoke_task_get
                    data:
                      task_id: 1ceb1d81-a80e-4825-a7c0-4d69424c9874
                      provider: capitalone
                      status: Pending
                    metadata:
                      status: Pending
                      next_url: /v1/open-banking/account-access-consent/revoke/1ceb1d81-a80e-4825-a7c0-4d69424c9874
                      next_url_delay: 50
                failed:
                  summary: Failed
                  value:
                    operation_id: open_banking_revoke_task_get
                    data:
                      task_id: 1ceb1d81-a80e-4825-a7c0-4d69424c9874
                      provider: capitalone
                      status: Failed
                    metadata:
                      status: Failed
        '400':
          description: Bad Request that fails validations on headers & payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RevokeAccountAccessIntentTaskStatusValidationError'
              examples:
                missing_customer_header:
                  summary: Missing X-Customer-Id header
                  value:
                    operation_id: open_banking_revoke_task_get
                    code_id: failed_validation
                    message: invalid request
                    errors:
                      customer-id: This value should not be blank
        '401':
          description: Unauthorized (BearerToken in 'Authorization' header fails the authentication)
        5XX:
          description: An unexpected error occurred on the server side
  /v2/ingest/accounts:
    post:
      tags:
        - Ingest First Party Data
      summary: Ingest Accounts V2
      description: |
        This endpoint is for pushing customer(s) account(s) and balance(s) through the Bud architecture.
        It can ingest data for multiple customers per request.
        By default, this is synchronous and will report any issue with the data in the response.
        If a 'X-Disable-Synchronous' header is present and set to true, the process will create a task in the background and be entirely 'non-blocking'.
        In this scenario, the response metadata will contain a Task ID and the next URL which would then be used for finding out the operation's result.
      operationId: v2_ingest_accounts_post
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/IngestAccountsContentType'
        - name: X-Disable-Synchronous
          in: header
          description: If present and set to true, a task is created and a response is returned immediately
          schema:
            type: boolean
            default: false
      requestBody:
        required: true
        content:
          '*/*':
            schema:
              oneOf:
                - $ref: '#/components/schemas/IngestAccountsRequest'
                - $ref: '#/components/schemas/IngestPlaidAccountsRequest'
                - $ref: '#/components/schemas/IngestFinicityAccountsRequest'
            examples:
              bud-accounts-v1 Request:
                summary: Bud Accounts V1 Example
                value:
                  - customer_id: c3339af9-2426-44d4-9c4d-ddb8fd281e23
                    accounts:
                      - provider: citi
                        account_id: 99473c28-21cf-4a9a-b79e-fd643dd7a4bc
                        currency: USD
                        account_type: Personal
                        account_sub_type: CurrentAccount
                        details:
                          - scheme_name: UK.OBIE.SortCodeAccountNumber
                            identification: '98765432165444'
                            secondary_identification: '00021'
                            name: Mr Kevin
                        balances:
                          - amount:
                              value: '7.00'
                              currency: USD
                            credit_debit_indicator: outgoing_debit
                            credit_line:
                              - included: true
                                amount:
                                  value: '200.00'
                                  currency: USD
                                type: Credit
                            date: '2020-12-01'
                            time: '00:00:00'
                            type: InterimBooked
                  - customer_id: 85db4cdf-5f79-4f4e-8388-f9a52da598a2
                    accounts:
                      - provider: chase
                        account_id: bfd4ea71-58d7-4b24-8820-95029875cc9a
                        currency: USD
                        account_type: Personal
                        account_sub_type: CurrentAccount
                        details:
                          - scheme_name: UK.OBIE.SortCodeAccountNumber
                            identification: '12312312313200'
                            secondary_identification: '00022'
                            name: Mr Kevin
                        balances:
                          - amount:
                              value: '70005.00'
                              currency: USD
                            credit_debit_indicator: incoming_credit
                            credit_line:
                              - included: true
                                amount:
                                  value: '100.00'
                                  currency: USD
                                type: Credit
                            date: '2020-12-01'
                            time: '00:00:00'
                            type: InterimBooked
              plaid-accounts-v1 Request:
                summary: Plaid Accounts V1 Example
                value:
                  - customer_id: c3339af9-2426-44d4-9c4d-ddb8fd281e23
                    accounts:
                      - account_id: 6PdjjRP6LmugpBy5NgQvUqpRXMWxzktg3rwrk
                        balances:
                          available: 100
                          current: 120
                          limit: 1200
                          iso_currency_code: USD
                          last_updated_datetime: '2022-07-13T15:30:00Z'
                        name: Plaid Checking
                        official_name: Plaid Gold Standard 0% Interest Checking
                        type: depository
                        subtype: checking
              finicity-accounts-v1 Request:
                summary: Finicity V1 Accounts Request
                description: A sample finicity v1 accounts ingest request
                value:
                  - customer_id: c3339af9-2426-44d4-9c4d-ddb8fd281e23
                    accounts:
                      - id: '1014136057'
                        name: Super Checking
                        balance: 7456
                        type: checking
                        status: active
                        institutionId: '102224'
                        balanceDate: 1588797048
                        currency: USD
                        detail:
                          availableBalanceAmount: 5678.78
                          creditAvailableAmount: 10200
                          creditMaxAmount: 12000
      responses:
        '202':
          description: A new Task has been created to ingest the given transactions. The generated `task_id` can be used to check the Task's status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestV2AsyncResponse'
              example:
                operation_id: v2_ingest_accounts_post
                metadata:
                  task_id: 4cef424c-1d7f-4cab-8be2-aee7e1774a00
                  next_url: /v2/ingest/status/4cef424c-1d7f-4cab-8be2-aee7e1774a00
                  next_url_delay: 250
        '204':
          description: The data has been ingested successfully. Response has no body
        '400':
          description: Bad Request that fails validations on headers and/or payload
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/BodyDecodeError'
                  - $ref: '#/components/schemas/FirstPartyIngestionGenericError'
                  - $ref: '#/components/schemas/AccountsDataValidationError'
        '401':
          description: Unauthorized (BearerToken in 'Authorization' header fails the authentication)
        5XX:
          description: An unexpected error occurred on the server side
  /v2/ingest/transactions:
    post:
      tags:
        - Ingest First Party Data
      summary: Ingest Transactions V2
      description: |
        This endpoint should be used to ingest customer transactions into the Bud Platform.

        By default, this endpoint is synchronous but can be easily switched to asynchronous using the 'X-Disable-Synchronous' header. 
        Please refer to the following [guide](https://docs-us.thisisbud.com/docs/setup_data_enrichment) to ensure you set up First Party Ingestion 
        correctly for your organisation based on your use case.

        We accept a maximum of 1.000 transactions. If this threshold is not respected, a 400 error is returned.

        We support the ingestion of transactions for multiple customers as part of the same request.

        The detailed location enrichment response is an additional addon, otherwise only tokens are returned 
        (read more about this in the location [guide](https://docs-us.thisisbud.com/docs/locations).
      operationId: v2_ingest_transactions_post
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/V2IngestTransactionsContentType'
        - $ref: '#/components/parameters/DisableSynchronous'
        - $ref: '#/components/parameters/GenerateTransactionIDs'
      requestBody:
        required: true
        content:
          '*/*':
            schema:
              oneOf:
                - $ref: '#/components/schemas/IngestTransactionsV3Request'
                - $ref: '#/components/schemas/IngestPlaidTransactionsRequest'
                - $ref: '#/components/schemas/IngestFinicityTransactionsRequest'
            examples:
              bud-transaction-v3 Request:
                summary: Bud Transaction V3 Example
                value:
                  - customer_id: c3339af9-2426-44d4-9c4d-ddb8fd281e23
                    transactions:
                      - account_id: 275fbbfe-209c-4329-a38b-b324aa386c56
                        transaction_id: cb49a806-c8f1-47e6-9c1d-5172defe97eb
                        description: The RSPCA, Southwater
                        amount: '-10.98'
                        date_time: '2022-10-10T23:00:00Z'
                        currency: USD
                      - account_id: 275fbbfe-209c-4329-a38b-b324aa386c56
                        transaction_id: e0f1c489-a4f0-4820-84d1-a86ecb4199b7
                        description: The RSPCA, Southwater
                        amount: '-10.98'
                        date_time: '2022-11-10T23:00:00Z'
                        currency: USD
                    transaction_windows:
                      - account_id: 275fbbfe-209c-4329-a38b-b324aa386c56
                        start: '2022-10-10T23:00:00Z'
                        end: '2022-11-10T23:00:00Z'
              plaid-transaction-v1 Request:
                summary: Plaid Transaction V1 Example
                value:
                  - customer_id: c3339af9-2426-44d4-9c4d-ddb8fd281e23
                    transactions:
                      - account_id: 275fbbfe-209c-4329-a38b-b324aa386c56
                        transaction_id: cb49a806-c8f1-47e6-9c1d-5172defe97eb
                        amount: 99.99
                        date: '2020-01-31'
                        datetime: '2020-06-17T11:00:00Z'
                        payment_channel: in store
                        name: Apple Store
                        original_description: APPLE.COM/BILL
                        iso_currency_code: USD
                        pending: false
                        category:
                          - Shops
                          - Computers and Electronics
                        merchant_name: Apple
                        location:
                          address: 900 fancy street
                          city: New York
                          region: NY
                          postal_code: '96858'
                          country: US
                    transaction_windows:
                      - account_id: 275fbbfe-209c-4329-a38b-b324aa386c56
                        start: '2022-10-10T23:00:00Z'
                        end: '2022-11-10T23:00:00Z'
              finicity-transaction-v1 Request:
                summary: Finicity Transaction V1 Example
                value:
                  - customer_id: c3339af9-2426-44d4-9c4d-ddb8fd281e23
                    transactions:
                      - accountId: 3009327691
                        id: 100976507328
                        amount: -99.99
                        feeAmount: -0.99
                        status: active
                        description: youtube
                        memo: GOOGLE*YOUTUBEPREMIUM GOOGLE*YOUTUBEPREM
                        type: debit
                        transactionDate: '1642521600'
                        postedDate: '1642521600'
                        effectiveDate: '1642521600'
                        currencySymbol: USD
                        categorization:
                          normalizedPayeeName: Apple
                          city: New York
                          state: NY
                          postal_code: '96858'
                          country: USA
                    transaction_windows:
                      - account_id: '3009327691'
                        start: '2022-10-10T23:00:00Z'
                        end: '2022-11-10T23:00:00Z'
      responses:
        '200':
          description: |
            The synchronous enrichment request has succeeded and enriched transaction returned. 
            A new Task has been created to ingest and fully enrich the given transactions. 
            The generated `task_id` can be used to check the Task's status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestV2SyncResponse'
              example:
                operation_id: v2_ingest_transactions_post
                data:
                  - customer_id: 4cef424c-1d7f-4cab-8be2-aee7e1774a00
                    enriched_transactions:
                      - transaction_id: 4cef424c-1d7f-4cab-8be2-aee7e1774a00
                        account_id: 2f5b2055-6253-4cd0-b646-06788342a609
                        description: PAYPAL GOOGLE*YOUTUBEPREMIUM INTERNVJKK
                        credit_debit_indicator: debit
                        status: booked
                        amount:
                          value: '12.04'
                          currency: USD
                        date_time: 2023-11-08T23:00:00Z00:00
                        tags:
                          - online
                        enrichments:
                          categories:
                            l1:
                              slug: entertainment
                              confidence: '0.99'
                            l2:
                              slug: media_subscriptions
                              confidence: '0.98'
                          merchant:
                            id: 78f20914-afcd-46da-9c0c-27b51a8a7e7b
                            slug: youtube
                            display_name: Youtube
                            logo: http://url/youtube.jpeg
                            tokens:
                              - value: youtube
                                confidence: '0.92'
                          processor:
                            id: 18f63293-0217-4520-bbf0-071dca7a9d04
                            slug: paypal
                            display_name: PayPal
                            logo: http://url/paypal_logo.jpeg
                            tokens:
                              - value: paypal
                                confidence: '0.96'
                          names:
                            - jane doe
                          transaction_types:
                            - card
                            - debit
                      - transaction_id: 275fbbfe-209c-4329-a38b-b324aa386c56
                        account_id: 2f5b2055-6253-4cd0-b646-06788342a609
                        description: STARBACKS NY0812C
                        credit_debit_indicator: debit
                        status: booked
                        amount:
                          value: '6.04'
                          currency: USD
                        date_time: 2023-11-10T23:00:00Z00:00
                        merchant_category_code: '1234'
                        enrichments:
                          categories:
                            l1:
                              slug: eating_out
                              confidence: '0.99'
                            l2:
                              slug: cafes_and_eating_out
                              confidence: '0.98'
                          merchant:
                            tokens:
                              - value: starbacks
                                confidence: '0.92'
                              - value: nystar
                                confidence: '0.25'
                          location:
                            address_lines:
                              - 41-02
                              - Main Street
                              - Flushing
                              - '11355'
                              - New York
                            geolocation:
                              longitude: 40.757551
                              latitude: -73.829289
                metadata:
                  task_id: 4cef424c-1d7f-4cab-8be2-aee7e1774a00
                  next_url: /v2/ingest/status/4cef424c-1d7f-4cab-8be2-aee7e1774a00
                  next_url_delay: 500
        '202':
          description: A new Task has been created to ingest the given transactions. The generated `task_id` can be used to check the Task's status
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestV2AsyncResponse'
              example:
                operation_id: v2_ingest_transactions_post
                metadata:
                  task_id: 4cef424c-1d7f-4cab-8be2-aee7e1774a00
                  next_url: /v2/ingest/status/4cef424c-1d7f-4cab-8be2-aee7e1774a00
                  next_url_delay: 500
        '400':
          description: The server will not process the request due to a client error.
          content:
            application/json:
              schema:
                oneOf:
                  - $ref: '#/components/schemas/BodyDecodeError'
                  - $ref: '#/components/schemas/ValidationError'
        '401':
          description: Unauthorized (BearerToken in 'Authorization' header fails the authentication)
        '503':
          description: An unexpected error occurred on the enrichment server. Sync Only
        '504':
          description: An unexpected timeout occurred on the enrichment server. Sync Only
        5XX:
          description: An unexpected error occurred on the server side
  /ingestion/v3/tasks/{task_id}:
    get:
      tags:
        - Ingest First Party Data
      summary: Retrieve Ingestion Task Status V3
      description: |
        Check the status of an ingest request. Please note that this works for both the Ingest Transactions endpoints And Ingest Accounts endpoints.
        Reports status of the ingestion task, with details for each subtask (1 per customer).
      operationId: v3_ingest_status_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/TaskId'
      responses:
        '200':
          description: The request was successfully processed.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IngestStatusV3Response'
              examples:
                Pending Task:
                  value:
                    operation_id: v3_ingest_status_get
                    data:
                      - customer_id: f89ae931-8cb3-4352-ac9e-4e4572fe5026
                        status: Pending
                    metadata:
                      task_id: 3d592efc-493a-4548-8008-f738fd0877ab
                      status: Pending
                      next_url: /ingestion/v3/tasks/3d592efc-493a-4548-8008-f738fd0877ab
                      next_url_delay: 500
                Successful Task:
                  value:
                    operation_id: v3_ingest_status_get
                    data:
                      - customer_id: f89ae931-8cb3-4352-ac9e-4e4572fe5026
                        status: Completed
                    metadata:
                      task_id: 3d592efc-493a-4548-8008-f738fd0877ab
                      status: Completed
                      ingest_request_id: 213be00c-60ce-9af5-95ab-d450a9ffc2ac
                      ingest_route: v2_ingest_transactions_post
                      ingest_schema: application/bud-transaction-v3+json
                Failed Task:
                  value:
                    operation_id: v3_ingest_status_get
                    data:
                      - customer_id: f89ae931-8cb3-4352-ac9e-4e4572fe5026
                        status: Failed
                        error:
                          accounts[0].currency: 'unexpected currency code: GlkjlkjBP, expected ISO-4217 currency code'
                    metadata:
                      task_id: 3d592efc-493a-4548-8008
                      status: Failed
        '401':
          description: Unauthorized (BearerToken in 'Authorization' header fails the authentication)
        '404':
          description: The task couldn't be found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TaskNotFoundError'
              example:
                operation_id: v2_ingest_status_get
                code_id: task_not_found
                message: Task ID [6c7d06a7-5b40-4556-91d4-6b6d1a7db3f1] does not exist or it has expired
        '405':
          description: The request uses an unexpected HTTP method
        5XX:
          description: An unexpected error occurred on the server side
  /financial/v2/accounts:
    get:
      tags:
        - Retrieve Financial Data
      summary: Retrieve Accounts V2
      description: |
        Retrieves a list of a customer's connected accounts. The result can be filtered using the parameters outlined below.

        > ðŸ“˜ Note:
        >
        > For more information on the Account object, please refer to our handy [guide](https://docs-us.thisisbud.com/docs/accounts).
      operationId: financial_v2_accounts
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/QueryCurrencyUSD'
        - $ref: '#/components/parameters/QueryProvider'
        - in: query
          name: account_type
          schema:
            type: string
          example: current_account
          description: |
            Use this parameter to filter the results returned on the `account_type` associated with each result. Multiple values are accepted. If this parameter is not provided then results of any `account_type` will be returned.

            Currently supported values include (but are not necessarily limited to):
              - `charge_card`
              - `credit_card`
              - `current_account`
              - `e_money`
              - `investment`
              - `loan`
              - `mortgage`
              - `other`
              - `pre_paid_card`
              - `savings`
        - in: query
          name: usage_type
          schema:
            type: string
          example: personal
          description: |
            Use this parameter to filter the results returned on the `usage_type` associated with each result. Multiple values are accepted. If this parameter is not provided then results of any `usage_type` will be returned.

            Currently supported values include (but are not necessarily limited to):
              - `personal`
              - `business`
        - in: query
          name: holder_relationship_type
          schema:
            type: string
          example: joint
          description: |
            Use this parameter to filter the results returned on the `holder_relationship_type` associated with each result. Multiple values are accepted. If this parameter is not provided then results of any `holder_relationship_type` will be returned.

            Currently supported values include (but are not necessarily limited to):
              - `sole`
              - `joint`
              - `delegate`
              - `unknown`
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/USListAccountsV2Response'
              examples:
                Account Data:
                  value:
                    operation_id: financial_v2_accounts
                    data:
                      - account_id: RxsYshVGded4JeilkXgWKdXA
                        currency: USD
                        holder:
                          name: David Smith
                          relationship: unknown
                        account_name: Plaid Checking
                        account_type: current_account
                        usage_type: personal
                        provider: plaid
                        identifiers:
                          plaid_account_id: 6PdjjRP6LmugpBy5NgQvUqpRXMWxzktg3rwrk7
                          plaid_official_name: Plaid Gold Standard 0% Interest Checking
                        balances:
                          - date: '2023-01-12T00:00:00Z'
                            amount:
                              value: '3552.61'
                              currency: USD
                            type: interim_cleared
                            credit_debit_indicator: credit
                          - date: '2023-01-12T00:00:00Z'
                            amount:
                              value: '3552.61'
                              currency: USD
                            type: interim_cleared
                            credit_debit_indicator: credit
                        credit_lines:
                          - date: '2023-01-12T00:00:00Z'
                            type: pre_agreed
                            amount:
                              value: '1000.00'
                              currency: USD
                    metadata:
                      parameters:
                        currencies:
                          - USD
                      result_count: 1
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              examples:
                CustomerID Not Sent:
                  value:
                    operation_id: financial_v2_accounts
                    code_id: failed_validation
                    message: Invalid request payload.
                    errors:
                      X-Customer-Id:
                        - not present
        '401':
          description: Unauthorised
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Unauthorised request
        '500':
          description: Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: 'An error occurred while processing your request. Get in touch with us and provide us your request id: 7ef63242-ba6d-4661-8014-f9eaa9cb2ad8'
  /financial/v2/balances:
    get:
      tags:
        - Retrieve Financial Data
      summary: Retrieve Balances Over Time
      description: |
        List the balances of each bank account for a customer across all ingestion sources. Ordered by balance date.

        It calculates the balance for each date, by iterating from the date the account was last refreshed to the `to` 
        and `from` dates provided. It then checks all the transactions within this range, calculating the balance at 
        the end of each day.

        This endpoint limits the date from which it gets balances by the oldest `transaction_window` on the 
        account. If `transaction_windows` are not present, it is not possible to calculate balances and the endpoint
        returns an empty list.

        You can only request balances within transaction windows, therefore if you ingest transactions without a 
        transaction window, you won't be able to request balance for that time range. However those transactions will be
        used to calculate the balance as well.

        For users ingesting data via the `Ingest Accounts` endpoint, you can increase the range and accuracy of the 
        data supplied from this service by including the transaction_window field upon account ingestion.

        Results are limited to up to 5000 balance items across all accounts.
      operationId: financial_v2_balances_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/QueryFromBudDate'
        - $ref: '#/components/parameters/QueryToBudDate'
        - in: query
          name: granularity
          schema:
            type: string
          example: daily
          description: |
            Specifies in what interval the balance over time should be retrieved.

            Currently supported values include (but are not necessarily limited to):
              - `daily`
              - `weekly`
              - `biweekly`
              - `monthly`
              - `quarterly`
              - `six_monthly`
              - `annually`

            Defaults to `weekly`.
        - $ref: '#/components/parameters/QueryDateField'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetBalancesResponse'
              example:
                operation_id: financial_v2_balances_get
                data:
                  - account_id: 705e95fea8312d9a9b227b682033d55f
                    balances:
                      - date: '2022-11-15T23:59:59Z'
                        booked:
                          amount:
                            value: '900.00'
                            currency: USD
                          type: interim_booked
                          credit_debit_indicator: credit
                        pending:
                          amount:
                            value: '850.00'
                            currency: USD
                          type: expected
                          credit_debit_indicator: credit
                      - date: '2022-11-14T23:59:59Z'
                        booked:
                          amount:
                            value: '950.00'
                            currency: USD
                          type: interim_booked
                          credit_debit_indicator: credit
                        pending:
                          amount:
                            value: '900.00'
                            currency: USD
                          type: expected
                          credit_debit_indicator: credit
                  - account_id: 9df0b46c8ab58277abc432fee26067ad
                    balances:
                      - date: '2022-11-15T23:59:59Z'
                        booked:
                          amount:
                            value: '500'
                            currency: JPY
                          type: interim_booked
                          credit_debit_indicator: credit
                metadata:
                  accounts:
                    5b271e24-9ea5-4d7e-b5da-64f01d32db22:
                      balance_count: 2
                      from: '2022-11-14T23:59:59Z'
                      to: '2022-11-15T23:59:59Z'
                      max_balance:
                        value: '500.00'
                        currency: JPY
                      min_balance:
                        value: '200.00'
                        currency: USD
                    b6e9ea3c-71f9-4572-983a-3e5e85470dad:
                      balance_count: 1
                      from: '2022-11-15T23:59:59Z'
                      to: '2022-11-15T23:59:59Z'
                      max_balance:
                        value: '500.12'
                        currency: USD
                      min_balance:
                        value: '0.00'
                        currency: USD
                  parameters:
                    from: '2020-12-22T00:00:00Z'
                    to: '2022-11-15T00:00:00Z'
                    granularity: daily
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
        '401':
          description: An unauthenticated request was received.
        '500':
          description: Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: financial_v2_balances_get
                code_id: internal_error
                message: Internal server error has occurred.
  /financial/v2/accounts/{account_id}/balances:
    get:
      tags:
        - Retrieve Financial Data
      summary: Retrieve Balances Over Time By Account
      description: |
        List the balances of a specific bank account for a customer across all ingestion sources. Ordered by balance 
        date.

        It calculates the balance for each date, by iterating from the date the account was last refreshed to the `to` 
        and `from` dates provided. It then checks all the transactions within this range, calculating the balance at 
        the end of each day.

        This endpoint limits the date from which it gets balances by the oldest `transaction_window` on the 
        account. If `transaction_windows` are not present, it is not possible to calculate balances and the endpoint
        returns an empty list.

        You can only request balances within transaction windows, therefore if you ingest transactions without a 
        transaction window, you won't be able to request balance for that time range. However those transactions will be
        used to calculate the balance as well.

        For users ingesting data via the `Ingest Accounts` endpoint, you can increase the range and accuracy of the 
        data supplied from this service by including the transaction_window field upon account ingestion.

        Results are limited to up to 5000 balance items.
      operationId: financial_v2_accounts_balances_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/QueryFromBudDate'
        - $ref: '#/components/parameters/QueryToBudDate'
        - $ref: '#/components/parameters/PathAccountID'
        - in: query
          name: granularity
          schema:
            type: string
          example: daily
          description: |
            Specifies in what interval the balance over time should be retrieved.

            Currently supported values include (but are not necessarily limited to):
              - `daily`
              - `weekly`
              - `biweekly`
              - `monthly`
              - `quarterly`
              - `six_monthly`
              - `annually`

            Defaults to `weekly`.
        - $ref: '#/components/parameters/QueryDateField'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetBalancesForAccountIDResponse'
              example:
                operation_id: financial_v2_accounts_balances_get
                data:
                  - date: '2022-11-15T23:59:59Z'
                    booked:
                      amount:
                        value: '900.00'
                        currency: USD
                      type: interim_booked
                      credit_debit_indicator: credit
                    pending:
                      amount:
                        value: '850.00'
                        currency: USD
                      type: expected
                      credit_debit_indicator: credit
                  - date: '2022-11-14T23:59:59Z'
                    booked:
                      amount:
                        value: '950.00'
                        currency: USD
                      type: interim_booked
                      credit_debit_indicator: credit
                    pending:
                      amount:
                        value: '900.00'
                        currency: USD
                      type: expected
                      credit_debit_indicator: credit
                metadata:
                  accounts:
                    balance_count: 2
                    from: '2022-11-14T23:59:59Z'
                    to: '2022-11-15T23:59:59Z'
                    max_balance:
                      value: '500.12'
                      currency: USD
                    min_balance:
                      value: '0.00'
                      currency: USD
                  parameters:
                    from: '2020-12-22T00:00:00Z'
                    to: '2022-11-15T00:00:00Z'
                    granularity: daily
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
        '401':
          description: An unauthenticated request was received.
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestNotFoundResponse'
              example:
                operation_id: financial_v2_accounts_balances_get
                code_id: account_not_found
                message: The specified account could not be found. Please check the account identifier is correct. The account might be closed or suspended.
        '500':
          description: Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: financial_v2_accounts_balances_get
                code_id: internal_error
                message: Internal server error has occurred.
  /financial/v3/balances:
    get:
      tags:
        - Retrieve Financial Data
      summary: Retrieve Balances Over Time
      description: |
        List the balances of each bank account for a customer across all ingestion sources. Ordered by balance date.
        It calculates the balance for each date, by iterating from the date the account was last refreshed to the `to`  and `from` dates provided. It then checks all the transactions within this range, calculating the balance at  the end of each day.
        This endpoint limits the date from which it gets balances by the oldest `transaction_window` on the  account. If `transaction_windows` are not present, it is not possible to calculate balances and the endpoint returns an empty list.
        You can only request balances within transaction windows, therefore if you ingest transactions without a  transaction window, you won't be able to request balance for that time range. However those transactions will be used to calculate the balance as well.
        For users ingesting data via the `Ingest Accounts` endpoint, you can increase the range and accuracy of the  data supplied from this service by including the transaction_window field upon account ingestion.
        The balances selected to use as latest pending & latest booked in the calculation are selected according to a provider specific balance type priority list.
        Results are limited to up to 5000 balance items across all accounts.
      operationId: financial_v3_balances_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/CustomerSecret'
        - $ref: '#/components/parameters/QueryFromBudDate'
        - $ref: '#/components/parameters/QueryToBudDate'
        - in: query
          name: granularity
          schema:
            type: string
          example: daily
          description: |
            Specifies in what interval the balance over time should be retrieved.
            Currently supported values include (but are not necessarily limited to):
              - `daily`
              - `weekly`
              - `biweekly`
              - `monthly`
              - `quarterly`
              - `six_monthly`
              - `annually`

            Defaults to `weekly`.
        - $ref: '#/components/parameters/QueryDateField'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetBalancesV3Response'
              example:
                operation_id: financial_v2_balances_get
                data:
                  - account_id: 705e95fea8312d9a9b227b682033d55f
                    balances:
                      - date: '2022-11-15T23:59:59Z'
                        booked:
                          amount:
                            value: '900.00'
                            currency: GBP
                          credit_debit_indicator: credit
                        pending:
                          amount:
                            value: '850.00'
                            currency: GBP
                          credit_debit_indicator: credit
                      - date: '2022-11-14T23:59:59Z'
                        booked:
                          amount:
                            value: '950.00'
                            currency: GBP
                          credit_debit_indicator: credit
                        pending:
                          amount:
                            value: '900.00'
                            currency: GBP
                          credit_debit_indicator: credit
                  - account_id: 9df0b46c8ab58277abc432fee26067ad
                    balances:
                      - date: '2022-11-15T23:59:59Z'
                        booked:
                          amount:
                            value: '500'
                            currency: JPY
                          credit_debit_indicator: credit
                        pending:
                          amount:
                            value: '500'
                            currency: JPY
                          credit_debit_indicator: credit
                metadata:
                  accounts:
                    5b271e24-9ea5-4d7e-b5da-64f01d32db22:
                      balance_count: 2
                      from: '2022-11-14T23:59:59Z'
                      to: '2022-11-15T23:59:59Z'
                      max_balance:
                        value: '500.00'
                        currency: JPY
                      min_balance:
                        value: '200.00'
                        currency: GBP
                    b6e9ea3c-71f9-4572-983a-3e5e85470dad:
                      balance_count: 1
                      from: '2022-11-15T23:59:59Z'
                      to: '2022-11-15T23:59:59Z'
                      max_balance:
                        value: '500.12'
                        currency: GBP
                      min_balance:
                        value: '0.00'
                        currency: GBP
                  parameters:
                    from: '2020-12-22T00:00:00Z'
                    to: '2022-11-15T00:00:00Z'
                    granularity: daily
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
        '401':
          description: An unauthenticated request was received.
        '500':
          description: Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: financial_v2_balances_get
                code_id: internal_error
                message: Internal server error has occurred.
  /financial/v3/accounts/{account_id}/balances:
    get:
      tags:
        - Retrieve Financial Data
      summary: Retrieve Balances Over Time By Account
      description: |
        List the balances of a specific bank account for a customer across all ingestion sources. Ordered by balance  date.
        It calculates the balance for each date, by iterating from the date the account was last refreshed to the `to`  and `from` dates provided. It then checks all the transactions within this range, calculating the balance at  the end of each day.
        This endpoint limits the date from which it gets balances by the oldest `transaction_window` on the  account. If `transaction_windows` are not present, it is not possible to calculate balances and the endpoint returns an empty list.
        You can only request balances within transaction windows, therefore if you ingest transactions without a  transaction window, you won't be able to request balance for that time range. However those transactions will be used to calculate the balance as well.
        For users ingesting data via the `Ingest Accounts` endpoint, you can increase the range and accuracy of the  data supplied from this service by including the transaction_window field upon account ingestion.
        The balances selected to use as latest pending & latest booked in the calculation are selected according to a provider specific balance type priority list.
        Results are limited to up to 5000 balance items.
      operationId: financial_v3_accounts_balances_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/CustomerSecret'
        - $ref: '#/components/parameters/QueryFromBudDate'
        - $ref: '#/components/parameters/QueryToBudDate'
        - $ref: '#/components/parameters/PathAccountID'
        - in: query
          name: granularity
          schema:
            type: string
          example: daily
          description: |
            Specifies in what interval the balance over time should be retrieved.
            Currently supported values include (but are not necessarily limited to):
              - `daily`
              - `weekly`
              - `biweekly`
              - `monthly`
              - `quarterly`
              - `six_monthly`
              - `annually`

            Defaults to `weekly`.
        - $ref: '#/components/parameters/QueryDateField'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetBalancesForAccountIDV3Response'
              example:
                operation_id: financial_v2_accounts_balances_get
                data:
                  - date: '2022-11-15T23:59:59Z'
                    booked:
                      amount:
                        value: '900.00'
                        currency: GBP
                      credit_debit_indicator: credit
                    pending:
                      amount:
                        value: '850.00'
                        currency: GBP
                      credit_debit_indicator: credit
                  - date: '2022-11-14T23:59:59Z'
                    booked:
                      amount:
                        value: '950.00'
                        currency: GBP
                      credit_debit_indicator: credit
                    pending:
                      amount:
                        value: '900.00'
                        currency: GBP
                      credit_debit_indicator: credit
                metadata:
                  accounts:
                    balance_count: 2
                    from: '2022-11-14T23:59:59Z'
                    to: '2022-11-15T23:59:59Z'
                    max_balance:
                      value: '500.12'
                      currency: GBP
                    min_balance:
                      value: '0.00'
                      currency: GBP
                  parameters:
                    from: '2020-12-22T00:00:00Z'
                    to: '2022-11-15T00:00:00Z'
                    granularity: daily
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
        '401':
          description: An unauthenticated request was received.
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestNotFoundResponse'
              example:
                operation_id: financial_v2_accounts_balances_get
                code_id: account_not_found
                message: The specified account could not be found. Please check the account identifier is correct. The account might be closed or suspended.
        '500':
          description: Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: financial_v2_accounts_balances_get
                code_id: internal_error
                message: Internal server error has occurred.
  /financial/v2/accounts/{account_id}:
    get:
      tags:
        - Retrieve Financial Data
      summary: Retrieve Account By ID V2
      description: |
        Retrieves a customer's connected account by its ID.

        > ðŸ“˜ Note:
        >
        > For more information on the Account object, please refer to our handy [guide](https://docs-us.thisisbud.com/docs/accounts).
      operationId: financial_v2_accounts_account_id
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/PathAccountID'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RetrieveAccountByIDV2Response'
              examples:
                Single Holder Personal Account:
                  value:
                    operation_id: financial_v2_accounts_account_id
                    data:
                      account_id: RxsYshVGded4JeilkXgWKdXA
                      currency: USD
                      holder:
                        name: David Smith
                        relationship: unknown
                      account_name: Plaid Checking
                      account_type: current_account
                      provider: plaid
                      identifiers:
                        plaid_account_id: 6PdjjRP6LmugpBy5NgQvUqpRXMWxzktg3rwrk7
                        plaid_official_name: Plaid Gold Standard 0% Interest Checking
                      balance:
                        date: '2023-01-12T00:00:00Z'
                        booked:
                          amount:
                            value: '3552.61'
                            currency: USD
                          credit_debit_indicator: debit
                        credit_limit:
                          value: '1000.00'
                          currency: USD
                    metadata:
                      parameters:
                        currencies:
                          - USD
                      result_count: 1
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              examples:
                CustomerID Not Sent:
                  value:
                    operation_id: financial_v2_accounts_account_id
                    code_id: failed_validation
                    message: Invalid request payload.
                    errors:
                      X-Customer-Id:
                        - not present
        '401':
          description: Unauthorised
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Unauthorised request
        '500':
          description: Server Error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: 'An error occurred while processing your request. Get in touch with us and provide us your request id: 7ef63242-ba6d-4661-8014-f9eaa9cb2ad8'
  /financial/v2/transactions:
    get:
      tags:
        - Retrieve Financial Data
      summary: Retrieve Enriched Transactions V2
      description: |
        List the transactions for a customer across all ingestion sources. Ordered by `date_time` and then `transaction_id` descending.
      operationId: v2_transactions_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - in: query
          name: date_from
          schema:
            type: string
          example: '2022-02-28'
          description: UTC Date (YYYY-MM-DD) from which the transactions should be returned from.
        - in: query
          name: date_to
          schema:
            type: string
          example: '2022-05-28'
          description: UTC Date (YYYY-MM-DD) from which the transactions should be returned to.
        - in: query
          name: page_size
          schema:
            type: integer
          example: 100
          description: Maximum number of results to be returned. Defaults to 100, maximum is 200
        - in: query
          name: page_token
          schema:
            type: string
          example: eyJvZmZzZXQiOjEwMH0
          description: The token required to fetch a specific page of results. Provided by the `next_page_token` field in the previous request.
        - in: query
          name: account_id
          schema:
            type: string
          example: an_account_id
          description: Identifier of the accounts from which transactions should be returned.
        - in: query
          name: merchant
          schema:
            type: string
          description: Human readable identifier of the merchants for which associated transactions should be returned.
          example: a_merchant_slug
        - in: query
          name: category_l1
          schema:
            type: string
          example: bills
          description: Identifier of the Category Level 1 for which associated transactions should be returned.
        - in: query
          name: category_l2
          schema:
            type: string
          example: tv_and_broadband
          description: Identifier of the Category Level 2 for which associated transactions should be returned.
        - in: query
          name: include_tags
          schema:
            type: array
            items:
              type: string
          example:
            - regular-transaction
          description: Tags for which associated transactions should be returned.
        - in: query
          name: exclude_tags
          schema:
            type: array
            items:
              type: string
          example:
            - benefit
          description: Tags for which associated transactions should not be returned.
        - in: query
          name: updated_after
          schema:
            type: string
          example: '2024-06-01T11:00:00Z'
          description: |
            The `updated_after` parameter lets you retrieve transactions that have been modified since  a specific date and time. This format should follow the RFC3339 standard (e.g., "2024-06-01T11:00:00Z").
            This parameter is particularly useful for keeping local copies of transactions up-to-date. By storing the  timestamp of your last successful fetch, you can request only transactions updated after that point during  subsequent retrievals. 
            This approach ensures you only fetch the latest changes, making the process more streamlined.
      responses:
        '200':
          description: The request was successfully processed.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ListTransactionsResponse'
              examples:
                Multiple Transactions:
                  value:
                    operation_id: v2_transactions_get
                    data:
                      - transaction_id: '692529081002'
                        account_id: 2f5b2055-6253-4cd0-b646-06788342a609
                        provider: finicity
                        description: NETFLIX
                        credit_debit_indicator: credit
                        status: booked
                        amount:
                          value: '19.99'
                          currency: USD
                        date_time: '2023-08-01T12:02:48Z'
                        posted_date_time: '2023-08-01T12:02:48Z'
                        merchant_category_code: '5815'
                        enrichments:
                          merchant:
                            id: 60bf3a60-c872-4f45-909d-c84b140fc6e1
                            slug: netflix
                            display_name: Netflix
                            logo: https://url/netflix.jpeg
                            tokens:
                              - value: netflix
                                confidence: '0.98'
                            website: http://www.netflix.com
                          processor:
                            id: 18f63293-0217-4520-bbf0-071dca7a9d04
                            slug: paypal
                            display_name: PayPal
                            logo: http://url/paypal_logo.jpeg
                            tokens:
                              - value: paypal
                                confidence: '0.96'
                            website: http://www.paypal.com
                          categories:
                            l1:
                              slug: entertainment
                              confidence: '0.86'
                            l2:
                              slug: media_subscriptions
                              confidence: '0.86'
                          regularity:
                            frequency: monthly
                            predicted_date_times:
                              - '2022-09-01T12:02:48Z'
                              - '2022-10-01T12:02:48Z'
                              - '2022-11-01T12:02:48Z'
                            group_label: 13ed070478ef62c3a7baa36c8d042a9d1cdc0fcbb2af93a795f2ad20ad6e9cb5-0
                        tags:
                          - online
                          - regular-transaction
                      - transaction_id: '692529081000'
                        account_id: 2f5b2055-6253-4cd0-b646-06788342a609
                        provider: finicity
                        description: John Doe
                        credit_debit_indicator: debit
                        status: booked
                        amount:
                          value: '12.77'
                          currency: USD
                        date_time: '2023-07-05T12:02:48Z'
                        posted_date_time: '2023-07-05T12:02:48Z'
                        enrichments:
                          categories:
                            l1:
                              slug: general
                              confidence: '0.20'
                            l2:
                              slug: other_general
                              confidence: '0.14'
                          names:
                            - john doe
                      - transaction_id: '692529081001'
                        account_id: 2f5b2055-6253-4cd0-b646-06788342a609
                        provider: finicity
                        description: STARBUCKS NY0812C
                        credit_debit_indicator: debit
                        status: booked
                        amount:
                          value: '6.04'
                          currency: USD
                        date_time: 2023-11-10T23:00:00Z00:00
                        posted_date_time: 2023-11-10T23:00:00Z00:00
                        merchant_category_code: '5814'
                        enrichments:
                          categories:
                            l1:
                              slug: eating_out
                              confidence: '0.99'
                            l2:
                              slug: cafes_and_eating_out
                              confidence: '0.98'
                          merchant:
                            tokens:
                              - value: starbucks
                                confidence: '0.92'
                              - value: nystar
                                confidence: '0.25'
                          location:
                            address_lines:
                              - 41-02
                              - Main Street
                              - Flushing
                              - '11355'
                              - New York
                            geolocation:
                              longitude: 40.757551
                              latitude: -73.829289
                    metadata:
                      results: 2
                      next_page_token: eyJvZmZzZXQiOjEwMH0
                Single Transaction Without Enrichments:
                  value:
                    operation_id: v2_transactions_get
                    data:
                      - transaction_id: a_transaction_id
                        account_id: an_account_id
                        provider: a_bank_account_provider
                        description: a_transaction_description
                        credit_debit_indicator: credit
                        status: pending
                        amount:
                          value: '10.99'
                          currency: USD
                        date_time: '2022-01-02T15:00:00Z'
                        posted_date_time: '2022-01-02T15:00:00Z'
                    metadata:
                      results: 1
                      next_page_token: eyJvZmZzZXQiOjEwMH0
                No Transactions:
                  value:
                    operation_id: v2_transactions_get
                    data: []
                    metadata:
                      results: 0
        '401':
          description: An unauthenticated request was received.
        '405':
          description: The request uses an unexpected HTTP method.
        5XX:
          description: An unexpected error occurred on the server side.
  /corrections/v2/categories:
    post:
      tags:
        - Correct Financial Data
      summary: Correct Transaction Categories V2
      description: |
        Allow a customer to change a transactionâ€™s (and similar transactions') category and/or subcategory.

        If `include_similar` is set to `true`, then all previous and future transactions (i.e. those that are yet to happen yet) that are similar in nature to the specified transaction id will be corrected with the provided category and/or subcategory.

        Similar transactions are determined based on transactions with similar descriptions & amounts.
      operationId: corrections_v2_categories_post
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CustomerCategoryCorrectionRequest'
            example:
              - transaction_id: 7affc586-5600-4434-ac5f-1a845260d7d9
                category_l1: food_and_drink
                category_l2: coffee
                include_similar: false
      responses:
        '200':
          description: The request was successfully processed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CustomerCategoryCorrectionResponse'
              example:
                operation_id: corrections_v2_categories_post
                data:
                  - transaction_id: 7affc586-5600-4434-ac5f-1a845260d7d9
                    category_l1: food_and_drink
                    category_l2: coffee
                    include_similar: false
                metadata:
                  results: 1
        '400':
          description: The request contains an invalid payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: corrections_v2_categories_post
                code_id: validation_error
                message: Bad request payload
                errors:
                  X-Client-ID:
                    - This value should not be blank
        '401':
          description: Unauthorised request
        '405':
          description: An unexpected HTTP method was used
        5XX:
          description: An unexpected error occurred on the server side
  /corrections/v2/categories/similar/{transaction_id}:
    get:
      tags:
        - Correct Financial Data
      summary: Similar Transactions
      description: |-
        This endpoint is used to find similar transactions to the *source* transaction. Similar transactions are  determined based on transactions with similar descriptions & amounts to the source transaction.

        There will **not** be any duplicate transactions in the response. 

        Use the `exclude_source` query parameter to toggle whether the endpoint returns the source transaction in the response. By **default** it will.

        For example if there are **no** similar transactions to transaction A:

        > `exclude_source = true`
        >> The response will contain **0** transactions

        > `exclude_source = false` or not present (**default**)
        >> The response will contain **1** transaction, that being the source transaction A
      operationId: corrections_v2_similar_categories_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/CustomerSecret'
        - $ref: '#/components/parameters/QueryExcludeSource'
        - $ref: '#/components/parameters/PathTransactionID'
      responses:
        '200':
          description: The request was successfully processed.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimilarTransactionsResponse'
              examples:
                Single Similar Transaction:
                  value:
                    operation_id: corrections_v2_similar_categories_get
                    data:
                      - transaction_id: source_transaction_id
                        account_id: 2f5b2055-6253-4cd0-b646-06788342a609
                        provider: finicity
                        description: NETFLIX
                        credit_debit_indicator: credit
                        status: booked
                        amount:
                          value: '19.99'
                          currency: USD
                        date_time: '2023-08-01T12:02:48Z'
                        posted_date_time: '2023-08-01T12:02:48Z'
                        merchant_category_code: '5815'
                        enrichments:
                          merchant:
                            id: 60bf3a60-c872-4f45-909d-c84b140fc6e1
                            slug: netflix
                            display_name: Netflix
                            logo: https://url/netflix.jpeg
                            tokens:
                              - value: netflix
                                confidence: '0.98'
                            website: http://www.netflix.com
                          processor:
                            id: 18f63293-0217-4520-bbf0-071dca7a9d04
                            slug: paypal
                            display_name: PayPal
                            logo: http://url/paypal_logo.jpeg
                            tokens:
                              - value: paypal
                                confidence: '0.96'
                            website: http://www.paypal.com
                          categories:
                            l1:
                              slug: entertainment
                              confidence: '0.86'
                            l2:
                              slug: media_subscriptions
                              confidence: '0.86'
                          regularity:
                            frequency: monthly
                            predicted_date_times:
                              - '2022-09-01T12:02:48Z'
                              - '2022-10-01T12:02:48Z'
                              - '2022-11-01T12:02:48Z'
                            group_label: 13ed070478ef62c3a7baa36c8d042a9d1cdc0fcbb2af93a795f2ad20ad6e9cb5-0
                        tags:
                          - online
                          - regular-transaction
                      - transaction_id: similar_transaction_id_1
                        account_id: 2f5b2055-6253-4cd0-b646-06788342a609
                        provider: finicity
                        description: NETFLIX EXTRA
                        credit_debit_indicator: debit
                        status: booked
                        amount:
                          value: '6.04'
                          currency: USD
                        date_time: 2023-11-10T23:00:00Z00:00
                        posted_date_time: 2023-11-10T23:00:00Z00:00
                        merchant_category_code: '5815'
                        enrichments:
                          categories:
                            l1:
                              slug: entertainment
                              confidence: '0.99'
                            l2:
                              slug: media_subscriptions
                              confidence: '0.98'
                          merchant:
                            tokens:
                              - value: netflix
                                confidence: '0.98'
                    metadata:
                      results: 2
                      exclude_source: false
                Single Similar Transaction Excluding Source:
                  value:
                    operation_id: corrections_v2_similar_categories_get
                    data:
                      - transaction_id: similar_transaction_id_1
                        account_id: 2f5b2055-6253-4cd0-b646-06788342a609
                        provider: finicity
                        description: NETFLIX EXTRA
                        credit_debit_indicator: debit
                        status: booked
                        amount:
                          value: '6.04'
                          currency: USD
                        date_time: 2023-11-10T23:00:00Z00:00
                        posted_date_time: 2023-11-10T23:00:00Z00:00
                        merchant_category_code: '5815'
                        enrichments:
                          categories:
                            l1:
                              slug: entertainment
                              confidence: '0.99'
                            l2:
                              slug: media_subscriptions
                              confidence: '0.98'
                          merchant:
                            tokens:
                              - value: netflix
                                confidence: '0.98'
                    metadata:
                      results: 1
                      exclude_source: true
        '400':
          description: The request was invalid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              examples:
                Missing Customer Secret:
                  value:
                    operation_id: corrections_v2_similar_categories_get
                    code_id: failed_validation
                    message: failed to parse request
                    errors:
                      header.X-Customer-Secret:
                        - This value should not be blank
        '404':
          description: Unknown transaction
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestNotFoundResponse'
              examples:
                Transaction Not Found:
                  value:
                    operation_id: corrections_v2_similar_categories_get
                    code_id: not_found
                    message: transaction not found
        5XX:
          description: An unexpected error occurred on the server side.
  /corrections/v2/merchants/similar/{transaction_id}:
    get:
      tags:
        - Correct Financial Data
      summary: Similar Transactions Including Merchants
      description: |-
        This endpoint is used to find similar transactions to the *source* transaction. Similar transactions are  determined based on transactions with similar descriptions & amounts to the source transaction. In addition, transactions that also have the same merchant are returned. 

        There will **not** be any duplicate transactions in the response. 

        Use the `exclude_source` query parameter to toggle whether the endpoint returns the source transaction in the response. By **default** it will.

        For example if there are **no** similar transactions to transaction A:

        > `exclude_source = true`
        >> The response will contain **0** transactions

        > `exclude_source = false` or not present (**default**)
        >> The response will contain **1** transaction, that being the source transaction A
      operationId: corrections_v2_similar_merchants_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/CustomerSecret'
        - $ref: '#/components/parameters/QueryExcludeSource'
        - $ref: '#/components/parameters/PathTransactionID'
      responses:
        '200':
          description: The request was successfully processed.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SimilarTransactionsIncludingMerchantsResponse'
              examples:
                Single Similar Transaction:
                  value:
                    operation_id: corrections_v2_similar_merchants_get
                    data:
                      - transaction_id: source_transaction_id
                        account_id: 2f5b2055-6253-4cd0-b646-06788342a609
                        provider: finicity
                        description: NETFLIX
                        credit_debit_indicator: credit
                        status: booked
                        amount:
                          value: '19.99'
                          currency: USD
                        date_time: '2023-08-01T12:02:48Z'
                        posted_date_time: '2023-08-01T12:02:48Z'
                        merchant_category_code: '5815'
                        enrichments:
                          merchant:
                            id: 60bf3a60-c872-4f45-909d-c84b140fc6e1
                            slug: netflix
                            display_name: Netflix
                            logo: https://url/netflix.jpeg
                            tokens:
                              - value: netflix
                                confidence: '0.98'
                            website: http://www.netflix.com
                          processor:
                            id: 18f63293-0217-4520-bbf0-071dca7a9d04
                            slug: paypal
                            display_name: PayPal
                            logo: http://url/paypal_logo.jpeg
                            tokens:
                              - value: paypal
                                confidence: '0.96'
                            website: http://www.paypal.com
                          categories:
                            l1:
                              slug: entertainment
                              confidence: '0.86'
                            l2:
                              slug: media_subscriptions
                              confidence: '0.86'
                          regularity:
                            frequency: monthly
                            predicted_date_times:
                              - '2022-09-01T12:02:48Z'
                              - '2022-10-01T12:02:48Z'
                              - '2022-11-01T12:02:48Z'
                            group_label: 13ed070478ef62c3a7baa36c8d042a9d1cdc0fcbb2af93a795f2ad20ad6e9cb5-0
                        tags:
                          - online
                          - regular-transaction
                      - transaction_id: similar_transaction_id_1
                        account_id: 2f5b2055-6253-4cd0-b646-06788342a609
                        provider: finicity
                        description: NETFLIX EXTRA
                        credit_debit_indicator: debit
                        status: booked
                        amount:
                          value: '6.04'
                          currency: USD
                        date_time: 2023-11-10T23:00:00Z00:00
                        posted_date_time: 2023-11-10T23:00:00Z00:00
                        merchant_category_code: '5815'
                        enrichments:
                          categories:
                            l1:
                              slug: entertainment
                              confidence: '0.99'
                            l2:
                              slug: media_subscriptions
                              confidence: '0.98'
                          merchant:
                            tokens:
                              - value: netflix
                                confidence: '0.98'
                    metadata:
                      results: 2
                      exclude_source: false
                Single Similar Transaction Excluding Source:
                  value:
                    operation_id: corrections_v2_similar_merchants_get
                    data:
                      - transaction_id: similar_transaction_id_1
                        account_id: 2f5b2055-6253-4cd0-b646-06788342a609
                        provider: finicity
                        description: NETFLIX EXTRA
                        credit_debit_indicator: debit
                        status: booked
                        amount:
                          value: '6.04'
                          currency: USD
                        date_time: 2023-11-10T23:00:00Z00:00
                        posted_date_time: 2023-11-10T23:00:00Z00:00
                        merchant_category_code: '5815'
                        enrichments:
                          categories:
                            l1:
                              slug: entertainment
                              confidence: '0.99'
                            l2:
                              slug: media_subscriptions
                              confidence: '0.98'
                          merchant:
                            tokens:
                              - value: netflix
                                confidence: '0.98'
                    metadata:
                      results: 1
                      exclude_source: true
        '400':
          description: The request was invalid
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              examples:
                Missing Customer Secret:
                  value:
                    operation_id: corrections_v2_similar_merchants_get
                    code_id: failed_validation
                    message: failed to parse request
                    errors:
                      header.X-Customer-Secret:
                        - This value should not be blank
        '404':
          description: Unknown transaction
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestNotFoundResponse'
              examples:
                Transaction Not Found:
                  value:
                    operation_id: corrections_v2_similar_merchants_get
                    code_id: not_found
                    message: transaction not found
        5XX:
          description: An unexpected error occurred on the server side.
  /aggregations/v2/totals/categories:
    get:
      tags:
        - Enrichment Totals
      summary: Retrieve Category Totals V2
      description: |
        Provides a customerâ€™s total income and expenditure for each l1 and l2 category, over a given time period.
        L1 and l2 categories can be filtered using the category query parameter.
        Example:
          - 'shopping'
          - 'shopping.clothing_and_accessories'

        Each income and expenditure total is separated by currency, as we cannot sum totals in different currencies.
      operationId: v2_category_totals_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/CategoryTotalsQueryFromTimestamp'
        - $ref: '#/components/parameters/CategoryTotalsQueryToTimestamp'
        - $ref: '#/components/parameters/QueryBudCategory'
        - $ref: '#/components/parameters/QueryCurrency'
        - in: query
          name: include_l2
          schema:
            type: boolean
          example: true
          description: Whether to include the L2 categories in result. Defaults to false.
        - $ref: '#/components/parameters/CategoryTotalsQueryCategoryFilter'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoriesTotalV2Response'
              example:
                operation_id: v2_category_totals_get
                data:
                  - name: shopping
                    credit_total:
                      - amount:
                          value: '357.90'
                          currency: USD
                        transaction_count: 1
                    debit_total:
                      - amount:
                          value: '397.80'
                          currency: USD
                        transaction_count: 2
                    l2_totals:
                      - name: clothing_and_accessories
                        credit_total:
                          - amount:
                              value: '357.90'
                              currency: USD
                            transaction_count: 1
                        debit_total:
                          - amount:
                              value: '397.80'
                              currency: USD
                            transaction_count: 2
                metadata:
                  from: '2023-05-21T07:20:50.52Z'
                  to: '2023-06-21T07:20:50.52Z'
        '400':
          description: The request contains an invalid payload
        '401':
          description: An unauthenticated request was received
        5XX:
          description: An unexpected error occurred on the server side
  /aggregations/v2/totals/categories/trends:
    get:
      tags:
        - Enrichment Totals
      summary: Retrieve Category Totals Trends
      description: |
        Provides category totals for desired categories over a given time period of time with a given granularity.

        L1 and l2 categories can be filtered using the category query parameter.
        Example:
          - 'shopping'
          - 'shopping.hobbies'
        Each income and expenditure total is separated by currency, as we cannot sum totals in different currencies.

        Can be used for producing graphs of category totals over time.
      operationId: v2_category_totals_trends_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/CategoryTotalsQueryFromTimestamp'
        - $ref: '#/components/parameters/CategoryTotalsQueryToTimestamp'
        - $ref: '#/components/parameters/QueryCurrency'
        - $ref: '#/components/parameters/QueryBudCategory'
        - in: query
          name: include_l2
          schema:
            type: boolean
          example: true
          description: Whether to include the L2 categories in result. Defaults to false.
        - in: query
          name: granularity
          schema:
            type: string
          example: monthly
          description: |
            Specifies in what interval the balance over time should be retrieved.

            Currently supported values include (but are not necessarily limited to):
              - `daily`
              - `weekly`
              - `biweekly`
              - `monthly`
              - `quarterly`
              - `six_monthly`
              - `annually`

              Defaults to `monthly`.
        - $ref: '#/components/parameters/CategoryTotalsQueryCategoryFilter'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoriesTotalTrendsV2Response'
              example:
                operation_id: v2_category_totals_get
                data:
                  - from: '2023-05-21T07:20:50.52Z'
                    to: '2023-05-21T07:20:50.52Z'
                    data:
                      - name: shopping
                        credit_total:
                          - amount:
                              value: '357.90'
                              currency: USD
                            transaction_count: 1
                        debit_total:
                          - amount:
                              value: '397.80'
                              currency: USD
                            transaction_count: 2
                        l2_totals:
                          - name: clothing_and_accessories
                            credit_total:
                              - amount:
                                  value: '357.90'
                                  currency: USD
                                transaction_count: 1
                            debit_total:
                              - amount:
                                  value: '397.80'
                                  currency: USD
                                transaction_count: 2
        '400':
          description: The request contains an invalid payload
        '401':
          description: An unauthenticated request was received
        5XX:
          description: An unexpected error occurred on the server side
  /v2/merchants/totals:
    get:
      tags:
        - Enrichment Totals
      summary: Retrieve Merchant Totals V2
      description: |
        Provides a customerâ€™s total debit and credit amounts for each merchant.
      operationId: v2_merchants_totals_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - in: header
          name: X-From
          required: false
          schema:
            type: string
          example: '2022-02-28'
          description: |
            The date from when results are to be retrieved in the format [ISO-8601](https://www.iso.org/iso-8601-date-and-time-format.html).

            When ommited from the request, a default value of 30 days from before today's date will be used.

            Example: `2022-02-28`
        - in: header
          name: X-To
          required: false
          schema:
            type: string
          example: '2022-01-28'
          description: |
            The date up to when results are to be retrieved in the format [ISO-8601](https://www.iso.org/iso-8601-date-and-time-format.html).

            When ommited from the request, a default value of today's date will be used.

            Example: `2022-01-28`
        - $ref: '#/components/parameters/MerchantsTotalsIncludeCategories'
        - $ref: '#/components/parameters/MerchantsTotalsExcludeCategories'
      responses:
        '200':
          description: The request was successfully processed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MerchantTotalsResponseV2'
              example:
                operation_id: v2_merchants_totals_get
                data:
                  - merchant:
                      id: walmart
                      logo: https://thisisbud.com/merchants/walmart.png
                      name: Walmart
                    total_debit:
                      value: '130.23'
                      currency: USD
                    total_credit:
                      value: '12.21'
                      currency: USD
                    transaction_count: 8
                  - merchant:
                      id: target
                      logo: https://thisisbud.com/merchants/target.png
                      name: Target
                    total_debit:
                      value: '240.23'
                      currency: USD
                    total_credit:
                      value: '6.56'
                      currency: USD
                    transaction_count: 10
                metadata:
                  from: '2018-01-01'
                  to: '2018-01-17'
                  results: 2
        '204':
          description: No transactions found
        '400':
          description: The request contains an invalid payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: v2_merchants_totals_get
                code_id: failed_validation
                message: Failed validation
                errors:
                  client_id:
                    - This value should not be blank
        '401':
          description: Unauthorised request
        '405':
          description: An unexpected HTTP method was used
        5XX:
          description: An unexpected error occurred on the server side
  /resources/v2/categories/models:
    get:
      tags:
        - Enrichment Resources
      summary: Retrieve Available Categorisation Models V2
      description: Retrieve the available Bud categorisation models.
      operationId: resources_v2_models_get
      parameters:
        - $ref: '#/components/parameters/ClientId'
      security:
        - OAuth2: []
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetModelsResponse'
              example:
                operation_id: resources_v2_models_get
                data:
                  - name: us-v1
                    description: 'A US categorisation model. This model can be used for the following use cases: affordability assessments, collections assessments, affordability monitoring, customer engagement and product recommendations.'
        '400':
          description: The request contains an invalid payload
        '401':
          description: Unauthorised request
        '405':
          description: An unexpected HTTP method was used
        5XX:
          description: An unexpected error occurred on the server side
  /resources/v2/categories:
    get:
      tags:
        - Enrichment Resources
      summary: Retrieve Categories V2
      description: Retrieve a list of primary and secondary categories supported by Bud's categorisation model.
      operationId: resources_v2_categories_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - in: query
          name: format
          schema:
            type: string
            enum:
              - map
              - flat
            default: flat
          description: |
            Determines if the response will be structured:
              - As a flat object where all categories and subcategories are listed separately under different fields. See the example response `Flat Response`.
              - As a map where all categories are listed as objects themselves with their respective subcategories listed in fields within the category objects. See the example response `Map Response`.
        - in: query
          name: model
          schema:
            type: string
          description: |
            The name of the model for which categories should be returned. See the *List Categorisation Models V2* endpoint for available model names.
        - in: query
          name: label
          schema:
            type: string
          description: Filter out categories that do not have the specified label. If unset, endpoint will include all labels
          example: essential
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetCategoriesV2Response'
              examples:
                flat:
                  value:
                    operation_id: resources_v2_categories_get
                    data:
                      categories:
                        - travel
                      subcategories:
                        - flights_and_airport_expenses
                        - holiday_and_travel_expenses
                    metadata:
                      model:
                        name: us-v1
                        description: 'A US categorisation model. This model can be used for the following use cases: affordability assessments, collections assessments, affordability monitoring, customer engagement and product recommendations.'
                map:
                  value:
                    operation_id: resources_v2_categories_get
                    data:
                      - name: travel
                        subcategories:
                          - name: flights_and_airport_expenses
                          - name: holiday_and_travel_expenses
                    metadata:
                      model:
                        name: uk-v2
                        description: 'A US categorisation model. This model can be used for the following use cases: affordability assessments, collections assessments, affordability monitoring, customer engagement and product recommendations.'
        '400':
          description: The request contains an invalid payload
        '401':
          description: Unauthorised request
        '404':
          description: Category not found
        '405':
          description: An unexpected HTTP method was used
        5XX:
          description: An unexpected error occurred on the server side
  /v1/categories:
    get:
      tags:
        - Enrichment Resources
      summary: Retrieve Categories
      deprecated: true
      description: |
        Retrieve the category taxonomies related to Bud's categorisation service
      operationId: categories_get
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - in: query
          name: format
          schema:
            type: string
            enum:
              - map
              - flat
          description: |
            Determines if the response will be structured:
              - As a flat object where all categories and subcategories are listed separately under different fields. See the example response `Flat Response`.
              - As a map where all categories are listed as objects themselves with their respective subcategories listed in fields within the category objects. See the example response `Map Response`.
      security:
        - OAuth2: []
      responses:
        '200':
          description: The operation was successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CategoriesResponse'
              examples:
                Flat Response:
                  value:
                    operation_id: categories_double_cat_get
                    data:
                      categories:
                        - dependent_costs
                        - other_expenses
                        - entertainment
                        - transport
                        - banking
                        - eating_out
                        - insurance
                        - borrowing_and_loans
                        - shopping
                        - income
                        - charity
                        - health_and_personal_care
                        - home
                        - groceries
                        - holidays_and_travel
                        - pensions_savings_and_investments
                        - education
                        - transfers
                        - bills
                        - general
                      subcategories:
                        - other_dependent_costs
                        - children_and_babies
                        - childcare
                        - business_expenses
                        - financial_and_legal_expenses
                        - postage_and_office_supplies
                        - other_expenses
                        - amusement
                        - hobbies
                        - books_and_reading
                        - events
                        - gambling
                        - media_subscriptions
                        - cinema
                        - arts_and_culture
                        - nightclubs
                        - other_entertainment
                        - vehicle
                        - transport
                        - petrol
                        - parking_and_tolls
                        - service_stations
                        - vehicle_hire
                        - other_transport
                        - general_banking
                        - deposits_and_withdrawals
                        - interest
                        - refunds
                        - other_banking
                        - bars_and_pubs
                        - coffee
                        - restaurants
                        - other_eating_out
                        - business_insurance
                        - health_and_life_insurance
                        - house_or_home_insurance
                        - pet_insurance
                        - travel_insurance
                        - other_insurance
                        - vehicle_insurance
                        - loans
                        - car_loan
                        - credit_cards
                        - debt_management
                        - other_credit
                        - student_loan
                        - other_borrowing_and_loans
                        - flowers_and_gifts
                        - clothing_and_accessories
                        - technology
                        - general_stores
                        - online_shopping
                        - other_shopping
                        - other_income
                        - benefits_and_social_security
                        - child_support_income
                        - investment_income
                        - employment_income
                        - pension_income
                        - rental_income
                        - charity
                        - other_charity
                        - healthcare
                        - beauty
                        - sports_and_fitness
                        - pharmacies_and_health_products
                        - other_health_and_personal_care
                        - home_maintenance
                        - furniture_and_appliances
                        - gardening
                        - laundry
                        - other_home
                        - pets
                        - supermarkets_and_convenience
                        - speciality_groceries
                        - other_groceries
                        - accommodation_and_travel_agencies
                        - flights_and_air_travel_purchases
                        - other_travel
                        - other_holidays_and_travel
                        - investments
                        - pension_contribution
                        - savings
                        - other_pensions_savings_and_investments
                        - other_education
                        - education_and_school_fees
                        - transfers_in
                        - internal_transfers
                        - transfers_out
                        - other_transfers
                        - taxes
                        - mortgage_and_rent
                        - utilities
                        - telecom
                        - other_bills
                        - other_general
                Map Response:
                  value:
                    operation_id: categories_double_cat_get
                    data:
                      - name: dependent_costs
                        subcategories:
                          - name: other_dependent_costs
                          - name: children_and_babies
                          - name: childcare
                      - name: other_expenses
                        subcategories:
                          - name: business_expenses
                          - name: financial_and_legal_expenses
                          - name: postage_and_office_supplies
                          - name: other_expenses
                      - name: entertainment
                        subcategories:
                          - name: amusement
                          - name: hobbies
                          - name: books_and_reading
                          - name: events
                          - name: gambling
                          - name: media_subscriptions
                          - name: cinema
                          - name: arts_and_culture
                          - name: nightclubs
                          - name: other_entertainment
                      - name: transport
                        subcategories:
                          - name: vehicle
                          - name: transport
                          - name: petrol
                          - name: parking_and_tolls
                          - name: service_stations
                          - name: vehicle_hire
                          - name: other_transport
                      - name: banking
                        subcategories:
                          - name: general_banking
                          - name: deposits_and_withdrawals
                          - name: interest
                          - name: refunds
                          - name: other_banking
                      - name: eating_out
                        subcategories:
                          - name: bars_and_pubs
                          - name: coffee
                          - name: restaurants
                          - name: other_eating_out
                      - name: insurance
                        subcategories:
                          - name: business_insurance
                          - name: health_and_life_insurance
                          - name: house_or_home_insurance
                          - name: pet_insurance
                          - name: travel_insurance
                          - name: other_insurance
                          - name: vehicle_insurance
                      - name: borrowing_and_loans
                        subcategories:
                          - name: loans
                          - name: car_loan
                          - name: credit_cards
                          - name: debt_management
                          - name: other_credit
                          - name: student_loan
                          - name: other_borrowing_and_loans
                      - name: shopping
                        subcategories:
                          - name: flowers_and_gifts
                          - name: clothing_and_accessories
                          - name: technology
                          - name: general_stores
                          - name: online_shopping
                          - name: other_shopping
                      - name: income
                        subcategories:
                          - name: other_income
                          - name: benefits_and_social_security
                          - name: child_support_income
                          - name: investment_income
                          - name: employment_income
                          - name: pension_income
                          - name: rental_income
                      - name: charity
                        subcategories:
                          - name: charity
                          - name: other_charity
                      - name: health_and_personal_care
                        subcategories:
                          - name: healthcare
                          - name: beauty
                          - name: sports_and_fitness
                          - name: pharmacies_and_health_products
                          - name: other_health_and_personal_care
                      - name: home
                        subcategories:
                          - name: home_maintenance
                          - name: furniture_and_appliances
                          - name: gardening
                          - name: laundry
                          - name: other_home
                          - name: pets
                      - name: groceries
                        subcategories:
                          - name: supermarkets_and_convenience
                          - name: speciality_groceries
                          - name: other_groceries
                      - name: holidays_and_travel
                        subcategories:
                          - name: accommodation_and_travel_agencies
                          - name: flights_and_air_travel_purchases
                          - name: other_travel
                          - name: other_holidays_and_travel
                      - name: pensions_savings_and_investments
                        subcategories:
                          - name: investments
                          - name: pension_contribution
                          - name: savings
                          - name: other_pensions_savings_and_investments
                      - name: education
                        subcategories:
                          - name: other_education
                          - name: education_and_school_fees
                      - name: transfers
                        subcategories:
                          - name: transfers_in
                          - name: internal_transfers
                          - name: transfers_out
                          - name: other_transfers
                      - name: bills
                        subcategories:
                          - name: taxes
                          - name: mortgage_and_rent
                          - name: utilities
                          - name: telecom
                          - name: other_bills
                      - name: general
                        subcategories:
                          - name: other_general
        '400':
          description: The request contains an invalid payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: categories_double_cat_get
                code_id: failed_validation
                message: Failed validation
                errors:
                  client_id:
                    - This value should not be blank
        '401':
          description: Unauthorised request
        '405':
          description: An unexpected HTTP method was used
        5XX:
          description: An unexpected error occurred on the server side
  /v1/regular-transactions:
    get:
      tags:
        - Regular Payments Finder
      summary: Retrieve Regular Transactions
      description: |
        Provides a list of customer transactions that occur regularly over various different periodicities.
      operationId: regular_transactions_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
      responses:
        '200':
          description: The request was successfully processed
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RegularTransactionsResponse'
              example:
                operation_id: regular_transactions_get
                data:
                  - label: 7fa6c13ac15468dd61cc7680f005b1dcdd9504d7-0
                    period: monthly
                    score: '0.9892'
                    transactions:
                      - provider: Amex
                        account_id: 688cb2e1-fca9-4d77-bbd3-604abb3c9d46
                        transaction_id: 3c6f2abd-87ff-4b57-b7c7-c500926571e7
                        transaction_description: Bank credit paypal
                        date: 2019-07-04T00:00:00+0000
                        amount:
                          amount: '49.99'
                          currency: USD
                        credit_debit_indicator: Debit
                      - provider: Amex
                        account_id: 688cb2e1-fca9-4d77-bbd3-604abb3c9d46
                        transaction_id: d06bef46-7500-4d34-a419-bb2c5e4ee9fa
                        transaction_description: Bank credit paypal
                        date: 2019-08-04T00:00:00+0000
                        amount:
                          amount: '52.3'
                          currency: USD
                        credit_debit_indicator: Debit
                  - label: 8a29913437a6d2e72a9576a15593f43d92cfc2eb-0
                    period: monthly
                    score: '0.9892'
                    transactions:
                      - provider: Chase
                        account_id: 688cb2e1-fca9-4d77-bbd3-604abb3c9d46
                        transaction_id: c5a50ce9-5523-47b4-8c08-3cd8e30e34a6
                        transaction_description: Rent
                        date: 2019-06-02T00:00:00+0000
                        amount:
                          amount: '1325'
                          currency: USD
                        credit_debit_indicator: Debit
                      - provider: Chase
                        account_id: 688cb2e1-fca9-4d77-bbd3-604abb3c9d46
                        transaction_id: 70778a02-ea30-4465-b651-65189fd3c51d
                        transaction_description: Rent
                        date: 2019-07-02T00:00:00+0000
                        amount:
                          amount: '1325'
                          currency: USD
                        credit_debit_indicator: Debit
        '204':
          description: No transactions found
        '400':
          description: The request contains an invalid payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: regular_transactions_get
                code_id: failed_validation
                message: Failed validation
                errors:
                  client_id:
                    - This value should not be blank
        '401':
          description: Unauthorised request
        '405':
          description: An unexpected HTTP method was used
        5XX:
          description: An unexpected error occurred on the server side
  /v2/future-transactions:
    get:
      tags:
        - Regular Payments Finder
      summary: Retrieve Future Forecasted Transactions V2
      description: |
        Provides a list of transactions predicted to occur in the next specified number of months. Currently the following periods are supported:
        - `daily`
        - `weekly`
        - `biweekly`
        - `monthly`
        - `quarterly`
        - `unknown`
      operationId: v2_future_transactions_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/FutureTransactionsMonthsProjection'
        - $ref: '#/components/parameters/FutureTransactionsChangePercentage'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FutureTransactionV2Response'
              example:
                operation_id: v2_future_transactions_get
                data:
                  - transaction_id: fdcc55c6-f347-4abc-8c66-61ff290d8bd4
                    account_id: fdcc55c6-f347-4abc-8c66-61ff290d8bd4
                    transaction_description: Bud
                    label: 8a29913437a6d2e72a9576a15593f43d92cfc2eb-0
                    period: monthly
                    date_time: '2019-07-01T01:00:00Z'
                    amount:
                      value: '100.00'
                      currency: USD
                    credit_debit_indicator: credit
                    confidence: '0.9892'
                    future_transactions:
                      - date: '2022-08-01'
                        amount:
                          value: '102.00'
                          currency: USD
                      - date: '2022-09-01'
                        amount:
                          value: '104.04'
                          currency: USD
                      - date: '2022-10-01'
                        amount:
                          value: '106.12'
                          currency: USD
                      - date: '2022-11-01'
                        amount:
                          value: '108.24'
                          currency: USD
                metadata:
                  results: 1
                  months: 4
                  change_percentages:
                    - l2: bills
                      value: 2
        '204':
          description: No transactions
        '400':
          description: Bad request
        '401':
          description: Unauthorized request
  /v2/income:
    get:
      tags:
        - Income Finder
      summary: Retrieve Income Transactions V2
      description: |
        Provides a list of a customer's income based transactions found within their connected accounts, and predicts whether each income transaction is related to a customer's `salary_or_wages`. Any income which is not salary or wages is given the type `other_incoming`, which can include other income sources such as investments or pension income.

        When `X-From` is omitted from the request, a default value of 9 months from before today's date will be used.
        When `X-To` is omitted from the request, a default value of today's date will be used.

        **Notes:**
        - Transactions with multiple currencies are supported, but the statistics are currently only calculated for one currency. The endpoint takes the currency of the first transaction and ignores non-matching currencies in its calculations.
        - In contrast to the V1 endpoint, Income Finder V2 no longer filters income transactions to only return the latest per reference.
      operationId: v2_income_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/SmartFinderFrom'
        - $ref: '#/components/parameters/SmartFinderTo'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IncomeResponseV2'
              example:
                operation_id: v2_income_get
                data:
                  transactions:
                    - transaction_id: fdcc55c6-f347-4abc-8c66-61ff290d8bd4
                      account_id: fdcc55c6-f347-4abc-8c66-61ff290d8bd4
                      transaction_description: PayPal* Bud
                      provider: Chase
                      date: 2021-01-11T01:00:00+0100
                      amount:
                        value: '1234.56'
                        currency: USD
                      credit_debit_indicator: Credit
                      enrichment:
                        categories:
                          l1:
                            - name: income
                              confidence: '0.8057'
                              label: Income
                          l2:
                            - name: employment_income
                              confidence: '0.7811'
                              label: Employment income
                          l3:
                            - name: salary_and_wages
                              confidence: '0.6805'
                              label: Salary and wages
                        merchant:
                          id: bud
                          name: Bud
                          logo: https://thisisbud.com/merchants/bud.png
                          confidence: '0.9501'
                        processor:
                          id: paypal
                          name: PayPal
                          logo: https://thisisbud.com/processors/paypal.png
                          confidence: '0.9702'
                        income:
                          type: salary_and_wages
                          confidence: '0.9408'
                  statistics:
                    average:
                      monthly:
                        income:
                          value: '1234.56'
                          currency: USD
                        regular_income:
                          value: '1234.56'
                          currency: USD
                metadata:
                  from: '2021-01-01'
                  to: '2021-01-31'
                  results: 1
        '204':
          description: No transactions
        '400':
          description: Bad request
        '401':
          description: Unauthorised request
        '404':
          description: No transactions found
        '405':
          description: An unexpected HTTP method was used
        5XX:
          description: An unexpected error occurred on the server side
  /v1/benefits:
    get:
      tags:
        - Income Finder
      summary: Retrieve Benefits Transactions
      description: |
        Provides a list of a customer's benefits based transactions found within their connected accounts.

        When `X-From` is omitted from the request, a default value of 30 days from before today's date will be used.
        When `X-To` is omitted from the request, a default value of today's date will be used.
      operationId: v1_benefits_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/SmartFinderFrom'
        - $ref: '#/components/parameters/SmartFinderTo'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BenefitsResponseV1'
              example:
                operation_id: v1_benefits_get
                data:
                  - transaction_id: fdcc55c6-f347-4abc-8c66-61ff290d8bd4
                    account_id: fdcc55c6-f347-4abc-8c66-61ff290d8bd4
                    transaction_description: CHASE DWP DLA GBR
                    provider: Chase
                    date: 2022-03-21T01:00:00+0100
                    amount:
                      amount: '333.28'
                      currency: USD
                    credit_debit_indicator: Credit
                    benefit:
                      type: disability_living_allowance
                      display_name: Disability Living Allowance
                metadata:
                  from: '2022-03-19'
                  to: '2022-04-19'
                  results: 1
        '204':
          description: No transactions
        '400':
          description: Bad request
        '401':
          description: Unauthorised request
        '405':
          description: An unexpected HTTP method was used
        5XX:
          description: An unexpected error occurred on the server side
  /v1/benefits/totals:
    get:
      tags:
        - Income Finder
      summary: Retrieve Benefits Totals
      description: |
        Provides a customers' total income under each detected benefit type.

        When `X-From` is omitted from the request, a default value of 30 days from before today's date will be used.
        When `X-To` is omitted from the request, a default value of today's date will be used.
      operationId: v1_benefits_totals_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/SmartFinderFrom'
        - $ref: '#/components/parameters/SmartFinderTo'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BenefitsTotalsResponseV1'
              example:
                operation_id: v1_benefits_get_totals
                data:
                  - benefit:
                      type: disability_living_allowance
                      display_name: Disability Living Allowance
                    total_credit:
                      value: '333.28'
                      currency: USD
                metadata:
                  from: '2022-03-19'
                  to: '2022-04-19'
                  results: 1
        '204':
          description: No transactions found
        '400':
          description: The request contains an invalid payload
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: merchants_totals_get
                code_id: failed_validation
                message: Failed validation
                errors:
                  client_id:
                    - This value should not be blank
        '401':
          description: Unauthorised request
        '405':
          description: An unexpected HTTP method was used
        5XX:
          description: An unexpected error occurred on the server side
  /v1/loans:
    get:
      tags:
        - Loan Finder
      summary: Retrieve Loan Transactions
      description: |
        Provides a list of a customers' outgoing loan transactions found within their connected accounts.

        When `X-From` is omitted from the request, a default value of 30 days from before today's date will be used.
        When `X-To` is omitted from the request, a default value of today's date will be used.

        **Notes:**
        - Transactions with multiple currencies are supported, but the statistics are currently only calculated for one currency. The endpoint takes the currency of the first transaction and ignores non-matching currencies in its calculations.
      operationId: v1_loans_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/SmartFinderFrom'
        - $ref: '#/components/parameters/SmartFinderTo'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LoansResponseV1'
              example:
                operation_id: v1_loans_get
                data:
                  transactions:
                    - transaction_id: fdcc55c6-f347-4abc-8c66-61ff290d8bd4
                      account_id: fdcc55c6-f347-4abc-8c66-61ff290d8bd4
                      transaction_description: Bud Loan Repayment
                      provider: Chase
                      date: 2022-03-21T01:00:00+0100
                      amount:
                        value: '133.28'
                        currency: USD
                      credit_debit_indicator: Debit
                      merchant:
                        id: bud
                        name: Bud
                        logo: https://thisisbud.com/merchants/bud.png
                        confidence: '0.875'
                  statistics:
                    total_debit:
                      value: '133.28'
                      currency: USD
                metadata:
                  results: 1
                  from: '2022-03-19'
                  to: '2022-04-19'
        '204':
          description: No transactions
        '400':
          description: Bad request
        '401':
          description: Unauthorised request
        '405':
          description: An unexpected HTTP method was used
        5XX:
          description: An unexpected error occurred on the server side
  /v1/debt-collection:
    get:
      tags:
        - Debt Collection Finder
      summary: Retrieve Debt Collection Transactions
      description: |
        Provides a list of a customers' outgoing debt collection transactions found within their connected accounts.

        When `X-From` is omitted from the request, a default value of 30 days from before today's date will be used.
        When `X-To` is omitted from the request, a default value of today's date will be used.

        **Notes:**
        - Transactions with multiple currencies are supported, but the statistics are currently only calculated for one currency. 
          The endpoint takes the currency of the first transaction and ignores non-matching currencies in its calculations.
      operationId: v1_debt_collection_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/SmartFinderFrom'
        - $ref: '#/components/parameters/SmartFinderTo'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DebtCollectionResponseV1'
              example:
                operation_id: v1_debt_collection_get
                data:
                  transactions:
                    - transaction_id: fdcc55c6-f347-4abc-8c66-61ff290d8bd4
                      account_id: fdcc55c6-f347-4abc-8c66-61ff290d8bd4
                      transaction_description: Bud Debt Collection Payment
                      provider: Chase
                      date: 2021-04-11T01:00:00+0100
                      amount:
                        value: '100.00'
                        currency: USD
                      credit_debit_indicator: Debit
                      merchant:
                        id: debtcollector
                        name: Debt Collector
                        logo: https://thisisbud.com/merchants/debtcollector.png
                        confidence: '0.12345'
                  statistics:
                    total_debit:
                      value: '100.00'
                      currency: USD
                    income_relations:
                      expense_to_income_ratio: '0.100'
                      total_income:
                        value: '1000.00'
                        currency: USD
                metadata:
                  results: 1
                  from: '2022-03-19'
                  to: '2022-04-19'
        '204':
          description: No transactions
        '400':
          description: Bad request
        '401':
          description: Unauthorised request
        '405':
          description: An unexpected HTTP method was used
        5XX:
          description: An unexpected error occurred on the server side
  /insights/v2/products:
    get:
      tags:
        - Product Finder
      summary: Retrieve Financial Products V2
      description: |
        Financial Products returns the finance oriented products and services that a customer uses. 
        This endpoint generates data using a customer's transaction history.

        Financial Products detects the following types of products and services: 
        - Loans
        - Buy Now, Pay Later (BNPL)
        - Mortgages
        - Insurance products
        - Credit Cards
        - Private Pensions
        - Savings and Investments

        > ðŸš§ Limitations
        > 
        > Financial Products are only identified from debit transactions.
      operationId: insights_v2_products
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/QueryFromDate'
        - $ref: '#/components/parameters/QueryToDate'
      responses:
        '200':
          description: OK - everything worked as expected
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetProductsResponseV2'
              example:
                operation_id: insights_v2_products
                data:
                  - type:
                      - credit_card
                    merchant:
                      id: americanexpress
                      logo: https://assets.thisisbud.com/bud-datasci-images/merchant_logos/5e190e47-3ed5-4549-a29a-7f832862fd3a/v1/americanexpress.jpeg
                      name: American Express
                    amount:
                      value: '300.00'
                      currency: USD
                    period: unknown
                  - type:
                      - insurance
                    merchant:
                      id: unitedhealthgroup
                      logo: https://assets.thisisbud.com/bud-datasci-images/merchant_logos/3d46d358-6600-4eb8-a23e-2c548ffa2de0/v1/unitedhealthgroup.jpeg
                      name: UnitedHealth Group
                    amount:
                      value: '59.99'
                      currency: USD
                    period: monthly
                metadata:
                  from: '2022-09-03T11:28:22.00Z'
                  to: '2023-03-03T11:28:22.00Z'
                  results: 2
        '400':
          description: Bad Request - the request was unacceptable
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: insights_v2_products
                code_id: failed_validation
                message: Invalid request payload.
                errors:
                  from:
                    - 'invalid ''from'' date: ''7th March 2023'''
        '401':
          description: Unauthorised Request - the request was not authenticated or authorised
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Unauthorised request
                errors: {}
        '500':
          description: Server Error - an unexpected error occurred on the server side
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: 'An error occurred while processing your request. Get in touch with us and provide us your request id: 7ef63242-ba6d-4661-8014-f9eaa9cb2ad8'
  /v1/subscriptions:
    get:
      tags:
        - Subscription Finder
      summary: Retrieve Subscriptions
      description: This endpoint is used to retrieve information about a user's subscriptions
      operationId: v1_subscriptions_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/From'
        - $ref: '#/components/parameters/To'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetSubscriptionsResponseV1'
              example:
                operation_id: v1_subscriptions_get
                data:
                  - subscription_type: media_and_telecoms
                    period: monthly
                    categories:
                      l1: media_and_telecoms
                      l2: digital_media_and_software
                    merchant:
                      id: netflix
                      name: Netflix
                      logo: https://assets.thisisbud.com/netflix_logo_placeholder.jpeg
                    transactions:
                      - transaction_id: fdcc55c6-f347-4abc-8c66-61ff290d8bd4
                        account_id: an_account_id
                        transaction_description: Netflix
                        provider: Amex
                        date: 2022-03-21T01:00:00+0100
                        amount:
                          value: '9.99'
                          currency: USD
                        credit_debit_indicator: Debit
                      - transaction_id: hdcc55c6-f347-4abc-8c66-61ff290d8bd4
                        account_id: an_account_id
                        transaction_description: Netflix
                        provider: Amex
                        date: 2022-04-21T01:00:00+0100
                        amount:
                          value: '9.99'
                          currency: USD
                        credit_debit_indicator: Debit
                  - subscription_type: unknown
                    period: unknown
                    categories:
                      l1: general
                      l2: other_general
                    transactions:
                      - transaction_id: idcc55c6-f347-4abc-8c66-61ff290d8bd4
                        account_id: an_account_id
                        transaction_description: A Random Subscription Payment
                        provider: Amex
                        date: 2022-05-11T01:00:00+0100
                        amount:
                          value: '59.99'
                          currency: USD
                        credit_debit_indicator: Debit
                metadata:
                  results: 2
                  from: '2022-03-19'
                  to: '2022-05-19'
        '204':
          description: No subscriptions found
        '400':
          description: The request contains an invalid payload
        '401':
          description: Unauthorised request
        '405':
          description: An unexpected HTTP method was used
        5XX:
          description: An unexpected error occurred on the server side
  /goals/v1/savings:
    post:
      tags:
        - Savings Goals
      summary: Create Savings Goal
      description: |
        Create a savings goal for the given account id.

        Of the fields `target_amount`, `target_datetime` and `recurrent_amount`, only two are required. If two are supplied then the third parameter will be calculated in the response.

        For example:
          If the date the goal is created is `2023-01-01T00:00:00Z`, if a savings goal is created with the `target_amount` of `$110`, and the `target_datetime` is `2023-12-01T00:00:00Z`, then the recurrent amount will be `$10`.

        When performing this calculation, it is assumed that a customer is not going to deposit their first savings payment within the month of creating the goal.
        If this is the desired behaviour however, all three parameters can be supplied and the endpoint will accept this.
      operationId: goals_v1_savings_post
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSavingsGoalRequest'
            example:
              account_id: RxsYshVGded4JeilkXgWKdXA
              name: Car Savings
              target_amount:
                value: '3000.00'
                currency: USD
              target_datetime: '2023-12-30T00:00:00Z'
      responses:
        '201':
          description: Created - The goal was created successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateSavingsGoalResponse'
              example:
                operation_id: goals_v1_savings_post
                data:
                  id: f46d76c4-56d3-11ee-ac69-d6df71eb5902
                  account_id: RxsYshVGded4JeilkXgWKdXA
                  name: Car Savings
                  target_amount:
                    currency: USD
                    value: '3000.00'
                  recurrent_amount:
                    currency: USD
                    value: '750.00'
                  target_datetime: '2023-12-30T00:00:00Z'
                  saved_amount:
                    currency: USD
                    value: '0.00'
                  created_at: '2023-09-19T10:04:43Z'
        '400':
          description: Bad Request - The request was invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              examples:
                Customer ID Missing:
                  value:
                    operation_id: goals_v1_savings_post
                    code_id: failed_validation
                    message: unable to validate request
                    errors:
                      header.X-Customer-ID:
                        - 'parameter "X-Customer-ID" in header has an error: value is required but missing'
                Invalid Goal:
                  value:
                    operation_id: goals_v1_savings_post
                    code_id: failed_validation
                    message: Invalid request payload.
                    errors:
                      targets:
                        - amount saved at target date will be less than the target amount
        '401':
          description: Unauthorized - The request was not authorised.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Unauthorised request
        '404':
          description: Not Found - The account ID provided was not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Route or resource not found
                errors: {}
        '500':
          description: Internal Server Error - An unexpected error occurred.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: 'An error occurred while processing your request. Get in touch with us and provide us your request id: 7ef63242-ba6d-4661-8014-f9eaa9cb2ad8'
    get:
      tags:
        - Savings Goals
      summary: Retrieve Savings Goals
      description: |
        Retrieve all savings goals. The results from this endpoint can be filtered by the `account_id` query parameter.
        The response from this endpoint includes the `saved_amount` field which is the sum of the goal actions associated with the goal.
      operationId: goals_v1_savings_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/QueryBudAccountID'
        - $ref: '#/components/parameters/QueryDay'
      responses:
        '200':
          description: OK - The goals were retrieved successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RetrieveSavingsGoalsResponse'
              examples:
                Goals Returned for Account ID:
                  value:
                    operation_id: goals_v1_savings_get
                    data:
                      - id: f46d76c4-56d3-11ee-ac69-d6df71eb5902
                        account_id: RxsYshVGded4JeilkXgWKdXA
                        name: Car Savings
                        target_amount:
                          currency: USD
                          value: '3000.00'
                        recurrent_amount:
                          currency: USD
                          value: '750.00'
                        target_datetime: '2023-12-30T00:00:00Z'
                        saved_amount:
                          currency: USD
                          value: '0.00'
                        created_at: '2023-09-19T10:04:43Z'
                      - id: 265a4aed-348d-4ff1-802e-2d08d7cace77
                        account_id: RxsYshVGded4JeilkXgWKdXA
                        name: Vacation Savings
                        target_amount:
                          currency: USD
                          value: '1000.00'
                        recurrent_amount:
                          currency: USD
                          value: '100.00'
                        target_datetime: '2023-07-30T00:00:00Z'
                        saved_amount:
                          currency: USD
                          value: '0.00'
                        created_at: '2023-09-19T10:04:43Z'
                    metadata:
                      results: 2
                      account_id: RxsYshVGded4JeilkXgWKdXA
                No Goals Exist:
                  value:
                    operation_id: goals_v1_savings_get
                    data: []
                    metadata:
                      results: 0
                      account_id: ''
        '400':
          description: Bad Request - The request was invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              examples:
                Customer ID Missing:
                  value:
                    operation_id: goals_v1_savings_post
                    code_id: failed_validation
                    message: unable to validate request
                    errors:
                      header.X-Customer-ID:
                        - 'parameter "X-Customer-ID" in header has an error: value is required but missing'
        '401':
          description: Unauthorized - The request was not authorised.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Unauthorised request
        '500':
          description: Internal Server Error - An unexpected error occurred.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: 'An error occurred while processing your request. Get in touch with us and provide us your request id: 7ef63242-ba6d-4661-8014-f9eaa9cb2ad8'
    delete:
      tags:
        - Savings Goals
      summary: Remove All Savings Goals
      description: |
        Remove all savings goals for the given customer.
      operationId: goals_v1_savings_delete_all
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
      responses:
        '204':
          description: No Content - The goals were removed successfully.
        '401':
          description: Unauthorized - The request was not authorised.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Unauthorised request
        '404':
          description: Not Found - The customer has no goals to be deleted.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Route or resource not found
                errors: {}
        '500':
          description: Internal Server Error - An unexpected error occurred.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: 'An error occurred while processing your request. Get in touch with us and provide us your request id: 7ef63242-ba6d-4661-8014-f9eaa9cb2ad8'
  /goals/v1/savings/{goal_id}:
    patch:
      tags:
        - Savings Goals
      summary: Update Savings Goal
      description: |
        Update a savings goal with a given `goal_id`. 

        Of the fields `target_amount`, `target_datetime` and `recurrent_amount`, none are required. However if one is supplied, then a second must also be given. If two are supplied then the third parameter will be re-calculated in the response.

        For example:
          If the date the goal is created is `2023-01-01T00:00:00Z`, if a savings goal is updated with the `target_amount` of `$110`, and the `target_datetime` is `2023-12-01T00:00:00Z`, then the recurrent amount will be `$10`.

        When performing this calculation, it is assumed that a customer is not going to deposit their first recurrent amount within the month of creating the goal.
        If this is the desired behaviour however, all three parameters can be supplied and the endpoint will accept it.
      operationId: goals_v1_savings_patch
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/PathGoalID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSavingsGoalRequest'
            examples:
              Name Updated:
                value:
                  name: Mortgage Deposit Savings
              Target Date and Recurrent Amount Updated:
                value:
                  recurrent_amount:
                    value: '50.00'
                  target_datetime: '2024-12-30T00:00:00Z'
      responses:
        '200':
          description: OK - The goal was updated successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateSavingsGoalResponse'
              example:
                operation_id: goals_v1_savings_patch
                data:
                  id: 19d1def3-5860-11ee-9342-3e1d60bc76f9
                  account_id: RxsYshVGded4JeilkXgWKdXA
                  name: Mortgage Deposit Savings
                  target_amount:
                    currency: USD
                    value: '750.00'
                  recurrent_amount:
                    currency: USD
                    value: '50.00'
                  target_datetime: '2024-12-30T00:00:00Z'
                  saved_amount:
                    currency: USD
                    value: '0.00'
                  created_at: '2023-09-21T09:20:26Z'
        '400':
          description: Bad Request - The request was invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              examples:
                Customer ID Missing:
                  value:
                    operation_id: goals_v1_savings_post
                    code_id: failed_validation
                    message: unable to validate request
                    errors:
                      header.X-Customer-ID:
                        - 'parameter "X-Customer-ID" in header has an error: value is required but missing'
                Currency Changed:
                  value:
                    operation_id: goals_v1_savings_patch
                    code_id: failed_validation
                    message: Invalid request payload.
                    errors:
                      recurrent_amount.currency:
                        - cannot be updated
        '401':
          description: Unauthorized - The request was not authorised.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Unauthorised request
        '404':
          description: Not Found - The goal ID could not be found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Route or resource not found
                errors: {}
        '500':
          description: Internal Server Error - An unexpected error occurred.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: 'An error occurred while processing your request. Get in touch with us and provide us your request id: 7ef63242-ba6d-4661-8014-f9eaa9cb2ad8'
    delete:
      tags:
        - Savings Goals
      summary: Remove Savings Goal
      description: |
        Remove a savings goal with a given `goal_id`.
      operationId: goals_v1_savings_delete
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/PathGoalID'
      responses:
        '204':
          description: No Content - The goal was removed successfully.
        '401':
          description: Unauthorized - The request was not authorised.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Unauthorised request
        '404':
          description: Not Found - The goal ID could not be found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Route or resource not found
                errors: {}
        '500':
          description: Internal Server Error - An unexpected error occurred.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: 'An error occurred while processing your request. Get in touch with us and provide us your request id: 7ef63242-ba6d-4661-8014-f9eaa9cb2ad8'
  /goals/v1/savings/{goal_id}/actions:
    post:
      tags:
        - Savings Goals
      summary: Create Savings Goal Action
      description: |
        Creates a savings goal action for the given `goal_id`.

        Savings goal actions represent the transfer of the savings payment into the associated account. 

        When a goal action is created, we validate that the associated account has a balance that reflects this addition. 
        If the balance is not sufficient, the goal action will not be created.
      operationId: goals_v1_savings_actions_post
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/PathGoalID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSavingsGoalActionRequest'
      responses:
        '201':
          description: Created - The goal action was created successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateSavingsGoalActionResponse'
              example:
                operation_id: goals_v1_savings_actions_post
                data:
                  id: 23267253-5860-11ee-99e5-9ed0600d2630
                  amount:
                    currency: USD
                    value: '10.00'
                  credit_debit_indicator: credit
                  created_at: '2023-09-21T09:20:42Z'
                metadata:
                  goal_id: 19d1def3-5860-11ee-9342-3e1d60bc76f9
        '400':
          description: Bad Request - The request was invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              examples:
                Customer ID Missing:
                  value:
                    operation_id: goals_v1_savings_actions_post
                    code_id: failed_validation
                    message: unable to validate request
                    errors:
                      header.X-Customer-ID:
                        - 'parameter "X-Customer-ID" in header has an error: value is required but missing'
                Invalid Amount Value:
                  value:
                    operation_id: goals_v1_savings_actions_post
                    code_id: failed_validation
                    message: Invalid request payload.
                    errors:
                      amount.value:
                        - negative value
        '401':
          description: Unauthorized - The request was not authorised.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Unauthorised request
        '404':
          description: Not Found - The goal ID could not be found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Route or resource not found
                errors: {}
        '500':
          description: Internal Server Error - An unexpected error occurred.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: 'An error occurred while processing your request. Get in touch with us and provide us your request id: 7ef63242-ba6d-4661-8014-f9eaa9cb2ad8'
    get:
      tags:
        - Savings Goals
      summary: Retrieve Savings Goal Actions
      description: |
        Retrieve all savings goal actions for the given `goal_id`. The results of this endpoint are paginated with a default page size of `100` and a maximum of `200`. 
        The page size is configurable by the `page_size` query parameter.
        The next page of results can be retrieved using the `page_token` query parameter.
      operationId: goals_v1_savings_actions_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/PathGoalID'
        - $ref: '#/components/parameters/QueryBudPageToken'
        - $ref: '#/components/parameters/QueryBudPageSize'
      responses:
        '200':
          description: OK - The goal actions were retrieved successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RetrieveSavingsGoalActionsResponse'
              examples:
                Goal Actions Returned:
                  value:
                    operation_id: goals_v1_savings_actions_get
                    data:
                      - id: 23267253-5860-11ee-99e5-9ed0600d2630
                        amount:
                          currency: USD
                          value: '10.00'
                        credit_debit_indicator: credit
                        created_at: '2023-09-21T09:20:42Z'
                      - id: 23267253-5860-11ee-99e5-9ed0600d2630
                        amount:
                          currency: USD
                          value: '10.00'
                        credit_debit_indicator: credit
                        created_at: '2023-09-21T09:20:42Z'
                    metadata:
                      results: 2
                      page_token: b21055a9a9f46fc794a2e6855c65abd7e317181039fc6930daabac5822911d14a84895ecd947e2b5abdcb22e4fcc2c594e1f661dc63e34b9ba88760724047990896f7581a0786c2605dce19c6a9d80d1044f963b74fea0a929c0a4465a6e67378a74dce38ec5e26ae4cc804b62fd666d5df4cf2e7f524bd99e5523bc5d471768065c036dc0c73122705b280817fbbd7d9aa31f271d72cd3877d999dcb9a5b1c0be0c05
                      page_size: 100
                      goal_id: 19d1def3-5860-11ee-9342-3e1d60bc76f9
                No Goal Actions Exist:
                  value:
                    operation_id: goals_v1_savings_actions_get
                    data: []
                    metadata:
                      results: 0
                      page_token: 2
                      page_size: 2
                      goal_id: 19d1def3-5860-11ee-9342-3e1d60bc76f9
        '400':
          description: Bad Request - The request was invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              examples:
                Customer ID Missing:
                  value:
                    operation_id: goals_v1_savings_actions_get
                    code_id: failed_validation
                    message: unable to validate request
                    errors:
                      header.X-Customer-ID:
                        - 'parameter "X-Customer-ID" in header has an error: value is required but missing'
                Bad Page Token:
                  value:
                    operation_id: goals_v1_savings_actions_get
                    code_id: failed_validation
                    message: Invalid request payload.
                    errors:
                      page_token:
                        - Invalid page token.
                Page Size Too Large:
                  value:
                    operation_id: goals_v1_savings_actions_get
                    code_id: failed_validation
                    message: Invalid request payload.
                    errors:
                      page_size:
                        - Page size must be between 1 and 200.
        '401':
          description: Unauthorized - The request was not authorised.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Unauthorised request
        '404':
          description: Not Found - The goal ID could not be found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Route or resource not found
                errors: {}
        '500':
          description: Internal Server Error - An unexpected error occurred.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: 'An error occurred while processing your request. Get in touch with us and provide us your request id: 7ef63242-ba6d-4661-8014-f9eaa9cb2ad8'
  /goals/v1/savings/{goal_id}/actions/{goal_action_id}:
    patch:
      tags:
        - Savings Goals
      summary: Update Savings Goal Action
      description: |
        Update a savings goal action with a given `goal_id` and `goal_action_id`. 

        When a goal action is updated, we validate that the associated account has a balance that reflects this amendment. 
        If the balance is not sufficient, the goal action will not be updated.
      operationId: goals_v1_savings_actions_patch
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/PathGoalID'
        - $ref: '#/components/parameters/PathGoalActionID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSavingsGoalActionRequest'
      responses:
        '200':
          description: OK - The goal was updated successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateSavingsGoalActionResponse'
              example:
                operation_id: goals_v1_savings_actions_patch
                data:
                  id: 23267253-5860-11ee-99e5-9ed0600d2630
                  amount:
                    currency: USD
                    value: '10.00'
                  credit_debit_indicator: credit
                  created_at: '2023-09-21T09:20:42Z'
                metadata:
                  goal_id: 19d1def3-5860-11ee-9342-3e1d60bc76f9
        '400':
          description: Bad Request - The request was invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
              examples:
                Customer ID Missing:
                  value:
                    operation_id: goals_v1_savings_actions_patch
                    code_id: failed_validation
                    message: unable to validate request
                    errors:
                      header.X-Customer-ID:
                        - 'parameter "X-Customer-ID" in header has an error: value is required but missing'
                Invalid Amount Value:
                  value:
                    operation_id: goals_v1_savings_actions_patch
                    code_id: failed_validation
                    message: Invalid request payload.
                    errors:
                      amount.value:
                        - Saved amount exceeds balance of the account.
        '401':
          description: Unauthorized - The request was not authorised.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Unauthorised request
        '404':
          description: Not Found - The goal ID or Goal Action ID could not be found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Route or resource not found
                errors: {}
        '500':
          description: Internal Server Error - An unexpected error occurred.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: 'An error occurred while processing your request. Get in touch with us and provide us your request id: 7ef63242-ba6d-4661-8014-f9eaa9cb2ad8'
    delete:
      tags:
        - Savings Goals
      summary: Remove Savings Goal Action
      description: |
        Remove a savings goal action with a given `goal_id` and `goal_action_id`.
      operationId: goals_v1_savings_actions_delete
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/PathGoalID'
        - $ref: '#/components/parameters/PathGoalActionID'
      responses:
        '204':
          description: No Content - The goal action was removed successfully.
        '401':
          description: Unauthorized - The request was not authorised.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Unauthorised request
        '404':
          description: Not Found - The customer has no goal action with that ID to be deleted.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: Route or resource not found
                errors: {}
        '500':
          description: Internal Server Error - An unexpected error occurred.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
              example:
                operation_id: unknown
                code_id: unknown
                message: 'An error occurred while processing your request. Get in touch with us and provide us your request id: 7ef63242-ba6d-4661-8014-f9eaa9cb2ad8'
  /goals/v1/spending-budgets:
    post:
      tags:
        - Spending Budgets
      summary: Create Spending Budget
      description: |
        Create a spending budget.
      operationId: goals_v1_spending_budgets_post
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CreateSpendingBudgetRequest'
            example:
              account_id: RxsYshVGded4JeilkXgWKdXA
              name: Travel Budget
              amount:
                value: '300.00'
                currency: USD
              recurrency:
                period: monthly
                starting_day: 1
              include:
                categories:
                  - l1: travel
                merchants:
                  slugs:
                    - uber
      responses:
        '201':
          description: Created - The budget was created successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CreateSpendingBudgetResponse'
              example:
                operation_id: goals_v1_spending_budgets_post
                data:
                  id: f46d76c4-56d3-11ee-ac69-d6df71eb5902
                  account_id: RxsYshVGded4JeilkXgWKdXA
                  name: Travel Budget
                  amount:
                    value: '300.00'
                    currency: USD
                  recurrency:
                    period: monthly
                    starting_day: 1
                  include:
                    categories:
                      - l1: travel
                    merchants:
                      slugs:
                        - uber
                  spent:
                    from: '2023-10-19'
                    to: '2023-10-31'
                    amount:
                      value: '160.59'
                      currency: USD
                    ratio: '0.54'
                  created_at: '2023-10-03T09:20:30Z'
                  _links:
                    transactions: /goals/v1/spending-budgets/f46d76c4-56d3-11ee-ac69-d6df71eb5902/transactions
        '400':
          description: Bad Request - The request was invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
        '401':
          description: Unauthorized - The request was not authorised.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
        '500':
          description: Internal Server Error - An unexpected error occurred.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
    get:
      tags:
        - Spending Budgets
      summary: Retrieve Spending Budgets
      description: |
        Retrieve all spending budgets.
      operationId: goals_v1_spending_budgets_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/QueryBudAccountID'
        - $ref: '#/components/parameters/QueryDay'
      responses:
        '200':
          description: OK - The spending budgets were retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RetrieveSpendingBudgetsResponse'
        '400':
          description: Bad Request - The request was invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
        '401':
          description: Unauthorized - The request was not authorised.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
        '500':
          description: Internal Server Error - An unexpected error occurred.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
    delete:
      tags:
        - Spending Budgets
      summary: Delete all Spending Budgets
      description: |
        Delete all of a customers' spending budgets.
      operationId: goals_v1_spending_budgets_delete_all
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
      responses:
        '204':
          description: No Content - The budgets were removed successfully.
        '401':
          description: Unauthorized - The request was not authorised.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
        '404':
          description: Not Found - The customer has no budgets to be deleted.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
        '500':
          description: Internal Server Error - An unexpected error occurred.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
  /goals/v1/spending-budgets/{budget_id}:
    patch:
      tags:
        - Spending Budgets
      summary: Patch a Spending Budget
      description: |
        Update a Spending Budget with a given `budget_id`.
      operationId: goals_v1_spending_budgets_patch
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/PathSpendingBudgetID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchSpendingBudget'
      responses:
        '200':
          description: OK - The budget was updated successfully.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateSpendingBudgetResponse'
              example:
                operation_id: goals_v1_spending_budgets_patch
                data:
                  id: f46d76c4-56d3-11ee-ac69-d6df71eb5902
                  account_id: RxsYshVGded4JeilkXgWKdXA
                  name: Travel Budget
                  amount:
                    value: '300.00'
                    currency: USD
                  recurrency:
                    period: monthly
                    starting_day: 1
                  include:
                    categories:
                      - l1: travel
                    merchants:
                      slugs:
                        - uber
                  spent:
                    from: '2023-10-19'
                    to: '2023-10-31'
                    amount:
                      value: '160.59'
                      currency: USD
                    ratio: '0.54'
                  created_at: '2023-10-03T09:20:30Z'
                  _links:
                    transactions: /goals/v1/spending-budgets/f46d76c4-56d3-11ee-ac69-d6df71eb5902/transactions
        '400':
          description: Bad Request - The request was invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
        '401':
          description: Unauthorized - The request was not authorised.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
        '404':
          description: Not Found - The goal ID could not be found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
        '500':
          description: Internal Server Error - An unexpected error occurred.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
    delete:
      tags:
        - Spending Budgets
      summary: Delete a Spending Budget
      description: |
        Delete a specific spending budget with the given `budget_id`
      operationId: goals_v1_spending_budgets_delete
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/PathSpendingBudgetID'
      responses:
        '204':
          description: No Content - The budget was removed successfully.
        '401':
          description: Unauthorized - The request was not authorised.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
        '404':
          description: Not Found - The budget could not be found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
        '500':
          description: Internal Server Error - An unexpected error occurred.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
  /goals/v1/spending-budgets/{budget_id}/transactions:
    get:
      tags:
        - Spending Budgets
      summary: Retrieve Spending Budget Transactions
      description: |
        Retrieve all of the transactions associated with a spending budget. The results of this endpoint are paginated with a default page size of `100` and a maximum of `200`. 
        The page size is configurable by the `page_size` query parameter.
        The next page of results can be retrieved using the `page_token` query parameter.
      operationId: goals_v1_spending_budget_transactions_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/PathSpendingBudgetID'
        - $ref: '#/components/parameters/QueryDay'
        - $ref: '#/components/parameters/QueryBudPageToken'
        - $ref: '#/components/parameters/QueryBudPageSize'
      responses:
        '200':
          description: OK - The spending budget transactions were retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RetrieveSpendingBudgetTransactionsResponse'
              example:
                operation_id: goals_v1_spending_budget_transactions_get
                data:
                  - transaction_id: fbdc28e82f0f137586a526a88ec4a6be
                    account_id: RxsYshVGded4JeilkXgWKdXA
                    provider: BankOfBud
                    description: uber taxi
                    credit_debit_indicator: debit
                    status: booked
                    amount:
                      value: '16.39'
                      currency: USD
                    date_time: '2023-10-03T10:00:00Z'
                    enrichments:
                      categories:
                        l1:
                          slug: transport
                          confidence: '0.99'
                        l2:
                          slug: taxi
                          confidence: '0.99'
                      merchant:
                        id: 9f345fcb-d1ee-4e79-a23e-510fb8dbd61f
                        slug: uber
                        display_name: Uber
                        logo: https://url/uber_logo.jpeg
                metadata:
                  results: 1
                  page_token: b21055a9a9f46fc794a2e6855c65abd7e317181039fc6930daabac5822911d14a84895ecd947e2b5abdcb22e4fcc2c594e1f661dc63e34b9ba88760724047990896f7581a0786c2605dce19c6a9d80d1044f963b74fea0a929c0a4465a6e67378a74dce38ec5e26ae4cc804b62fd666d5df4cf2e7f524bd99e5523bc5d471768065c036dc0c73122705b280817fbbd7d9aa31f271d72cd3877d999dcb9a5b1c0be0c05
                  page_size: 100
                  budget_id: 19d1def3-5860-11ee-9342-3e1d60bc76f9
        '400':
          description: Bad Request - The request was invalid.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BadRequestResponse'
        '401':
          description: Unauthorized - The request was not authorised.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
        '500':
          description: Internal Server Error - An unexpected error occurred.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ServerErrorResponse'
  /insights/v1/actionable/balances:
    get:
      tags:
        - Retrieve Actionable Insights
      summary: Retrieve Balances Actionable Insights
      description: |
        Generate balances actionable insights.

        > ðŸ“˜ Note:
        >
        > For more information about Actionable Insights, please refer to our [guide](https://docs-us.thisisbud.com/docs/actionable-insights).
      operationId: insights_v1_actionable_balances_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/parameters-From'
        - $ref: '#/components/parameters/parameters-To'
        - $ref: '#/components/parameters/BalancesEnabledInsights'
        - $ref: '#/components/parameters/CloseToCreditLimitPercentageUtilisationThreshold'
        - $ref: '#/components/parameters/LowBalanceBalanceThreshold'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BalancesInsightsResponse'
              example:
                operation_id: insights_v1_actionable_balances_get
                data:
                  insights:
                    - id: in_overdraft_8789764a-df2f-4589-b550-00bcd0e9cb2c
                      type: in_overdraft
                      account_id: 8789764a-df2f-4589-b550-00bcd0e9cb2c
                      balance:
                        value: '100.00'
                        currency: USD
                        credit_debit_indicator: debit
                      threshold:
                        value: '0.00'
                        currency: USD
                        credit_debit_indicator: debit
                      _links:
                        details: https://domain/insights/v1/actionable/balances/in_overdraft/in_overdraft_8789764a-df2f-4589-b550-00bcd0e9cb2c/details
                metadata:
                  results: 1
                  from: '2022-11-01T00:00:00Z'
                  to: '2023-05-16T17:30:00Z'
                  options: []
  /insights/v1/actionable/balances/{type}/{id}/details:
    get:
      tags:
        - Retrieve Actionable Insights
      summary: Retrieve Balances Actionable Insight Details
      description: |
        Retrieve insight-specific details and transaction and account data responsible for the triggered balances insight of the given type and ID.

        > ðŸ“˜ Note:
        >
        > For more information about Actionable Insights, please refer to our [guide](https://docs-us.thisisbud.com/docs/actionable-insights).
      operationId: insights_v1_actionable_balances_details_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/parameters-From'
        - $ref: '#/components/parameters/parameters-To'
        - $ref: '#/components/parameters/BalancesInsightType'
        - $ref: '#/components/parameters/InsightID'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BalancesInsightsDataResponse'
              example:
                operation_id: insights_v1_actionable_balances_details_get
                data:
                  id: in_overdraft_ee7a2d6a-2baa-461a-aca2-844e88a3f3e7
                  type: in_overdraft
                  caused_by:
                    accounts:
                      - account_id: ee7a2d6a-2baa-461a-aca2-844e88a3f3e7
                        currency: USD
                        holder:
                          name: David Smith
                          relationship: unknown
                        account_name: My Current Account
                        account_type: current_account
                        usage_type: personal
                        provider: BankOfBud
                        identifiers:
                          iban: US29NWBK60161331926819
                        balances:
                          - date: '2023-05-12T00:00:00Z'
                            amount:
                              value: '100.00'
                              currency: USD
                            type: interim_booked
                            credit_debit_indicator: debit
                          - date: '2023-05-12T00:00:00Z'
                            amount:
                              value: '100.00'
                              currency: USD
                            type: expected
                            credit_debit_indicator: debit
                        credit_lines:
                          - date: '2023-05-12T00:00:00Z'
                            type: credit
                            amount:
                              value: '1000.00'
                              currency: USD
                    transactions: []
                  details: {}
                metadata:
                  from: '2022-11-01T00:00:00Z'
                  to: '2023-05-16T17:30:00Z'
                  options: []
        '404':
          description: Insight not found. This can occur if the returned insight was invalidated by an account refresh or other change to customer data.
  /insights/v1/actionable/income:
    get:
      tags:
        - Retrieve Actionable Insights
      summary: Retrieve Income Actionable Insights
      description: |
        Generate income actionable insights.

        > ðŸ“˜ Note:
        >
        > For more information about Actionable Insights, please refer to our [guide](https://docs-us.thisisbud.com/docs/actionable-insights).
      operationId: insights_v1_actionable_income_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/parameters-From'
        - $ref: '#/components/parameters/parameters-To'
        - $ref: '#/components/parameters/IncomeEnabledInsights'
        - $ref: '#/components/parameters/GamblingIncomeMinimumMonthlyThreshold'
        - $ref: '#/components/parameters/GamblingIncomeMinimumPercentageTotalThreshold'
        - $ref: '#/components/parameters/LateIncomeMinimumValueThreshold'
        - $ref: '#/components/parameters/LateIncomeMinimumDaysLateThreshold'
        - $ref: '#/components/parameters/PensionIncomeMinimumMonthlyThreshold'
        - $ref: '#/components/parameters/PensionIncomeMinimumPercentageTotalThreshold'
        - $ref: '#/components/parameters/RegularIncomeChangedMinimumAbsoluteChangeThreshold'
        - $ref: '#/components/parameters/RegularIncomeChangedMinimumPercentageChangeThreshold'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IncomeInsightsResponse'
              example:
                operation_id: insights_v1_actionable_income_get
                data:
                  insights:
                    - id: late_income_8789764a-df2f-4589-b550-00bcd0e9cb2c
                      type: late_income
                      transactions:
                        - transaction_id: a_transaction_id
                          account_id: ee7a2d6a-2baa-461a-aca2-844e88a3f3e7
                          provider: a_bank_account_provider
                          description: SALARY
                          credit_debit_indicator: credit
                          status: booked
                          amount:
                            value: '3000.00'
                            currency: USD
                          date_time: '2023-04-10T10:00:00Z'
                          enrichments:
                            categories:
                              l1:
                                slug: income
                                confidence: '0.99'
                              l2:
                                slug: employment_income
                                confidence: '0.98'
                            regularity:
                              frequency: monthly
                              predicted_date_times:
                                - '2023-05-10T10:00:00Z'
                      _links:
                        details: https://domain/insights/v1/actionable/income/late_income/late_income_8789764a-df2f-4589-b550-00bcd0e9cb2c/details
                  totals:
                    income:
                      - value: '12000.00'
                        currency: USD
                    expenditure:
                      - value: '14000.00'
                        currency: USD
                metadata:
                  results: 1
                  from: '2022-11-01T00:00:00Z'
                  to: '2023-05-16T17:30:00Z'
                  options:
                    - insight_type: late_income
                      option: minimum_days_late_threshold
                      value: '3'
                    - insight_type: late_income
                      option: minimum_value_threshold
                      value: '100.00'
  /insights/v1/actionable/income/{type}/{id}/details:
    get:
      tags:
        - Retrieve Actionable Insights
      summary: Retrieve Income Actionable Insight Details
      description: |
        Retrieve insight-specific details and transaction and account data responsible for the triggered income insight of the given type and ID.

        > ðŸ“˜ Note:
        >
        > For more information about Actionable Insights, please refer to our [guide](https://docs-us.thisisbud.com/docs/actionable-insights).
      operationId: insights_v1_actionable_income_details_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/parameters-From'
        - $ref: '#/components/parameters/parameters-To'
        - $ref: '#/components/parameters/IncomeInsightType'
        - $ref: '#/components/parameters/InsightID'
        - $ref: '#/components/parameters/GamblingIncomeMinimumMonthlyThreshold'
        - $ref: '#/components/parameters/GamblingIncomeMinimumPercentageTotalThreshold'
        - $ref: '#/components/parameters/LateIncomeMinimumValueThreshold'
        - $ref: '#/components/parameters/LateIncomeMinimumDaysLateThreshold'
        - $ref: '#/components/parameters/PensionIncomeMinimumMonthlyThreshold'
        - $ref: '#/components/parameters/PensionIncomeMinimumPercentageTotalThreshold'
        - $ref: '#/components/parameters/RegularIncomeChangedMinimumAbsoluteChangeThreshold'
        - $ref: '#/components/parameters/RegularIncomeChangedMinimumPercentageChangeThreshold'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/IncomeInsightsDataResponse'
              example:
                operation_id: insights_v1_actionable_income_details_get
                data:
                  id: late_income_8789764a-df2f-4589-b550-00bcd0e9cb2c
                  type: late_income
                  caused_by:
                    accounts:
                      - account_id: ee7a2d6a-2baa-461a-aca2-844e88a3f3e7
                        currency: USD
                        holder:
                          name: David Smith
                          relationship: unknown
                        account_name: My Current Account
                        account_type: current_account
                        usage_type: personal
                        provider: BankOfBud
                        identifiers:
                          iban: US29NWBK60161331926819
                        balances:
                          - date: '2023-05-12T00:00:00Z'
                            amount:
                              value: '3552.61'
                              currency: USD
                            type: interim_booked
                            credit_debit_indicator: credit
                          - date: '2023-05-12T00:00:00Z'
                            amount:
                              value: '3552.61'
                              currency: USD
                            type: expected
                            credit_debit_indicator: credit
                        credit_lines:
                          - date: '2023-05-12T00:00:00Z'
                            type: credit
                            amount:
                              value: '1000.00'
                              currency: USD
                    transactions:
                      - transaction_id: a_transaction_id
                        account_id: ee7a2d6a-2baa-461a-aca2-844e88a3f3e7
                        provider: a_bank_account_provider
                        description: SALARY
                        credit_debit_indicator: credit
                        status: booked
                        amount:
                          value: '2400.00'
                          currency: USD
                        date_time: '2023-05-05T10:00:00Z'
                        enrichments:
                          categories:
                            l1:
                              slug: income
                              confidence: '0.99'
                            l2:
                              slug: employment_income
                              confidence: '0.98'
                          regularity:
                            frequency: monthly
                            confidence:
                              predicted_date_times:
                                - '2023-05-10T10:00:00Z'
                  details:
                    days_late: 6
                    expected_date_time: '2023-05-10T10:00:00Z'
                metadata:
                  from: '2022-11-01T00:00:00Z'
                  to: '2023-05-16T17:30:00Z'
                  options:
                    - insight_type: late_income
                      option: minimum_days_late_threshold
                      value: '3'
                    - insight_type: late_income
                      option: minimum_value_threshold
                      value: '100.00'
        '404':
          description: Insight not found. This can occur if the returned insight was invalidated by an account refresh or other change to customer data.
  /insights/v1/actionable/spending:
    get:
      tags:
        - Retrieve Actionable Insights
      summary: Retrieve Spending Actionable Insights
      description: |
        Generate spending actionable insights.

        > ðŸ“˜ Note:
        >
        > For more information about Actionable Insights, please refer to our [guide](https://docs-us.thisisbud.com/docs/actionable-insights).
      operationId: insights_v1_actionable_spending_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/parameters-From'
        - $ref: '#/components/parameters/parameters-To'
        - $ref: '#/components/parameters/SpendingEnabledInsights'
        - $ref: '#/components/parameters/LatePaymentMinimumValueThreshold'
        - $ref: '#/components/parameters/LatePaymentMinimumDaysLateThreshold'
        - $ref: '#/components/parameters/RegularPaymentChangedMinimumAbsoluteChangeThreshold'
        - $ref: '#/components/parameters/RegularPaymentChangedMinimumPercentageChangeThreshold'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpendingInsightsResponse'
              example:
                operation_id: insights_v1_actionable_spending_get
                data:
                  insights:
                    - id: late_payment_8789764a-df2f-4589-b550-00bcd0e9cb2c
                      type: late_payment
                      transactions:
                        - transaction_id: a_transaction_id
                          account_id: ee7a2d6a-2baa-461a-aca2-844e88a3f3e7
                          provider: a_bank_account_provider
                          description: MORTGAGE
                          credit_debit_indicator: debit
                          status: booked
                          amount:
                            value: '1400.00'
                            currency: USD
                          date_time: '2023-04-10T10:00:00Z'
                          enrichments:
                            categories:
                              l1:
                                slug: mortgage_and_rent
                                confidence: '0.99'
                              l2:
                                slug: mortgage
                                confidence: '0.98'
                            regularity:
                              frequency: monthly
                              predicted_date_times:
                                - '2023-05-10T10:00:00Z'
                      _links:
                        details: https://domain/insights/v1/actionable/spending/late_income/late_income_8789764a-df2f-4589-b550-00bcd0e9cb2c/details
                  totals:
                    income:
                      - value: '12000.00'
                        currency: USD
                    expenditure:
                      - value: '14000.00'
                        currency: USD
                metadata:
                  results: 1
                  from: '2022-11-01T00:00:00Z'
                  to: '2023-05-16T17:30:00Z'
                  options:
                    - insight_type: late_payment
                      option: minimum_days_late_threshold
                      value: '3'
                    - insight_type: late_payment
                      option: minimum_value_threshold
                      value: '100.00'
  /insights/v1/actionable/spending/{type}/{id}/details:
    get:
      tags:
        - Retrieve Actionable Insights
      summary: Retrieve Spending Actionable Insight Details
      description: |
        Retrieve insight-specific details and transaction and account data responsible for the triggered income insight of the given type and ID.

        > ðŸ“˜ Note:
        >
        > For more information about Actionable Insights, please refer to our [guide](https://docs-us.thisisbud.com/docs/actionable-insights).
      operationId: insights_v1_actionable_spending_details_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/parameters-From'
        - $ref: '#/components/parameters/parameters-To'
        - $ref: '#/components/parameters/SpendingInsightType'
        - $ref: '#/components/parameters/InsightID'
        - $ref: '#/components/parameters/LatePaymentMinimumValueThreshold'
        - $ref: '#/components/parameters/LatePaymentMinimumDaysLateThreshold'
        - $ref: '#/components/parameters/RegularPaymentChangedMinimumAbsoluteChangeThreshold'
        - $ref: '#/components/parameters/RegularPaymentChangedMinimumPercentageChangeThreshold'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpendingInsightsDataResponse'
              example:
                operation_id: insights_v1_actionable_spending_details_get
                data:
                  id: late_payment_8789764a-df2f-4589-b550-00bcd0e9cb2c
                  type: late_payment
                  caused_by:
                    accounts:
                      - account_id: ee7a2d6a-2baa-461a-aca2-844e88a3f3e7
                        currency: USD
                        holder:
                          name: David Smith
                          relationship: unknown
                        account_name: My Current Account
                        account_type: current_account
                        usage_type: personal
                        provider: BankOfBud
                        identifiers:
                          iban: US29NWBK60161331926819
                        balances:
                          - date: '2023-05-12T00:00:00Z'
                            amount:
                              value: '3552.61'
                              currency: USD
                            type: interim_booked
                            credit_debit_indicator: credit
                          - date: '2023-05-12T00:00:00Z'
                            amount:
                              value: '3552.61'
                              currency: USD
                            type: expected
                            credit_debit_indicator: credit
                        credit_lines:
                          - date: '2023-05-12T00:00:00Z'
                            type: credit
                            amount:
                              value: '1000.00'
                              currency: USD
                    transactions:
                      - transaction_id: a_transaction_id
                        account_id: ee7a2d6a-2baa-461a-aca2-844e88a3f3e7
                        provider: a_bank_account_provider
                        description: MORTGAGE
                        credit_debit_indicator: debit
                        status: booked
                        amount:
                          value: '1400.00'
                          currency: USD
                        date_time: '2023-05-05T10:00:00Z'
                        enrichments:
                          categories:
                            l1:
                              slug: mortgage_and_rent
                              confidence: '0.99'
                            l2:
                              slug: mortgage
                              confidence: '0.98'
                          regularity:
                            frequency: monthly
                            confidence: '0.99'
                            predicted_date_times:
                              - '2023-05-10T10:00:00Z'
                  details:
                    days_late: 6
                    expected_date_time: '2023-05-10T10:00:00Z'
                metadata:
                  from: '2022-11-01T00:00:00Z'
                  to: '2023-05-16T17:30:00Z'
                  options:
                    - insight_type: late_payment
                      option: minimum_days_late_threshold
                      value: '3'
                    - insight_type: late_payment
                      option: minimum_value_threshold
                      value: '10.00'
        '404':
          description: Insight not found. This can occur if the returned insight was invalidated by an account refresh or other change to customer data.
  /insights/v1/custom/manage:
    post:
      tags:
        - Custom Insights
      summary: Create new custom insight
      description: |
        Create a custom insight to be applied to all customers upon ingestion or refresh of transactions
      security:
        - OAuth2: []
      operationId: custom_insight_v1_manage_post
      parameters:
        - $ref: '#/components/parameters/ClientId'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              required:
                - query
              properties:
                query:
                  type: string
                  description: |
                    A valid budql query representing the desired insight, see Custom Insights Guide for more details.
                  example: INFER risky_spender FROM transactions WHERE category_l2 = "crypto_platform_incoming"
                active:
                  type: boolean
                  description: Whether the insight is 'active' or not, defaults to true.
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                required:
                  - operation_id
                  - data
                properties:
                  operation_id:
                    type: string
                  data:
                    type: object
                    required:
                      - custom_insight_id
                    properties:
                      custom_insight_id:
                        type: string
                        format: uuid
              example:
                operation_id: custom_insight_v1_manage_post
                data:
                  custom_insight_id: 123e4567-e89b-12d3-a456-426655440000
        '400':
          description: The request contained an invalid payload, in this case often a syntax error in the query.
        5XX:
          description: An unexpected error occurred on the server side.
    get:
      tags:
        - Custom Insights
      summary: List existing custom insights
      description: |
        Retrieve a list of created custom insights, if they are currently active, and when they were created
      deprecated: false
      security:
        - OAuth2: []
      operationId: custom_insight_v1_manage_get
      parameters:
        - $ref: '#/components/parameters/ClientId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                required:
                  - operation_id
                  - data
                properties:
                  operation_id:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      required:
                        - custom_insight_id
                      properties:
                        custom_insight_id:
                          type: string
                          format: uuid
                          description: A uuid for the query
                        identifier:
                          type: string
                          description: A human readable identifier set in the query INFER <identifier> FROM ...
                        query:
                          type: string
                          description: The budql query representing the custom insight
                        created_at:
                          type: string
                          format: date-time
                        active:
                          type: boolean
                          description: whether the insight is 'active' or not
              example:
                operation_id: custom_insight_v1_manage_get
                data:
                  - custom_insight_id: 123e4567-e89b-12d3-a456-426655440000
                    identifier: risky_spender
                    query: INFER risky_spender FROM transactions WHERE category_l2 = "crypto_platform_incoming"
                    created_at: '2023-10-20T13:36:58Z'
        '400':
          description: Malformed request
        5XX:
          description: An unexpected error occurred on the server side
  /insights/v1/custom/detail/{custom_insight_id}:
    get:
      tags:
        - Custom Insights
      summary: Detail the transactions used to generate a custom insight
      description: |
        This endpoint will return some transactions used to determine the custom insight.

        More specifically it will return transactions filtered for in the WHERE expression of the custom insight query.
      deprecated: false
      security:
        - OAuth2: []
      operationId: custom_insight_v1_detail_get
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - $ref: '#/components/parameters/CustomerSecret'
        - $ref: '#/components/parameters/PathCustomInsightID'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                required:
                  - operation_id
                  - data
                properties:
                  operation_id:
                    type: string
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/components-schemas-Transaction'
                  metadata:
                    type: object
                    properties:
                      created_at:
                        type: string
                        description: The time when the profile was last built, and this insight was generated.
                      results:
                        type: integer
                        description: The number of transactions returned.
              example:
                operation_id: custom_insight_v1_detail_get
                data:
                  - transaction_id: fbdc28e82f0f137586a526a88ec4a6be
                    account_id: 5bd9ecaf31fc2d5172fd89cb61b89fc6
                    provider: BankOfBud
                    description: paypal* specialty coffee
                    credit_debit_indicator: debit
                    status: booked
                    amount:
                      value: '10.99'
                      currency: GBP
                    date_time: '2022-05-28T10:00:00Z'
                    posted_date_time: '2022-05-29T00:00:00Z'
                    enrichments:
                      categories:
                        l1:
                          slug: eating_out
                          confidence: '0.99'
                        l2:
                          slug: cafes_and_eating_out
                          confidence: '0.98'
                      merchant:
                        id: 01cc2d49-6144-46f1-9414-67c99b139a95
                        slug: specialty_coffee
                        display_name: Specialty Coffee Supplier Ltd.
                        logo: http://url/specialty_coffee_supplier_logo.jpeg
                        tokens:
                          - value: speciality coffee
                            confidence: '0.98'
                      location:
                        address_lines:
                          - '180'
                          - Shepherds Bush Rd
                          - London
                          - W6 7NL
                          - United Kingdom
                        geolocation:
                          longitude: 51.497678,
                          latitude: -0.223766
                      processor:
                        id: 18f63293-0217-4520-bbf0-071dca7a9d04
                        slug: paypal
                        display_name: PayPal
                        logo: http://url/paypal_logo.jpeg
                        tokens:
                          - value: paypal
                            confidence: '0.92'
                      regularity:
                        frequency: monthly
                        predicted_date_times:
                          - '2022-06-28T15:00:00Z'
                          - '2022-07-28T15:00:00Z'
                          - '2022-08-28T15:00:00Z'
                        group_label: a_group_id
                      transaction_types:
                        - card
                        - debit
                      names:
                        - jane doe
                    tags:
                      - regular-transaction
                  - transaction_id: a2294cebb45d2a6e0cfc70d270988d8c
                    account_id: 37c633a71237b9a8282e09587109668e
                    provider: BankOfBud
                    description: Tesco 2956 London GBR
                    credit_debit_indicator: debit
                    status: booked
                    amount:
                      value: '50.23'
                      currency: GBP
                    date_time: '2022-05-26T10:00:00Z'
                    posted_date_time: '2022-05-27T00:00:00Z'
                    enrichments:
                      categories:
                        l1:
                          slug: eating_out
                          confidence: '0.99'
                        l2:
                          slug: cafes_and_eating_out
                          confidence: '0.98'
                      merchant:
                        id: 0980cf54-6052-4527-84ff-e6f9b169884f
                        slug: tesco_stores
                        display_name: Tesco
                        logo: http://url/tesco_stores_logo.jpeg
                        tokens:
                          - value: tesco
                            confidence: '0.96'
                      location:
                        address_lines:
                          - '180'
                          - Shepherds Bush Rd
                          - London
                          - W6 7NL
                          - United Kingdom
                        geolocation:
                          longitude: 51.497678,
                          latitude: -0.223766
                      transaction_types:
                        - card
                        - debit
                metadata:
                  results: 2
                  created_at: '2023-11-23T10:41:55Z'
        '404':
          description: Custom insight doesn't exist, or there has been no profile built for this customer
        5XX:
          description: An unexpected error occurred on the server side
  /insights/v1/custom/manage/{custom_insight_id}:
    delete:
      tags:
        - Custom Insights
      summary: Delete existing custom insight
      description: |
        Permanently deletes a custom insight query
      deprecated: false
      security:
        - OAuth2: []
      operationId: custom_insight_v1_manage_delete
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/PathCustomInsightID'
      responses:
        '204':
          description: OK
        '404':
          description: Custom insight doesn't exist, thus cannot be deleted
        5XX:
          description: An unexpected error occurred on the server side
    patch:
      tags:
        - Custom Insights
      summary: Update existing custom insight
      deprecated: false
      description: |
        Patches a custom insight, updating the query, or setting it to active/inactive
      security:
        - OAuth2: []
      operationId: custom_insight_v1_manage_patch
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/PathCustomInsightID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              properties:
                query:
                  type: string
                  description: |
                    A valid budql query representing the desired insight, see Custom Insights Guide for more details,
                    defaults to the value of the existing insight.
                  example: INFER risky_spender FROM transactions WHERE category_l2 = "crypto_platform_incoming"
                active:
                  type: boolean
                  description: whether the insight is 'active' or not, defaults to the value of the existing insight
      responses:
        '204':
          description: OK
        '400':
          description: The request contained an invalid payload, in this case often a syntax error in the query.
        '404':
          description: Custom insight doesn't exist, thus cannot be patched
        5XX:
          description: An unexpected error occurred on the server side
  /insights/v1/custom/manage/all:
    delete:
      tags:
        - Custom Insights
      summary: Delete all existing custom insights
      description: |
        Permanently deletes all custom insight queries
      deprecated: false
      security:
        - OAuth2: []
      operationId: custom_insight_v1_manage_delete_all
      parameters:
        - $ref: '#/components/parameters/ClientId'
      responses:
        '204':
          description: OK
        5XX:
          description: An unexpected error occurred on the server side
  /insights/v1/custom/profile:
    post:
      tags:
        - Custom Insights
      summary: Build custom insights profile
      description: |
        Manually builds a custom insight profile for a customer, is automatically called after successful ingestion and enrichment.
      deprecated: false
      security:
        - OAuth2: []
      operationId: custom_insight_v1_profile_post
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
        - in: header
          name: X-Now
          required: false
          schema:
            type: string
            format: date-time
            example: '2000-01-01T00:00:00.05Z'
      responses:
        '204':
          description: OK
    get:
      tags:
        - Custom Insights
      summary: Retrieve custom insights profile
      description: |
        Lists the insights which applied to a customer at \'created_at\'.
        To recompute make a call to Build custom insights profile.
      deprecated: false
      security:
        - OAuth2: []
      operationId: custom_insight_v1_profile_get
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                required:
                  - operation_id
                  - data
                properties:
                  operation_id:
                    type: string
                  data:
                    type: array
                    items:
                      type: object
                      required:
                        - custom_insight_id
                        - identifier
                        - link
                        - created_at
                      properties:
                        custom_insight_id:
                          type: string
                          format: uuid
                          description: A uuid for the query used to generate the insight
                        identifier:
                          type: string
                          description: A human readable identifier set in the query INFER <identifier> FROM ...
                        created_at:
                          type: string
                          format: date-time
                        link:
                          description: link to a detail view of the insight
                          type: string
              example:
                operation_id: custom_insight_v1_profile_get
                data:
                  - identifier: always_true
                    custom_insight_id: 19ebab24-9c73-4802-b5d2-c401f3558d8d
                    link: insights/v1/custom/detail/19ebab24-9c73-4802-b5d2-c401f3558d8d
                    created_at: '2021-08-11T14:00:00Z'
  /characteristics/v1/customer:
    get:
      tags:
        - Retrieve Customer Characteristics
      summary: Retrieve Customer Characteristics
      description: |
        Retrieves a collection of characteristics associated with an individual Customer. 
        For data on why an individual characteristic applies to a Customer, use the relevant detailed endpoint.

        The currently supported characteristics are:

        | Characteristic | Description                                                |
        |:---------------|:-----------------------------------------------------------|
        | `credit_card`  | Customer has made credit card repayments                   |
        | `loan`         | Customer has made loan repayments (excluding credit cards) |
        | `overdraft`    | Customer has paid overdraft fees                           |
        | `saver`        | Customer has savings transactions                          |

        New characteristics will be released and added to this list without a breaking change notice.
      operationId: characteristics_v1_customer_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetCustomerCharacteristicsResponse'
              examples:
                Multiple Characteristics:
                  value:
                    operation_id: characteristics_v1_customer_get
                    data:
                      - type: credit_card
                        link: characteristics/v1/customer/credit_card
                      - type: loan
                        link: characteristics/v1/customer/loan
                      - type: overdraft
                        link: characteristics/v1/customer/overdraft
                      - type: saver
                        link: characteristics/v1/customer/saver
                No Characteristics:
                  value:
                    operation_id: characteristics_v1_customer_get
                    data: []
        '401':
          description: Unauthorised request
        5XX:
          description: An unexpected error occurred on the server side
  /characteristics/v1/customer/credit-card:
    get:
      tags:
        - Retrieve Customer Characteristics
      summary: Retrieve Customer Characteristics - Credit Card
      description: |
        Retrieves detailed information for a customer that marks them as a credit card user.
      operationId: characteristics_v1_customer_credit_card_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetCreditCardCharacteristicsResponse'
              example:
                operation_id: characteristics_v1_customer_credit_card_get
                data:
                  credit_card_transactions:
                    - transaction_id: 864a3efc-6104-4dde-99a0-c3d91a8bcecf
                      account_id: ad7d5904-39ab-4736-b726-5792c7a2146e
                      credit_debit_indicator: debit
                      description: CREDIT CARD PAYMENT
                      provider: BankOfBud
                      status: booked
                      amount:
                        value: '1234.56'
                        currency: USD
                      date_time: '2023-07-03T10:00:00Z'
                      enrichments:
                        categories:
                          l1:
                            slug: borrowing_and_loans
                            confidence: '0.99'
                          l2:
                            slug: credit_cards
                            confidence: '0.99'
                  credit_card_transaction_totals:
                    - amount:
                        value: '1234.56'
                        currency: USD
                      credit_debit_indicator: debit
        '401':
          description: Unauthorised request
        5XX:
          description: An unexpected error occurred on the server side
  /characteristics/v1/customer/loan:
    get:
      tags:
        - Retrieve Customer Characteristics
      summary: Retrieve Customer Characteristics - Loan
      description: |
        Retrieves detailed information for a customer that marks them as a loan user.
      operationId: characteristics_v1_customer_loan_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetLoanCharacteristicsResponse'
              example:
                operation_id: characteristics_v1_customer_loan_get
                data:
                  loan_transactions:
                    - transaction_id: 864a3efc-6104-4dde-99a0-c3d91a8bcecf
                      account_id: ad7d5904-39ab-4736-b726-5792c7a2146e
                      credit_debit_indicator: debit
                      description: CAR LOAN REPAYMENT
                      provider: BankOfBud
                      status: booked
                      amount:
                        value: '1234.56'
                        currency: USD
                      date_time: '2023-07-03T10:00:00Z'
                      enrichments:
                        categories:
                          l1:
                            slug: borrowing_and_loans
                            confidence: '0.92'
                          l2:
                            slug: vehicle_loan
                            confidence: '0.80'
                  loan_transaction_totals:
                    - amount:
                        value: '1234.56'
                        currency: USD
                      credit_debit_indicator: debit
        '401':
          description: Unauthorised request
        5XX:
          description: An unexpected error occurred on the server side
  /characteristics/v1/customer/overdraft:
    get:
      tags:
        - Retrieve Customer Characteristics
      summary: Retrieve Customer Characteristics - Overdraft
      description: |
        Retrieves detailed information for a customer that marks them as an overdraft user.
      operationId: characteristics_v1_customer_overdraft_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetOverdraftCharacteristicsResponse'
              example:
                operation_id: characteristics_v1_customer_overdraft_get
                data:
                  overdraft_transactions:
                    - transaction_id: 864a3efc-6104-4dde-99a0-c3d91a8bcecf
                      account_id: ad7d5904-39ab-4736-b726-5792c7a2146e
                      credit_debit_indicator: debit
                      description: OVERDRAFT FEE
                      provider: BankOfBud
                      status: booked
                      amount:
                        value: '12.34'
                        currency: USD
                      date_time: '2023-07-03T10:00:00Z'
                      enrichments:
                        categories:
                          l1:
                            slug: banking
                            confidence: '0.92'
                          l2:
                            slug: overdraft_fees
                            confidence: '0.80'
                  overdraft_transaction_totals:
                    - amount:
                        value: '12.34'
                        currency: USD
                      credit_debit_indicator: debit
        '401':
          description: Unauthorised request
        5XX:
          description: An unexpected error occurred on the server side
  /characteristics/v1/customer/saver:
    get:
      tags:
        - Retrieve Customer Characteristics
      summary: Retrieve Customer Characteristics - Saver
      description: |
        Retrieves detailed information for a customer that marks them as a saver.
      operationId: characteristics_v1_customer_saver_get
      security:
        - OAuth2: []
      parameters:
        - $ref: '#/components/parameters/ClientId'
        - $ref: '#/components/parameters/CustomerId'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GetSaverCharacteristicsResponse'
              example:
                operation_id: characteristics_v1_customer_saver_get
                data:
                  saver_transactions:
                    - transaction_id: 864a3efc-6104-4dde-99a0-c3d91a8bcecf
                      account_id: ad7d5904-39ab-4736-b726-5792c7a2146e
                      credit_debit_indicator: debit
                      description: SAVINGS
                      provider: BankOfBud
                      status: booked
                      amount:
                        value: '150.00'
                        currency: USD
                      date_time: '2023-07-03T10:00:00Z'
                      enrichments:
                        categories:
                          l1:
                            slug: pensions_savings_and_investments
                            confidence: '0.99'
                          l2:
                            slug: savings
                            confidence: '0.99'
                  saver_transactions_totals:
                    - amount:
                        value: '12.34'
                        currency: USD
                      credit_debit_indicator: debit
        '401':
          description: Unauthorised request
        5XX:
          description: An unexpected error occurred on the server side
components:
  securitySchemes:
    Basic:
      type: http
      scheme: basic
    OAuth2:
      type: oauth2
      flows:
        clientCredentials:
          tokenUrl: /v1/oauth/token
          scopes: {}
      description: |

        Authentication flow:

        1. Perform OAuth2 Client Credentials authentication using API Credentials (`client_id`,`client_secret`) to obtain an `access_token` against `/v1/oauth/token` endpoint,
        2. Use `access_token` as Bearer Authorisation for every other API request,
        3. Include `X-Client-Id` (=client_id) within the header of every API request,
        4. Note that some of the requests may also require `X-Customer-Id` to be provided within the request header.

        ### Examples
        Obtain OAuth2 `access_token` and `refresh_token` using `grant_type=client_credentials` and HTTP Basic auth header

        ```
        curl --basic --user {{client_id}}:{{client_secret}} \
          -X POST https://api-sandbox.thisisbud.com/v1/oauth/token \
          -H 'Content-Type: application/x-www-form-urlencoded' \
          -d grant_type=client_credentials
        ```

        Successful response:
        ```
        {
          "operation_id": "oauth_token_post",
          "data": {
            "access_token": "dd0c17e3fd6d2ce94aa091257a3ea393b4f9b5cf3d3e998f07dc9826da86ff15",
            "token_type": "bearer",
            "expires_in": 3600,
            "refresh_token": "fac32cca7559d9f6e8f1dfe9a99c71fa1dcfeb482bedf287d7934d2667ae54b3"
          }
        }
        ```

        Refresh `access_token` token using `refresh_token` against `/v1/oauth/token` endpoint with `grant_type=refresh_token`

        ```
        curl -X POST \
          https://api-sandbox.thisisbud.com/v1/oauth/token \
          -H 'Content-Type: application/x-www-form-urlencoded' \
          -H 'X-Client-Id: {{client_id}}' \
          -d 'grant_type=refresh_token&refresh_token={{refresh_token}}'
        ```

        Successful response:
        ```
        {
            "operation_id": "oauth_token_post",
            "data": {
                "access_token": "cc0c17e3fd6d2ce94aa091257a3ea393b4f9b5cf3d3e998f07dc9826da86ff94",
                "token_type": "bearer",
                "expires_in": 3600,
                "refresh_token": "ffc30cca7559d9f6e8f1dfe9a99c71fa1dcfeb482bedf287d7934d2667ae54b3"
            }
        }
        ```
  schemas:
    RetrieveAuthTokenResponse:
      title: Retrieve Auth Token Response
      required:
        - operation_id
        - data
      properties:
        operation_id:
          type: string
          enum:
            - oauth_token_create
        data:
          type: object
          required:
            - access_token
            - token_type
            - expires_in
            - refresh_token
          properties:
            access_token:
              type: string
              description: A short-lived token that is used to authenticate requests to Bud endpoints.
            token_type:
              type: string
              description: The type of token provided in the `access_token` field (typically `Bearer`).
            expires_in:
              type: integer
              description: The amount of time (in seconds) in which the `access_token` will expire.
            refresh_token:
              type: string
              description: A long-lived token that can be used to obtain a new `access_token` when the current `access_token` expires.
    IngestStatusCompletedData:
      title: Completed Task Data
      type: array
      items:
        $ref: '#/components/schemas/IngestResponseV2SubTask'
    IngestStatusTaskMetadata:
      title: Ingest Task Metadata
      description: Expected response structure.
      type: object
      required:
        - task_id
        - status
      properties:
        task_id:
          type: string
          format: uuid
          description: Unique task identifier.
        status:
          $ref: '#/components/schemas/OverallIngestResponseStatus'
        ingest_request_id:
          type: string
          format: uuid
          description: Unique identifier of the initial ingest request
        ingest_route:
          type: string
          description: The endpoint used for this ingest task
          enum:
            - ingest_accounts_post
            - v2_ingest_transactions_post
        ingest_schema:
          type: string
          description: The account/transaction schema used for the ingest
          enum:
            - application/bud-accounts+json
            - application/plaid-accounts-v1+json
            - application/finicity-accounts-v1+json
            - application/bud-transaction-v3+json
            - application/plaid-transactions-v1+json
            - application/finicity-transactions-v1+json
    IngestPlaidAccountsRequest:
      title: Plaid V1 Accounts Request
      type: array
      items:
        $ref: '#/components/schemas/PlaidCustomerWithAccounts'
    PlaidCustomerWithAccounts:
      title: Customer With Accounts
      type: object
      required:
        - customer_id
        - accounts
      properties:
        customer_id:
          type: string
          format: uuid
          description: Unique identifier for the Customer.
          example: c3829683-b6b2-4988-a7f7-697a9fa201bc
        accounts:
          type: array
          description: List of accounts that belongs to the customer.
          minLength: 1
          items:
            $ref: '#/components/schemas/PlaidCustomerAccount'
    PlaidCustomerAccount:
      title: Customer Account
      type: object
      required:
        - account_id
        - name
        - subtype
      properties:
        account_id:
          type: string
          description: Unique identifier for the account.
        balances:
          $ref: '#/components/schemas/PlaidAccountBalance'
        name:
          type: string
          description: The name of the account, either assigned by the user or by the financial institution itself
        official_name:
          type: string
          description: The official name of the account as given by the financial institution
        type:
          type: string
          enum:
            - investment
            - credit
            - depository
            - loan
            - brokerage
            - other
        subtype:
          type: string
          enum:
            - checking
            - savings
            - hsa
            - cd
            - money market
            - paypal
            - prepaid
            - cash management
            - ebt
            - credit card
            - auto
            - business
            - commercial
            - construction
            - consumer
            - home equity
            - loan
            - mortgage
            - overdraft
            - line of credit
            - student
            - other
            - '529'
            - 401a
            - 401k
            - 403b
            - 457b
            - brokerage
            - cash isa
            - crypto exchange
            - education savings account
            - fixed annuity
            - gic
            - health reimbursement arrangement
            - ira
            - isa
            - keogh
            - lif
            - life insurance
            - lira
            - lrif
            - lrsp
            - mutual fund
            - non-taxable brokerage account
            - other annuity
            - pension
            - prif
            - profit sharing plan
            - qshr
            - rdsp
            - resp
            - retirement
            - rlif
            - roth
            - roth 401k
            - rrif
            - rrsp
            - sarsep
            - sep ira
            - simple ira
            - sipp
            - stock plan
            - tfsa
            - trust
            - ugma
            - utma
            - variable annuity
    PlaidAccountBalance:
      title: Customer Account Balance
      type: object
      required:
        - current
        - iso_currency_code
        - last_updated_datetime
      properties:
        available:
          type: number
          format: double
          description: The amount of funds available to be withdrawn from the account, as determined by the financial institution.
        current:
          type: number
          format: double
          description: The amount of funds available to be withdrawn from the account, as determined by the financial institution.
        limit:
          type: number
          format: double
          description: The amount of funds available to be withdrawn from the account, as determined by the financial institution.
        iso_currency_code:
          type: string
          format: currency
          description: The ISO-4217 currency code of the balance
        last_updated_datetime:
          type: string
          format: date-time
          description: Timestamp in ISO 8601 format (YYYY-MM-DDTHH:mm:ssZ) indicating the last time that the balance for the given account has been updated
    IngestPlaidTransactionsRequest:
      title: Plaid V1 Transactions Request
      type: array
      items:
        $ref: '#/components/schemas/PlaidTransactions'
    PlaidTransactions:
      title: Customer With Transactions
      type: object
      required:
        - customer_id
        - transactions
      properties:
        customer_id:
          $ref: '#/components/schemas/CustomerID'
        sync_enrichments:
          $ref: '#/components/schemas/SynchronousEnrichmentsList'
        transactions:
          type: array
          description: List of transactions that belongs to the customer.
          minLength: 1
          items:
            $ref: '#/components/schemas/PlaidTransaction'
        transaction_windows:
          $ref: '#/components/schemas/TransactionWindowArray'
    PlaidTransaction:
      title: Plaid Customer Transaction
      type: object
      description: A plaid formatted transaction for ingestion.
      required:
        - account_id
        - transaction_id
        - amount
        - date
        - name
        - iso_currency_code
        - pending
      properties:
        account_id:
          type: string
          description: Unique identifier for the Customer bank account. Max length 255.
          example: 6PdjjRP6LmugpBy5NgQvUqpRXMWxzktg3rwrk
        transaction_id:
          type: string
          description: |
            Unique, immutable transaction identifier. Maximum of 255 characters. 
            It's important this ID is immutable over time and unique as we use this ID as key to store the transaction against your customer, 
            so if more than one transaction has the same ID for the same customer, we will store only one of them.
          example: lPNjeW1nR6CDn5okmGQ6hEpMo4lLNoSrzqDje
        amount:
          type: number
          format: double
          description: The settled value of the transaction
          example: 99.99
        date:
          type: string
          format: date
          description: For pending transactions, the date that the transaction occurred; for posted transactions, the date that the transaction posted. Both dates are returned in an ISO 8601 format ( YYYY-MM-DD ).
          example: '2020-01-31'
        datetime:
          type: string
          format: date-time
          description: Date and time when a transaction was posted in ISO 8601 format ( YYYY-MM-DDTHH:mm:ssZ ).
          example: '2020-06-17T11:00:00Z'
        name:
          type: string
          description: The merchant name or transaction description.
          example: The RSPCA, Southwater
        original_description:
          type: string
          description: The string returned by the financial institution to describe the transaction.
        iso_currency_code:
          type: string
          format: ISO-4217
          description: The ISO-4217 currency code of the transaction
          example: USD
        pending:
          type: boolean
          description: The status of the transaction.
        payment_channel:
          type: string
          description: The channel used to make a payment.
          example: online or in store
        merchant_name:
          type: string
          description: The merchant name
          example: Apple
        location:
          $ref: '#/components/schemas/PlaidLocation'
    PlaidLocation:
      title: Customer Transaction Location
      type: object
      description: A representation of where a transaction took place
      properties:
        address:
          type: string
          description: The street address where the transaction occurred.
          example: 900 fancy street
        city:
          type: string
          description: The city where the transaction occurred.
          example: New York
        region:
          type: string
          description: The region or state where the transaction occurred
          example: NY
        postal_code:
          type: string
          description: The postal code where the transaction occurred
          example: '96858'
        country:
          type: string
          format: ISO 3166-1 alpha-2
          description: The ISO 3166-1 alpha-2 country code where the transaction occurred.
          example: US
    IngestFinicityAccountsRequest:
      title: Finicity V1 Accounts Request
      type: array
      items:
        $ref: '#/components/schemas/FinicityCustomerWithAccounts'
    FinicityCustomerWithAccounts:
      title: Customer With Accounts
      type: object
      required:
        - customer_id
        - accounts
      properties:
        customer_id:
          type: string
          format: uuid
          description: Unique identifier for the Customer.
          example: c3829683-b6b2-4988-a7f7-697a9fa201bc
        accounts:
          type: array
          description: List of accounts that belongs to the customer.
          minLength: 1
          items:
            $ref: '#/components/schemas/FinicityCustomerAccount'
    FinicityCustomerAccount:
      title: Customer Account
      type: object
      required:
        - id
        - name
        - type
        - institutionId
        - currency
        - balance
        - balanceDate
      properties:
        id:
          type: string
          description: The ID of the account.
        name:
          type: string
          description: The account name from the institution.
        type:
          type: string
          description: Finicity Account Types
          enum:
            - checking
            - savings
            - cd
            - moneyMarket
            - creditCard
            - lineOfCredit
            - investment
            - investmentTaxDeferred
            - employeeStockPurchasePlan
            - ira
            - 401k
            - roth
            - 403b
            - 529plan
            - rollover
            - ugma
            - utma
            - keogh
            - 457plan
        status:
          type: string
          description: The type of the account
          enum:
            - active
            - pending
        institutionId:
          type: string
          description: The ID of the institution for this account.
        currency:
          type: string
          format: currency
          description: ISO 4217 currency code
        balance:
          type: number
          format: double
          description: The cleared balance of the account as-of balanceDate.
        balanceDate:
          type: number
          description: A Unix Time timestamp showing when the balance was captured.
        detail:
          $ref: '#/components/schemas/FinicityCustomerAccountDetail'
    FinicityCustomerAccountDetail:
      title: Customer Account Detail
      type: object
      properties:
        availableBalanceAmount:
          type: number
          format: double
          description: (Checking/Savings/CD/MoneyMarket) and (Mortgage/Loan) The available balance (typically the current balance with adjustments for any pending transactions)
        creditMaxAmount:
          type: number
          format: double
          description: The accountâ€™s credit limit
        creditAvailableAmount:
          type: number
          format: double
          description: The available credit (typically the credit limit minus the current balance)
    IngestFinicityTransactionsRequest:
      title: Finicity V1 Transactions Request
      type: array
      items:
        $ref: '#/components/schemas/FinicityTransactions'
    FinicityTransactions:
      title: Finicity Customer Transactions
      type: object
      required:
        - customer_id
        - transactions
      properties:
        customer_id:
          $ref: '#/components/schemas/CustomerID'
        sync_enrichments:
          $ref: '#/components/schemas/SynchronousEnrichmentsList'
        transactions:
          type: array
          description: List of transactions that belongs to the customer.
          minLength: 1
          items:
            $ref: '#/components/schemas/FinicityTransaction'
        transaction_windows:
          $ref: '#/components/schemas/TransactionWindowArray'
    FinicityTransaction:
      title: Customer Transaction
      type: object
      description: A finicity formatted transaction for ingestion - US only
      required:
        - id
        - amount
        - accountId
        - status
        - transactionDate
        - currencySymbol
      properties:
        id:
          type: number
          description: |
            Unique, immutable transaction identifier. Maximum of 255 characters. 
            It's important this ID is immutable over time and unique as we use this ID as key to store the transaction against your customer, 
            so if more than one transaction has the same ID for the same customer, we will store only one of them.
          example: 100976507328
        amount:
          type: number
          format: double
          description: The total amount of the transaction.
          example: -828.9
        feeAmount:
          type: number
          format: double
          description: The portion of the overall transaction amount applied to fees.
          example: 0.03
        accountId:
          type: number
          description: The ID of the account associated with this transaction.
          example: 3009327691
        status:
          type: string
          description: The ID of the customer associated with the transaction.
          enum:
            - pending
            - active
        description:
          type: string
          description: The description value is from the financial institution (FI), often known as the payee. Required if memo is blank.
          example: Buy Stock
        memo:
          type: string
          description: Required if description is blank.
          example: GOOGLE*YOUTUBEPREMIUM GOOGLE*YOUTUBEPREM
        type:
          type: string
          description: If provided by the institution, the following values may be returned in the field of a record.
          enum:
            - atm
            - cash
            - check
            - credit
            - debit
            - deposit
            - directDebit
            - directDeposit
            - dividend
            - fee
            - interest
            - other
            - payment
            - pointOfSale
            - repeatPayment
            - serviceCharge
            - transfer
        transactionDate:
          type: string
          format: unix-time
          description: The timestamp of the transaction when it occurred. Unix timestamp
          example: '1642521600'
        postedDate:
          type: string
          format: unix-time
          description: The timestamp of the transaction when it was posted or cleared by the institution. Unix timestamp
          example: '1642521600'
        effectiveDate:
          type: string
          format: unix-time
          description: A timestamp of the transaction when it became effective on an account by an institution. Unix timestamp
          example: '1642521600'
        currencySymbol:
          type: string
          format: ISO 4217
          description: ISO 4217 currency code
          example: USD
        categorization:
          $ref: '#/components/schemas/Categorization'
    Categorization:
      title: Transaction Categorization
      type: object
      description: categorization Record
      properties:
        normalizedPayeeName:
          type: string
          description: A normalized payee, derived from the transactionâ€™s description and memo fields.
          example: Apple
        category:
          type: string
          description: One of the values from Categories (assigned based on the payee name)
          example: New York
        city:
          type: string
          description: City of transaction
          example: New York
        state:
          type: string
          description: State of transaction
          example: NY
        postal_code:
          type: string
          description: The postal code where the transaction occurred
          example: '96858'
        country:
          type: string
          description: The ISO 3166-1 country code where the transaction occurred.
          example: USA
    ListTransactionsResponse:
      title: Retrieve Transactions Response
      type: object
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          type: string
          enum:
            - v2_transactions_get
        data:
          type: array
          items:
            $ref: '#/components/schemas/Transaction'
        metadata:
          type: object
          required:
            - results
          properties:
            results:
              type: integer
              description: The number of results returned.
            next_page_token:
              type: string
              description: The token required to retrieve the next page of results. Will be omitted if no next page exists.
    Transaction:
      title: Transaction
      type: object
      description: A financial transaction
      required:
        - transaction_id
        - account_id
        - description
        - amount
        - credit_debit_indicator
        - status
        - date_time
      properties:
        transaction_id:
          type: string
          description: Unique identifier for the transaction. May be mutable depending on original ingestion source.
        account_id:
          type: string
          description: Identifier for the account associated with the transaction.
        provider:
          type: string
          description: Name of the transaction source provider.
        description:
          type: string
          description: Description of the transaction. Similar to the transaction information in Open Banking.
        credit_debit_indicator:
          type: string
          description: Credit/Debit Indicator
          enum:
            - credit
            - debit
        status:
          type: string
          description: Status of the transaction. Defaults to booked.
          enum:
            - booked
            - pending
        amount:
          $ref: '#/components/schemas/BudAmount'
        date_time:
          type: string
          description: Date that the transaction occured compliant with RFC3339.
        posted_date_time:
          type: string
          description: Date the assets involved in the transaction transferred compliant with RFC3339. For credits this is the date that the asset becomes available, for debits this is the date that the asset ceased to be available
        enrichments:
          $ref: '#/components/schemas/Enrichments'
        merchant_category_code:
          type: string
          description: Merchant category code conforming to ISO 18245, related to the type of services or goods the merchant provides for the transaction.
        tags:
          type: array
          description: |
            A list of potential tags associated with the transaction after contextual enrichment, which can be used for filtering.

            Region and client specific.

            | Value                   | Description                                               |
            |:------------------------|:----------------------------------------------------------|
            | `benefit`               | A government/non-profit benefit transaction               |
            | `debt-collection`       | A transaction associated with a known debt-collector      |
            | `loan`                  | A transaction associated with a loan                      |
            | `income`                | A transaction associated with income                      |
            | `pending`               | A transaction which has not been booked                   |
            | `regular-transaction`   | A transaction predicted to occur with a regular frequency |
            | `subscription`          | A transaction associated with a subscription service      |
            | `online`                | A transaction associated with an online merchant          |
          items:
            type: string
    Enrichments:
      title: Enrichments
      type: object
      description: Contextual enrichments associated with a Transaction
      properties:
        categories:
          $ref: '#/components/schemas/Categories'
        merchant:
          $ref: '#/components/schemas/Merchant'
        processor:
          $ref: '#/components/schemas/Processor'
        regularity:
          $ref: '#/components/schemas/Regularity'
        location:
          $ref: '#/components/schemas/Location'
        transaction_types:
          type: array
          description: Transaction types associated with the transaction
          items:
            type: string
        names:
          type: array
          description: Names that were detected in the transaction description
          items:
            type: string
    Categories:
      title: Categories
      type: object
      description: Categories enrichment associated with a Transaction
      properties:
        l1:
          $ref: '#/components/schemas/Category'
          description: Level 1 Category
        l2:
          $ref: '#/components/schemas/Category'
          description: Level 2 Category
    Category:
      title: Category
      type: object
      description: Category associated with a Transaction
      required:
        - slug
        - confidence
      properties:
        slug:
          type: string
          description: Unique human readable identifier of the category. Not subject to version control.
        confidence:
          type: string
          description: Degree of belief of correct assignment, expressed as a probability.
    Merchant:
      title: Merchant
      type: object
      description: |
        Merchant enrichment associated with a Transaction, as generated using a combination of Bud's artificial  intelligence models and database of known merchants.
      properties:
        id:
          type: string
          description: UUID corresponding to the merchant, if available. Subject to version control.
        slug:
          type: string
          description: Unique human readable identifier of the merchant. Not subject to version control.
        display_name:
          type: string
          description: UI friendly display name for the merchant.
        logo:
          type: string
          description: URL supplying merchant logo, if available.
        tokens:
          type: array
          description: |
            A list of tokens calculated from the transaction model, used to identify the Merchant. 
            This list is often present even if the merchant details (id, slug, disply_name, logo) are not returned.
          items:
            $ref: '#/components/schemas/Token'
        website:
          type: string
          description: URL supplying merchant website, if available.
    Processor:
      title: Processor
      type: object
      description: Processor enrichment associated with a Transaction
      properties:
        id:
          type: string
          description: UUID corresponding to the processor, if available. Subject to version control.
        slug:
          type: string
          description: Unique human readable identifier of the merchant. Not subject to version control.
        display_name:
          type: string
          description: UI friendly display name for the processor.
        logo:
          type: string
          description: URL supplying processor logo, if available.
        tokens:
          type: array
          description: |
            A list of tokens calculated from the transaction model, used to identify the Merchant. 
            This list is often present even if the merchant details (id, slug, disply_name, logo) are not returned.
          items:
            $ref: '#/components/schemas/Token'
        website:
          type: string
          description: URL supplying merchant website, if available.
    Regularity:
      title: Regularity
      type: object
      description: Regularity enrichment associated with a Transaction.
      properties:
        frequency:
          type: string
          description: Detected frequency of the Transaction.
          enum:
            - unknown
            - daily
            - weekly
            - biweekly
            - monthly
            - quarterly
            - six_monthly
            - annually
        predicted_date_times:
          type: array
          description: Expected date times for the Transaction to repeat.
          items:
            type: string
        group_label:
          type: string
          description: Unique label applied to multiple transactions in the same group.
    Location:
      title: Location
      type: object
      description: Location enrichment associated with a Transaction
      properties:
        address:
          type: object
          description: The address of the detected location.
          properties:
            address_lines:
              type: array
              description: |
                The lines of the detected address. These could be anything from a full street address down to a simple town or city.
                The level of detail depends on the resolution with which we are able to detect the transaction location.
              items:
                type: string
            geolocation:
              type: object
              description: The geolocation if an exact match is found
              properties:
                latitude:
                  type: number
                  format: double
                longitude:
                  type: number
                  format: double
            country:
              type: string
              description: An ISO-3166 Alpha-3 country code representing the detected country the transaction was located.
        tokens:
          type: array
          description: A list of tokenised location string. These could be anything from a full street address down to a simple town or city.
          items:
            type: string
    Token:
      title: Token
      type: object
      description: The token item.
      required:
        - value
        - confidence
      properties:
        value:
          type: string
        confidence:
          type: string
          description: Degree of belief of correct assignment, expressed as a probability.
    SimilarTransactionsResponse:
      title: Similar Transactions Response
      type: object
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          type: string
          enum:
            - corrections_v2_similar_categories_get
        data:
          type: array
          items:
            $ref: '#/components/schemas/Transaction'
        metadata:
          type: object
          required:
            - results
          properties:
            results:
              type: integer
              description: The number of results returned.
            exclude_source:
              type: boolean
    SimilarTransactionsIncludingMerchantsResponse:
      title: Retrieve Similar Transactions including Merchants Response
      type: object
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          type: string
          enum:
            - corrections_v2_similar_merchants_get
        data:
          type: array
          items:
            $ref: '#/components/schemas/Transaction'
        metadata:
          type: object
          required:
            - results
          properties:
            results:
              type: integer
              description: The number of results returned.
            exclude_source:
              type: boolean
              description: Is the request transaction being excluded from the response
    RegularTransactionsResponse:
      title: Regular Transactions Response
      type: object
      description: Regular Transactions Response
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: array
          description: Information surrounding possible groups of Regular transactions
          items:
            $ref: '#/components/schemas/RegularTransaction'
        metadata:
          $ref: '#/components/schemas/ResultsMetadata'
    RegularTransaction:
      title: Regular Transaction Group
      description: Information surrounding a possible group of Regular transactions
      allOf:
        - $ref: '#/components/schemas/RegularPaymentsConfirmed'
        - type: object
          required:
            - transactions
          properties:
            transactions:
              type: array
              items:
                $ref: '#/components/schemas/BasicTransaction'
    RegularPaymentsConfirmed:
      title: Regular Payment Object
      type: object
      description: Details surrounding the regularity of the transaction
      required:
        - label
        - score
        - period
      properties:
        label:
          type: string
          description: A recurring transaction group identifier label associating regular transactions e.g. all Spotify transactions that are regular by the same monthly period will share the same label. The format of the label includes a hash of the transaction description and the amount, followed by an integer corresponding to the number of regular groups found, i.e. <hash>-<i>.
        score:
          type: string
          description: A floating point number between 0 and 1, to define the confidence level that the transaction is regular or not.
        period:
          type: string
          description: To describe the period between each transaction in a regular group.
          enum:
            - daily
            - weekly
            - biweekly
            - monthly
            - quarterly
            - six monthly
            - annually
            - unknown
    OperationId:
      title: Operation Id Field
      type: string
      description: A unique identifier/reference associated with a given endpoint/operation
    Error:
      title: Error Object
      type: object
      nullable: true
      description: Contains a field specific error message
      additionalProperties:
        type: string
    Errors:
      title: Array of Error Object
      description: Contains a list of error messages
      type: object
      additionalProperties:
        type: array
        items:
          type: string
    ServerErrorResponse:
      title: Server Error Response
      type: object
      required:
        - operation_id
        - code_id
        - message
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        code_id:
          type: string
          description: A descriptive enough string that is linked to the reason for the error.
        message:
          type: string
          description: An actual user friendly error message.
        errors:
          anyOf:
            - $ref: '#/components/schemas/Error'
            - $ref: '#/components/schemas/Errors'
    CustomersGetAllV3DataItem:
      type: object
      description: Representation of a Customer.
      required:
        - customer_id
        - created_at
      properties:
        customer_id:
          type: string
          format: uuid
        created_at:
          type: string
          description: Date and time at which the Customer has been registered (ISO 8601).
        idempotent_identifier:
          type: string
          description: Client-assigned idempotent customer identifier (omitted if not present).
    CustomersGetAllV3ResponseMetadata:
      type: object
      description: Metadata that defines token-based pagination of results.
      required:
        - results
      properties:
        next_page_token:
          type: string
          description: Page token for next part of the result set, omitted if there are no other pages.
        results:
          type: integer
          description: The number of results returned.
    CustomersGetAllV3Response:
      title: List customers response
      type: object
      description: Expected response structure.
      required:
        - operation_id
        - data
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: array
          items:
            $ref: '#/components/schemas/CustomersGetAllV3DataItem'
        metadata:
          $ref: '#/components/schemas/CustomersGetAllV3ResponseMetadata'
    BadRequestResponse:
      title: Bad Request Response
      type: object
      description: Expected response structure
      required:
        - operation_id
        - code_id
        - message
        - errors
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        code_id:
          type: string
          description: A descriptive enough string that is linked to the reason for the error.
        message:
          type: string
        errors:
          $ref: '#/components/schemas/Errors'
    CustomerContextType:
      title: Customer Context Type
      type: string
      enum:
        - personal
        - business
      description: |
        The type of customer signed up:

        | Value      | Description                             |
        |------------|-----------------------------------------|
        | `personal` | Individuals with personal bank accounts |
        | `business` | Businesses with business accounts       |
    CustomerContextRegion:
      title: Customer Context Region
      type: string
      description: The region/country where the customer is located, format defined by ISO 3166 Alpha-2.
    CustomerContextLocale:
      title: Customer Context Locale
      type: string
      description: The locale/language, based on the region, format defined by BCP 47.
    CustomerContextModels:
      title: Customer Context Models
      type: object
      description: The configuration for Bud's enrichment models.
      properties:
        categorisation:
          type: string
          description: The name of the categorisation model to use for this customer at enrichment. See *List Categorisation Models V2* for available models.
    CustomerContextRequest:
      title: Customer Context
      description: The context in which a customer is processed throughout the Bud platform.
      type: object
      properties:
        type:
          $ref: '#/components/schemas/CustomerContextType'
        region:
          $ref: '#/components/schemas/CustomerContextRegion'
        locale:
          $ref: '#/components/schemas/CustomerContextLocale'
        models:
          $ref: '#/components/schemas/CustomerContextModels'
    IdempotentIdentifier:
      title: Idempotent Identifier
      description: An internal client identifier. If specified will ensure we only have one customer id per identifier.
      type: string
    ClientMetadata:
      title: Client Metadata
      description: A set of Client Metadata
      type: object
      maxLength: 255
      properties:
        idempotent_identifier:
          $ref: '#/components/schemas/IdempotentIdentifier'
    CustomerContextHostSecret:
      title: Customer Context Host Secret
      type: boolean
      description: Determines whether the customer secret key should be stored with Bud, meaning the API consumer does not need to store this and provide it on subsequent API calls related to that customer.
    CustomerContext:
      title: Customer Context
      description: The context in which a customer is processed throughout the Bud platform.
      type: object
      properties:
        type:
          $ref: '#/components/schemas/CustomerContextType'
        region:
          $ref: '#/components/schemas/CustomerContextRegion'
        locale:
          $ref: '#/components/schemas/CustomerContextLocale'
        host_secret:
          $ref: '#/components/schemas/CustomerContextHostSecret'
        models:
          $ref: '#/components/schemas/CustomerContextModels'
    CustomerCreatedV3:
      title: Customer Created V3
      type: object
      required:
        - customer_id
        - customer_context
      properties:
        customer_id:
          description: A unique identifier for a Customer, as registered on Bud's platform
          type: string
          format: uuid
        customer_secret:
          description: A unique Customer encryption key used to encrypt their data on the Bud platform. Only returned if the secret is *not* hosted on the Bud Platform.
          type: string
        customer_context:
          $ref: '#/components/schemas/CustomerContext'
        client_metadata:
          $ref: '#/components/schemas/ClientMetadata'
    CustomerCreatedV3Metadata:
      title: Customer Created V3 Metadata
      type: object
      properties:
        created_at:
          type: string
          format: date-time
          description: The date and time the customer was created. Format ISO 8601.
    CustomerCreateV3Response:
      title: Create Customer V3 Response
      type: object
      description: Expected response structure.
      required:
        - operation_id
        - data
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          $ref: '#/components/schemas/CustomerCreatedV3'
        metadata:
          $ref: '#/components/schemas/CustomerCreatedV3Metadata'
    CreateCustomersV3BatchPayload:
      title: Create Customers V3 Batch Payload
      type: object
      properties:
        number_of_customers:
          description: The number of customers to create (register) on Bud's platform in a single request.
          type: integer
          default: 1
          maximum: 200
        customer_context:
          $ref: '#/components/schemas/CustomerContextRequest'
    CreateCustomersV3BatchResponse:
      title: Create Customers V3 Batch Response
      type: object
      description: Expected response structure.
      required:
        - operation_id
        - data
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          description: An array of Customer Created objects.
          items:
            $ref: '#/components/schemas/CustomerCreatedV3'
        metadata:
          $ref: '#/components/schemas/CustomerCreatedV3Metadata'
    TaskId:
      title: Task Id
      type: string
      description: Bud Task identifier returned from an async task for the requested action
    CustomerDeleteV3:
      title: Customer Delete V3
      type: object
      required:
        - task_id
      properties:
        task_id:
          $ref: '#/components/schemas/TaskId'
    AsyncTaskMetadata:
      title: Async Task Metadata
      type: object
      description: Metadata associated with an asynchronous task
      properties:
        status:
          type: string
          description: The status of the job associated with the specified task id
          enum:
            - Completed
            - Pending
            - Failed
        next_url:
          type: string
          description: The URL to call to obtain the results of the task
        next_url_delay:
          type: number
          description: The time in milliseconds that the client should wait before polling the relevant GET endpoint with the above task id
    CustomerDeleteV3Response:
      title: Delete Customer V3 Response
      type: object
      description: Expected response structure.
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          $ref: '#/components/schemas/CustomerDeleteV3'
        metadata:
          $ref: '#/components/schemas/AsyncTaskMetadata'
    DeleteResultCodes:
      type: string
      description: The result of the operation. Either success or failed.
      enum:
        - success
        - failed
    TaskCustomerDeleteV3:
      title: Customer Delete Task Response
      type: object
      description: Result of GET customer delete taskId
      required:
        - task_id
      properties:
        result:
          $ref: '#/components/schemas/DeleteResultCodes'
        task_id:
          $ref: '#/components/schemas/TaskId'
    TaskCustomerDeleteV3MetaData:
      title: Task Status Metadata
      type: object
      description: Standard metadata response from the Customer Delete V3
      required:
        - status
      properties:
        status:
          type: string
          description: The status of the job associated with the specified task id
          enum:
            - Completed
            - Pending
            - Failed
        next_url:
          type: string
          description: The url to try next if the `status` property returned is `Pending`
        next_url_delay:
          type: number
          description: The time in milliseconds that the client should wait before polling the relevant GET endpoint with the above task id if the `status` property returned is `Pending`
    CustomerDeleteV3StatusResponse:
      title: Customer Delete Status Response
      type: object
      description: Expected response structure
      required:
        - operation_id
        - metadata
        - data
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          $ref: '#/components/schemas/TaskCustomerDeleteV3'
        metadata:
          $ref: '#/components/schemas/TaskCustomerDeleteV3MetaData'
    CustomerContextResponse:
      title: Customer Context Response
      description: Customer context response.
      type: object
      required:
        - operation_id
        - data
      properties:
        operation_id:
          type: string
        data:
          $ref: '#/components/schemas/CustomerContext'
    UpdateCustomerContextRequest:
      title: Update Customer Context Request
      type: object
      description: Expected request payload structure.
      properties:
        region:
          $ref: '#/components/schemas/CustomerContextRegion'
        locale:
          $ref: '#/components/schemas/CustomerContextLocale'
        models:
          $ref: '#/components/schemas/CustomerContextModels'
    UpdateCustomerContextResponse:
      title: Customer Context Update Response
      description: Customer context update response.
      type: object
      required:
        - operation_id
        - data
      properties:
        operation_id:
          type: string
        data:
          title: Updated Customer Context
          type: object
          properties:
            region:
              $ref: '#/components/schemas/CustomerContextRegion'
            locale:
              $ref: '#/components/schemas/CustomerContextLocale'
            models:
              $ref: '#/components/schemas/CustomerContextModels'
    MaintenanceWindowObject:
      title: Maintenance Window Object
      type: object
      description: Details on any scheduled maintenance windows
      properties:
        start:
          type: string
          description: The start datetime (ISO8601) of the maintenance window
        end:
          type: string
          description: The end datetime (ISO8601) of the maintenance window
    OBProvider:
      title: Open Banking Providers
      type: object
      required:
        - provider
        - display_name
        - maintenance_window
        - maintenance_status
        - icon
        - regions
        - mobile_only
      properties:
        provider:
          type: string
          description: The name of the available open banking provider used as an identifier throughout Bud's API services
        display_name:
          type: string
          description: The name of the available open banking provider used for display purposes
        maintenance_window:
          anyOf:
            - $ref: '#/components/schemas/MaintenanceWindowObject'
            - type: object
              nullable: true
        maintenance_status:
          type: string
          description: The status of the maintenance window associated with the provider
          enum:
            - active
            - inactive
        icon:
          type: string
          description: A URL for the icon of the corresponding provider
        regions:
          type: array
          description: A list of the different regions (i.e. country codes in ISO 3166 format) associated with the open banking provider
          items:
            type: string
        mobile_only:
          type: boolean
          description: If true, the provider is only available on mobile devices and requires a dedicated provider app to be installed on the device
    ResultsMetadata:
      title: Results Metadata Object
      type: object
      description: Metadata associated with the response schema
      properties:
        results:
          type: number
          description: The number of results returned
    USAuthGatewayURLRequestv2:
      title: Authorisation Gateweay URL Request Payload
      type: object
      required:
        - redirect_url
      properties:
        redirect_url:
          type: string
          description: |
            URL where the Customer will be redirected to once they have completed the Connection flow. This can be a web based URL or a mobile application internal URL.
            When the Customer is redirected to your URL we include the following query parameters:
            - `status`: Represents the status of the connection. It can be `success`, `failure` or `pending`
            - `task_id`: Is the identifier that can be used to check the status of the connection task and retrieve more information in case of failure
          nullable: false
          maxLength: 2083
        providers:
          type: array
          nullable: true
          description: |
            Specify a list of one or more providers that will be displayed to the customer during the connection flow. If only a single provider is given, the customer will no longer be shown the select provider screen.

            Note, that these must match the `provider_id` returned by the Retrieve OB Providers endpoint.
          items:
            type: string
        connect_more_accounts_button:
          type: boolean
          nullable: true
          description: When enabled, the customer will see an additional button at the end of the connection flow that allows them to start the connection flow again in order to connect to a new provider.
        accounts_summary:
          type: boolean
          nullable: true
          description: When enabled, the customer will be shown a summary screen at the end of the flow that lists the names and balances of all of the accounts that the customer has active consents for (including those connected in previous sessions).
        initial_screen:
          type: string
          description: |
            The first screen that the customer will be shown. When value is 'accounts_summary' the customer will see a list of the names and balances of the accounts that the customer currently has active consents for.
            When value is 'connect_accounts', the customer will see a list of providers to connect their accounts with.
            By default this value is 'connect_accounts'. When the value is 'download_data', the customer can download their data in a JSON file.
            When the value is 'revoke_consent', the customer can revoke consent for accounts they have previously connected.
          enum:
            - accounts_summary
            - connect_accounts
            - download_data
            - revoke_consent
          nullable: true
        enable_async_connect:
          type: boolean
          nullable: true
          description: When enabled, once the consent authorisation has completed, the customer will be moved on in the flow. The data is then fetched and enriched in the background, instead of the customer waiting on a loading spinner
        skip_success_screen:
          type: boolean
          nullable: true
          description: When enabled, once the customer has completed the connect flow, they will be redirected back to the client redirect_url bypassing the success screen. This should be used if you donâ€™t want your customers to see the Bud success screen.
    AuthGatewayURLResponse:
      title: Authorisation Gateweay URL Response
      type: object
      description: Expected response structure.
      required:
        - operation_id
        - data
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: object
          description: Information related to the unique (customer specific) Authorisation Gateway URL
          required:
            - url
          properties:
            url:
              type: string
              description: An Authorisation Gateway URL, allowing Customers to connect an Open Banking provider via Bud's TPP Connection UI
              format: url
    ConnectResultCodes:
      type: string
      description: The result of the operation. Either success or various error codes.
      enum:
        - success
        - account_closed
        - auth_denied
        - auth_expired
        - auth_invalid
        - auth_used
        - awaiting_authorisation
        - bad_request
        - connection_expired
        - connection_not_found
        - connection_permission
        - connection_reauthenticate
        - connection_revoked
        - connection_status
        - consent_not_found
        - enrichment_failed
        - extension_not_permitted
        - failed_body_decode
        - failed_validation
        - internal_auth_error
        - internal_error
        - internal_timeout
        - internal_transient_error
        - provider_endpoint_deprecated
        - provider_endpoint_unimplemented
        - provider_endpoint_unsupported
        - provider_failure
        - provider_invalid
        - provider_maintenance
        - provider_marked_account_invalid
        - provider_not_found
        - provider_request_limit
        - provider_timeout
        - request_validation
        - resource_not_found
        - task_not_found
    OBConnectWebhookBody:
      title: OB Webhook Payload
      type: object
      description: |
        The payload sent to the client defined webhook (via the console) when an Open Banking (connect or refresh) task completes.
      required:
        - data
      properties:
        data:
          description: Open Banking Task Event Data
          required:
            - task_type
            - customer_id
            - task_id
            - status
            - result
          properties:
            task_id:
              description: The task identifier that the event relates to
              type: string
              example: e145c656-4a90-45db-a025-af7765482c8c
            status:
              type: string
              description: The general status of a task
              enum:
                - Completed
                - Failed
            task_type:
              type: string
              enum:
                - connect
                - refresh
              description: The type of task that completed
            customer_id:
              description: The customer the event relates to
              type: string
              example: 19677d9f-90e7-44a6-a32e-566990623da4
            result:
              $ref: '#/components/schemas/ConnectResultCodes'
            provider:
              type: string
              description: Name of the provider (banking institution) the task interacted with
            consent_id:
              type: string
              description: The consent identifier that the event relates to
    GetOBConnectData:
      title: Open Banking Synchronisation Status
      type: object
      description: Status of an Open Banking Aggregation connect or refresh task
      required:
        - provider
        - step
        - text
        - task_id
      properties:
        provider:
          type: string
          description: The name of the provider the task is trying to connect to
        step:
          type: integer
          description: At what step or stage the connection process is at
          enum:
            - 1
            - 2
            - 3
            - 4
        text:
          type: string
          description: A description of what stage the connection process is at
          enum:
            - Fetching access token
            - Fetching accounts
            - Fetching balances and transactions
            - Completed
        bank_name:
          type: string
          deprecated: true
          description: The name of the provider the task is trying to connect to. Replaced with `provider`
        reconnect_required:
          type: boolean
          description: If true, the customer must re-connect to the specified provider
        result:
          $ref: '#/components/schemas/ConnectResultCodes'
        status:
          title: The Task Status
          type: string
          description: The general status of a task
          enum:
            - Pending
            - Completed
            - Failed
        task_id:
          $ref: '#/components/schemas/TaskId'
    TaskStatusCaps:
      title: The Task Status
      type: string
      description: The general status of a task
      enum:
        - Pending
        - Completed
        - Failed
    OpenBankingConnectResponse:
      title: Open Banking Connect Response
      type: object
      description: Expected response structure
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          $ref: '#/components/schemas/GetOBConnectData'
        metadata:
          type: object
          properties:
            status:
              $ref: '#/components/schemas/TaskStatusCaps'
            next_url:
              description: The URL to call to obtain the results of the task
              type: string
            next_url_delay:
              description: Recommended delay in milliseconds before next call
              type: number
    OpenBankingRefreshRequest:
      title: Open Banking Refresh Payload
      type: object
      description: Expected request payload structure
      required:
        - provider
      properties:
        provider:
          type: string
          description: The name of the provider the task is trying to connect to
        from:
          type: string
          description: |
            The datetime (ISO 8601) that defines the time since when the Customer's data needs to be collected.
            Defaults to the datetime of the last pull of transactions less seven days to account for any potential changes to the most recent set of transactions.
            Refreshes can only go back to a maximum of 90 days from the current date.
        to:
          type: string
          description: |
            The datetime (ISO 8601) that defines the time up to which the Customer's data needs to be collected. Defaults to the current datetime.
            Refreshes can only go back to a maximum of 90 days from the current date.
    TaskCreatedView:
      title: Task Created View
      description: Standard successful task created response.
      type: object
      required:
        - task_id
        - provider
      properties:
        task_id:
          $ref: '#/components/schemas/TaskId'
        provider:
          type: string
          description: The provider (ASPSP) associated with this task
    TaskCreatedResponseOB:
      title: Task Created Response
      type: object
      description: Expected response structure
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          $ref: '#/components/schemas/TaskCreatedView'
        metadata:
          $ref: '#/components/schemas/AsyncTaskMetadata'
    OBRefreshWebhookBody:
      title: OB Webhook Payload
      type: object
      description: |
        The payload sent to the client defined webhook (via the console) when an Open Banking (connect or refresh) task completes.
      required:
        - data
      properties:
        data:
          description: Open Banking Task Event Data
          required:
            - task_type
            - customer_id
            - task_id
            - status
            - result
          properties:
            task_id:
              description: The task identifier that the event relates to
              type: string
              example: e145c656-4a90-45db-a025-af7765482c8c
            status:
              type: string
              description: The general status of a task
              enum:
                - Completed
                - Failed
            task_type:
              type: string
              enum:
                - connect
                - refresh
              description: The type of task that completed
            customer_id:
              description: The customer the event relates to
              type: string
              example: 19677d9f-90e7-44a6-a32e-566990623da4
            result:
              $ref: '#/components/schemas/ConnectResultCodes'
            has_new_transactions:
              type: string
              enum:
                - 'true'
                - 'false'
              description: |
                To describe whether new transactions have been pulled from the relevant ASPSP during the refresh. Note that if this field is set to `false` then there is no need to make a request to any other downstream endpoints to collect the data related to that customer.
            reconnect_required:
              type: string
              enum:
                - 'true'
                - 'false'
              description: If true, the customer must re-connect to the specified provider
            provider:
              type: string
              description: Name of the provider (banking institution) the task interacted with
            consent_id:
              type: string
              description: The consent identifier that the event relates to
    ReconnectRequired:
      type: boolean
      description: Indicator as to whether the account needs to be connected again, through SCA authentication.
    TaskView:
      title: Task View
      description: A task view.
      type: object
      properties:
        task_id:
          $ref: '#/components/schemas/TaskId'
        provider:
          type: string
          description: The provider (ASPSP) associated with this task
        result:
          $ref: '#/components/schemas/ConnectResultCodes'
        status:
          $ref: '#/components/schemas/TaskStatusCaps'
        reconnect_required:
          $ref: '#/components/schemas/ReconnectRequired'
        step:
          type: number
          description: The step that this task is currently where 4 = Completed.
          enum:
            - 1
            - 2
            - 3
            - 4
        text:
          type: string
          description: A description of the step this task is currently at. In order from step 1 to step 4.
          enum:
            - Fetching access token
            - Fetching accounts
            - Fetching balances and transactions
            - Completed
    HasNewTransactions:
      type: boolean
      description: |
        To describe whether new transactions have been pulled from the relevant
        ASPSP during the refresh. Note that if this field is set to `false` then
        there is no need to make a request to any other downstream endpoints to
        collect the data related to that customer.
    OpenBankingRefreshResponse:
      title: Refresh Task Response
      type: object
      description: Expected response structure
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          $ref: '#/components/schemas/TaskView'
        metadata:
          type: object
          description: Refresh Response Metadata
          properties:
            has_new_transactions:
              $ref: '#/components/schemas/HasNewTransactions'
            status:
              $ref: '#/components/schemas/TaskStatusCaps'
            next_url:
              description: The URL to call to obtain the results of the task
              type: string
            next_url_delay:
              description: Recommended delay in milliseconds before next call
              type: integer
    OBResources:
      type: string
      enum:
        - accounts
        - balances
        - transactions
        - parties
        - direct-debits
    OpenBankingRefreshRequestV2:
      title: Open Banking Refresh V2 Payload
      type: object
      description: Expected request payload structure
      properties:
        providers:
          type: array
          description: Optional parameter defining the name of the providers that a refresh should be completed for. If this is not specified a refresh is completed for all providers that a customer has an authorised consent with.
          items:
            type: string
        from:
          type: string
          description: |
            The datetime (ISO 8601) that defines the time since when the Customer's data needs to be collected. 
            Defaults to the datetime of the last pull of transactions less seven days to account for any potential changes to the most recent set of transactions. 
            Refreshes can only go back to a maximum of 90 days from the current date.
        to:
          type: string
          description: |
            The datetime (ISO 8601) that defines the time up to which the Customer's data needs to be collected. Defaults to the current datetime. 
        resources:
          type: array
          description: Optional list of resources that should be refreshed. Default behaviour is to refresh all resources defined on the customers consent
          items:
            $ref: '#/components/schemas/OBResources'
    TaskV2CreatedView:
      title: Refresh V2 Task Created View
      description: Standard successful task created response.
      type: object
      required:
        - task_id
        - sub_tasks
      properties:
        task_id:
          $ref: '#/components/schemas/TaskId'
        sub_tasks:
          type: array
          items:
            $ref: '#/components/schemas/TaskCreatedView'
    TaskCreatedV2ResponseOB:
      title: Refresh V2 Task Created Response
      type: object
      description: Expected response structure
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          $ref: '#/components/schemas/TaskV2CreatedView'
        metadata:
          $ref: '#/components/schemas/AsyncTaskMetadata'
    RefreshSubtaskWebhookTask:
      title: Details of an individual refresh Task
      type: object
      description: The payload detailing an individual refresh for a single provider
      required:
        - has_new_transactions
        - provider
        - reconnect_required
        - result
        - status
        - task_id
      properties:
        account_ids:
          description: An array listing all account ids that were updated as part of this task
          type: array
          items:
            type: string
        consent_ids:
          description: An array listing all consents that were updated as part of this task
          type: array
          items:
            type: string
        has_new_transactions:
          $ref: '#/components/schemas/HasNewTransactions'
        provider:
          type: string
          description: Name of the provider (banking institution)
        reconnect_required:
          $ref: '#/components/schemas/ReconnectRequired'
        result:
          $ref: '#/components/schemas/ConnectResultCodes'
        status:
          type: string
          description: The general status of a task
          enum:
            - Completed
            - Failed
        task_id:
          description: The task identifier that the event relates to
          type: string
          example: e145c656-4a90-45db-a025-af7765482c8c
    OBV2WebhookBody:
      title: OB V2 Webhook Payload
      type: object
      description: |
        The payload sent to the client defined webhook (via the console) when an Open Banking refresh V2 task completes.
      required:
        - customer_id
        - event
        - has_new_transactions
        - task_id
        - result
        - status
      properties:
        customer_id:
          description: The customer the event relates to
          type: string
          example: 19677d9f-90e7-44a6-a32e-566990623da4
        event:
          type: string
          description: The task type for the event.
        has_new_transactions:
          $ref: '#/components/schemas/HasNewTransactions'
        task_id:
          description: The task identifier that the event relates to
          type: string
          example: e145c656-4a90-45db-a025-af7765482c8c
        result:
          $ref: '#/components/schemas/ConnectResultCodes'
        status:
          type: string
          description: The general status of a task
          enum:
            - Completed
            - Failed
        sub_tasks:
          description: An array of details about each individual refresh subtask
          type: array
          items:
            $ref: '#/components/schemas/RefreshSubtaskWebhookTask'
    ProviderOBV2WebhookBody:
      title: OB V2 Webhook Payload
      type: object
      description: |
        The payload sent to the client defined webhook (via the console) when an Open Banking refresh V2 task completes.
      required:
        - event
        - task_id
        - status
        - result
        - reconnect_required
        - provider
        - has_new_transactions
        - customer_id
      properties:
        account_ids:
          description: An array listing all account ids that were updated as part of this task
          type: array
          items:
            type: string
        consent_ids:
          description: An array listing all consents that were updated as part of this task
          type: array
          items:
            type: string
        customer_id:
          description: The customer the event relates to
          type: string
          example: 19677d9f-90e7-44a6-a32e-566990623da4
        has_new_transactions:
          $ref: '#/components/schemas/HasNewTransactions'
        provider:
          type: string
          description: Name of the provider (banking institution)
        reconnect_required:
          $ref: '#/components/schemas/ReconnectRequired'
        result:
          $ref: '#/components/schemas/ConnectResultCodes'
        status:
          type: string
          description: The general status of a task
          enum:
            - Completed
            - Failed
        task_id:
          description: The task identifier that the event relates to
          type: string
          example: e145c656-4a90-45db-a025-af7765482c8c
        event:
          type: string
          description: The task type for the event.
    SubTaskV2View:
      title: SubTask V2 View
      description: A task view.
      type: object
      properties:
        task_id:
          $ref: '#/components/schemas/TaskId'
        provider:
          type: string
          description: The provider (ASPSP) associated with this task
        result:
          $ref: '#/components/schemas/ConnectResultCodes'
        status:
          $ref: '#/components/schemas/TaskStatusCaps'
        reconnect_required:
          $ref: '#/components/schemas/ReconnectRequired'
        has_new_transactions:
          $ref: '#/components/schemas/HasNewTransactions'
    TaskV2View:
      title: Task V2 View
      description: A task view.
      type: object
      properties:
        task_id:
          $ref: '#/components/schemas/TaskId'
        result:
          $ref: '#/components/schemas/ConnectResultCodes'
        status:
          $ref: '#/components/schemas/TaskStatusCaps'
        has_new_transactions:
          $ref: '#/components/schemas/HasNewTransactions'
        sub_tasks:
          type: array
          items:
            $ref: '#/components/schemas/SubTaskV2View'
    OpenBankingRefreshV2Response:
      title: Refresh V2 Task Response
      type: object
      description: Expected response structure
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          $ref: '#/components/schemas/TaskV2View'
        metadata:
          type: object
          description: Refresh Response Metadata
          properties:
            status:
              $ref: '#/components/schemas/TaskStatusCaps'
            next_url:
              description: The URL to call to obtain the results of the task
              type: string
            next_url_delay:
              description: Recommended delay in milliseconds before next call
              type: integer
    USGetOBConsentsResponseDataItem:
      title: Open Banking Consent
      type: object
      description: Schema to define a given Open Banking consent
      required:
        - id
        - customer_id
        - provider
        - transaction_from_date
        - expiration_date
        - created_at
        - last_consented_on
        - status
        - resources
        - permissions
        - raw_version
        - raw_format
      properties:
        id:
          type: string
          description: Open Banking consent unique identifier
        customer_id:
          type: string
          description: Bud customer unique identifier, owner of the consent
        provider:
          type: string
          description: Open Banking provider who the consent refers to
        transaction_from_date:
          type: string
          description: Date and time from when the transactions can be retrieved. ISODateTime.
        expiration_date:
          type: string
          description: Date and time when the consent will expired. ISODateTime.
        created_at:
          type: string
          description: Date and time when the consent was created. ISODateTime.
        last_consented_on:
          type: string
          description: Date and time when the consent was last consented on. ISODateTime.
        revoked_at:
          type: string
          description: |
            Date and time when the consent was revoked. ISODateTime. This attribute in included in the response only if the status of the consent is `revoked`.
            When the consent is invalidated as part of a Bud refresh task, this date time represents the time when the consent was set to `revoked` by Bud during the refresh.
        status:
          type: string
          description: To describe the status of the consent. Note that the query parameter `status=all` must be provided to be shown consents that have a status of anything but `authorised`
          enum:
            - awaiting_authorisation
            - authorised
            - rejected
            - revoked
        resources:
          type: array
          description: List of resources this consent has access too
          items:
            type: string
            enum:
              - accounts
              - balances
              - transactions
        permissions:
          type: array
          description: Specifies the Open Banking account access data types. This is a list of the data clusters being consented by the PSU, and requested for authorisation with the ASPSP.
          items:
            type: string
            enum:
              - ReadAccounts
              - ReadBalances
              - ReadTransactions
        raw_version:
          type: string
          description: Version of the raw format of the consent
        raw_format:
          type: string
          description: The format of the consent returned in the raw attribute
          enum:
            - akoya
        account_ids:
          type: array
          description: A list of the different account identifiers that are associated with this particular consent object
          items:
            type: string
        last_synced_at:
          type: string
          description: The date at which the last data refresh (sync) occured for this consent object. For revoked consents this will be the time that the conesnt was revoked
    USGetOBConsentsResponse:
      title: Available Open Banking Consents
      type: object
      required:
        - operation_id
        - data
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: array
          description: List of available consents
          items:
            $ref: '#/components/schemas/USGetOBConsentsResponseDataItem'
        metadata:
          $ref: '#/components/schemas/ResultsMetadata'
    RevokeAccountAccessIntentRequest:
      title: Revoke Account Access Intent Payload
      type: object
      required:
        - provider
      properties:
        provider:
          type: string
          description: The name of the provider (ASPSP) the Customer is requesting to have their consent revoked for
    TaskCreatedMetadata:
      type: object
      description: Created task metadata response
      required:
        - status
        - next_url
        - next_url_delay
      properties:
        status:
          type: string
          description: The status of the job associated with the specified task id
          enum:
            - Pending
        next_url:
          type: string
          description: The url to get the status of the task
        next_url_delay:
          type: number
          description: The time in milliseconds that the client should wait before polling the relevant GET status endpoint
    RevokeTaskCreatedResponse:
      title: Revoke Task Created Response
      type: object
      description: Expected response structure
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          $ref: '#/components/schemas/TaskCreatedView'
        metadata:
          $ref: '#/components/schemas/TaskCreatedMetadata'
    OBConsentWebhookBody:
      title: OB Consent Webhook Payload
      type: object
      description: |
        The payload sent to the client defined webhook (via the console) when an event occurs to a Open Banking Consent.
      required:
        - data
      properties:
        data:
          description: Consent Event Data
          required:
            - event
            - consent_id
            - customer_id
            - provider
            - updated_at
          properties:
            event:
              description: The event this webhook relates too
              type: string
              enum:
                - open_banking.consent.reconfirmed
                - open_banking.consent.reauthorised
                - open_banking.consent.revoked
              example: open_banking.consent.reconfirmed
            consent_id:
              type: string
              description: The consent this event relates too
              example: ab32780a-3d60-4d4d-984f-11ea3ef329cd
            customer_id:
              description: The customer the consent is associated with
              type: string
              example: 19677d9f-90e7-44a6-a32e-566990623da4
            provider:
              description: The provider the consent is associated with
              type: string
              example: Monzo
            updated_at:
              description: The date time that the event occurred
              type: string
              format: datetime
              example: '2023-10-02T14:05:55Z'
    RevokeAccountAccessIntentTastStatusResponse:
      title: Revoke Account Access Intent Response
      type: object
      description: Expected response from a get status request for a revoke account access intent call
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: object
          title: Revoke Task Data
          required:
            - task_id
            - provider
            - status
          properties:
            task_id:
              $ref: '#/components/schemas/TaskId'
            provider:
              type: string
              description: The provider (ASPSP) associated with this task
            status:
              type: string
              description: The status of the job associated with the specified task id
              enum:
                - Completed
                - Pending
                - Failed
            result:
              type: string
              description: The result of the operation.
        metadata:
          type: object
          title: Revoke Task Metadata
          required:
            - status
          properties:
            status:
              type: string
              description: The status of the job associated with the specified task id
              enum:
                - Completed
                - Pending
                - Failed
            next_url:
              type: string
              description: The url to try next if the `status` property returned is `Pending`
            next_url_delay:
              type: number
              description: The time in milliseconds that the client should wait before polling again, if the `status` property returned is `Pending`
    RevokeAccountAccessIntentTaskStatusValidationError:
      title: Revoke Account Access Intent Status Validation Error
      type: object
      required:
        - operation_id
        - code_id
        - message
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        code_id:
          type: string
          enum:
            - failed_validation
        message:
          type: string
          enum:
            - invalid request
        errors:
          type: object
          description: Extra information on the validation errors
    CustomerSecret:
      type: string
      description: The Bud Customer secret used to encrypt customer data. This is required only if the customer secret is not already stored with Bud.
    IngestAccountDetails:
      title: Ingest Account Details
      type: object
      description: Schema to define any further details about a given account
      required:
        - scheme_name
        - identification
        - secondary_identification
      properties:
        scheme_name:
          type: string
          description: Name of the scheme associated with the account
        identification:
          type: string
          description: A unique identifier for the account
        secondary_identification:
          type: string
          description: Any secondary identifier associated with the account
        name:
          type: string
          description: The name of the account holder
    BudCurrency:
      title: Currency
      description: |
        The three-letter [ISO currency code](https://www.iso.org/iso-4217-currency-codes.html) of the monetary amount.

        Example: `GBP`
      type: string
    BudMonetaryValue:
      title: Monetary Value
      description: |
        The value of the monetary amount. The value is formatted with the number of decimal places for the respective currency. 

        Example: `10.98`
      type: string
    BudAmount:
      title: Standard Bud Amount
      type: object
      description: The monetary amount.
      required:
        - value
        - currency
      properties:
        value:
          $ref: '#/components/schemas/BudMonetaryValue'
        currency:
          $ref: '#/components/schemas/BudCurrency'
    InpAmount:
      title: Amount
      description: Amount structure
      allOf:
        - type: object
          properties:
            local_currency:
              allOf:
                - description: |
                    The original three-letter [ISO currency code](https://www.iso.org/iso-4217-currency-codes.html) the payment was transacted in.

                    Example: `USD`
                - $ref: '#/components/schemas/BudCurrency'
            local_value:
              allOf:
                - description: |
                    The original value of the payment in the local currency. The value is formatted with the number of decimal places for the respective currency.

                    Example: `10.98`
                - $ref: '#/components/schemas/BudMonetaryValue'
        - $ref: '#/components/schemas/BudAmount'
    IngestCreditLine:
      title: Ingest Credit Line
      type: object
      description: A set of elements used to provide details on the credit line
      required:
        - amount
        - type
      properties:
        included:
          type: boolean
          description: Indicates whether or not the credit line is included in the balance of the account, if not present, credit line is not included in the balance amount of the account
        amount:
          $ref: '#/components/schemas/InpAmount'
        type:
          type: string
          description: Limit type, in a coded form
          enum:
            - Available
            - Credit
            - Emergency
            - Pre-Agreed
            - Temporary
    IngestAccountBalance:
      title: Ingest Account Balance
      type: object
      description: Information surrounding a Customer's Account Balance
      required:
        - amount
        - date
        - type
        - credit_debit_indicator
      properties:
        amount:
          $ref: '#/components/schemas/InpAmount'
        credit_debit_indicator:
          type: string
          description: To describe whether the account balance is in debit or credit
          enum:
            - incoming_credit
            - outgoing_debit
        credit_line:
          items:
            $ref: '#/components/schemas/IngestCreditLine'
        date:
          type: string
          format: YYYY-MM-DD
          description: The date associated with the balance of the given account
        time:
          type: string
          format: hh:mm:ss
          description: The time associated with the balance of the given account
        type:
          type: string
          description: |
            Describes the state of the balance

            | Value                     | Description                                               |
            |:--------------------------|:----------------------------------------------------------|
            | `ClosingAvailable`        | Closing balance of amount of money that is at the disposal of the account owner on the date specified.               |
            | `ClosingBooked`           | Balance of the account at the end of the pre-agreed account reporting period. It is the sum of the opening booked balance at the beginning of the period and all entries booked to the account during the pre-agreed account reporting period.      |
            | `ClosingCleared`          | Closing balance of amount of money that is cleared on the date specified.                     |
            | `Expected`                | Balance, composed of booked entries and pending items known at the time of calculation, which projects the end of day balance if everything is booked on the account and no other entry is posted.  |
            | `ForwardAvailable`        | Forward available balance of money that is at the disposal of the account owner on the date specified.               |
            | `Information`             | Balance for informational purposes.      |
            | `InterimAvailable`        | Available balance calculated in the course of the account servicer's business day, at the time specified, and subject to further changes during the business day. The interim balance is calculated on the basis of booked credit and debit items during the calculation time/period specified.       |
            | `InterimBooked`           | Balance calculated in the course of the account servicer's business day, at the time specified, and subject to further changes during the business day. The interim balance is calculated on the basis of booked credit and debit items during the calculation time/period specified.       |
            | `InterimCleared`          | Cleared balance calculated in the course of the account servicer's business day, at the time specified, and subject to further changes during the business day.        |
            | `OpeningAvailable`        | Opening balance of amount of money that is at the disposal of the account owner on the date specified.        |
            | `OpeningBooked`           | Book balance of the account at the beginning of the account reporting period. It always equals the closing book balance from the previous report.        |
            | `OpeningCleared`          | Opening balance of amount of money that is cleared on the date specified.       |
            | `PreviouslyClosedBooked`  | Balance of the account at the previously closed account reporting period. The opening booked balance for the new period has to be equal to this balance.  |
          enum:
            - ClosingAvailable
            - ClosingBooked
            - ClosingCleared
            - Expected
            - ForwardAvailable
            - Information
            - InterimAvailable
            - InterimBooked
            - InterimCleared
            - OpeningAvailable
            - OpeningBooked
            - OpeningCleared
            - PreviouslyClosedBooked
    IngestCustomerAccount:
      title: Ingest Customer Account
      description: An account item.
      type: object
      required:
        - provider
        - account_id
        - currency
        - account_type
        - account_sub_type
        - details
        - balances
      properties:
        provider:
          type: string
          description: The name of the provider.
        account_id:
          type: string
          description: The unique id associated with the account
        currency:
          type: string
          description: Main currency (in ISO4217 format) of the account
        account_type:
          type: string
          description: The type of the account
          enum:
            - Business
            - Personal
        account_sub_type:
          type: string
          description: The sub type of the account
          enum:
            - ChargeCard
            - CreditCard
            - CurrentAccount
            - EMoney
            - Loan
            - Mortgage
            - PrePaidCard
            - Savings
        holder_name:
          type: string
          description: The name of the account holder
        details:
          type: array
          description: Provides the details to identify an account
          items:
            $ref: '#/components/schemas/IngestAccountDetails'
        balances:
          type: array
          description: The balances associated with the account
          items:
            $ref: '#/components/schemas/IngestAccountBalance'
    IngestCustomerWithAccounts:
      title: Ingest Customer With Accounts
      description: A customer with a accounts data.
      type: object
      required:
        - customer_id
        - accounts
      properties:
        customer_id:
          type: string
          format: uuid
          description: A unique identifier for a Customer, as registered on Bud's platform.
        customer_secret:
          $ref: '#/components/schemas/CustomerSecret'
        accounts:
          type: array
          description: List of accounts that belongs to the customer.
          minLength: 1
          items:
            $ref: '#/components/schemas/IngestCustomerAccount'
    IngestAccountsRequest:
      title: Bud V1 Accounts Request
      description: Ingest accounts expected request body.
      type: array
      items:
        $ref: '#/components/schemas/IngestCustomerWithAccounts'
    IngestV2Response:
      type: object
      required:
        - operation_id
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
          example: v2_ingest_transactions_post
    IngestV2Metadata:
      title: Created Task Details
      description: Metadata on the created task, including the task_id
      type: object
      required:
        - task_id
      properties:
        task_id:
          type: string
          format: uuid
          description: Can be used with the transaction status endpoint to retrieve the status of the full enriched process
        next_url:
          type: string
          format: url
          description: The URL to call to obtain the current status of the task.
          example: /v2/ingest/status/4cef424c-1d7f-4cab-8be2-aee7e1774a00
        next_url_delay:
          type: number
          description: The time in milliseconds that the client should wait before trying to retrieve the current status of the task.
          example: 500
    IngestV2AsyncResponse:
      title: Ingest Transactions V2 Async Response
      type: object
      allOf:
        - $ref: '#/components/schemas/IngestV2Response'
        - type: object
          required:
            - operation_id
            - metadata
          properties:
            metadata:
              $ref: '#/components/schemas/IngestV2Metadata'
    BodyDecodeError:
      type: object
      title: JSON Decoding Error
      required:
        - operation_id
        - code_id
        - message
        - errors
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        code_id:
          type: string
          enum:
            - failed_body_decode
        message:
          type: string
          description: 'High level description on what has failed '
        errors:
          type: object
          description: Contains more details on the decoding error
          required:
            - decode_error
          properties:
            decode_error:
              type: string
    FirstPartyIngestionGenericError:
      type: object
      title: Content Type Error
      required:
        - operation_id
        - code_id
        - message
        - errors
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        code_id:
          type: string
          enum:
            - failed_validation
        message:
          type: string
          description: 'High level description on what has failed '
        errors:
          type: object
          description: Error details
          properties:
            content_type:
              type: string
              description: The content type header provided in the request is unknown
            <index>.customer_id:
              type: string
              description: Missing customer ID. Index prefix is the index of the customer in the request
            <index>.customer_secret:
              type: string
              description: Missing customer secret. Index is the index of the customer in the request
            <index>.accounts:
              type: string
              description: Missing customer accounts. Index is the index of the customer in the request
      example:
        operation_id: ingest_accounts_post
        code_id: failed_validation
        message: validation failure(s) in request payload
        errors:
          0.customer_secret: The customer secret is mandatory
    ValidationMissing:
      type: array
      title: Missing Fields
      description: list of required missing fields for a transaction
      items:
        type: string
    ValidationInvalid:
      type: array
      title: Invalid Fields
      description: list of invalid fields for a transaction
      items:
        type: string
    AccountsDataValidationError:
      type: object
      title: Accounts validation error
      required:
        - operation_id
        - code_id
        - message
        - errors
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        code_id:
          type: string
          enum:
            - failed_validation
        message:
          type: string
          description: High level description on what has failed
        errors:
          type: object
          title: Map of customers
          description: a map of customer IDs to account validation errors
          properties:
            missing_fields:
              type: object
              title: Map of Account
              description: |
                A map of accounts to missing fields array.

                The key contains the index of the account causing issues.
                See example
              additionalProperties:
                $ref: '#/components/schemas/ValidationMissing'
            invalid_fields:
              type: object
              title: Map of Account
              description: |
                A map of accounts to invalid fields array.

                The key contains the index of the account causing issues.
                See example
              additionalProperties:
                $ref: '#/components/schemas/ValidationInvalid'
      example:
        operation_id: v2_ingest_accounts_post
        code_id: failed_validation
        message: validation failure(s) in request payload
        errors:
          1db8c4b5-e5ae-429e-947b-6a4616ffc717:
            missing_fields:
              accounts[0]:
                - provider
                - account_id
              accounts[1]:
                - account_id
            invalid_fields:
              accounts[0]:
                - currency
    CustomerID:
      type: string
      format: uuid
      description: A unique identifier for a Customer, as registered on Bud's platform.
      example: c3339af9-2426-44d4-9c4d-ddb8fd281e23
    SynchronousEnrichmentsList:
      type: array
      description: |
        The list of enrichments product to execute during the synchronous execution of the request. Based on this list, the transactions sent will be processed through a number of enrichment flows, and this drives the amount of additional information attached to each transactions in the synchronous process.

        The list of available enrichement products during the synchronous ingestion is the following:
        - categories
        - merchants

        The default behaviour is to execute `categories` and `merchants`.

        Note: This attribute doesn't limit the execution of all Bud's enrichments, we'll still return a number of additional information (eg: tokens), but it switches on and off the two enrichments listed above.
      example:
        - categories
        - merchants
      items:
        type: string
        enum:
          - categories
          - merchants
    CustomerTransactionV3:
      title: Customer Transaction V3
      description: A schema for Bud V3 transaction format
      type: object
      required:
        - transaction_id
        - account_id
        - description
        - date_time
        - amount
      properties:
        transaction_id:
          type: string
          description: |
            Unique, immutable transaction identifier. This can be of any format (not necessarily UUID), with a maximum of 255 characters.
            It's important this ID is immutable over time and unique as we use this ID as a key to store the transaction against your customer, so if more than one transaction has the same ID for the same customer, we will store only one of them.
          example: 4cef424c-1d7f-4cab-8be2-aee7e1774a00
        description:
          type: string
          description: Free text string providing details on the transaction itself
        account_id:
          type: string
          description: The account identifier that the transaction belongs to. This can be of any format (not necessarily UUID), with a maximum of 255 characters.
          example: 2f5b2055-6253-4cd0-b646-06788342a609
        date_time:
          type: string
          format: datetime
          description: The date detailing when the transaction occurred, compliant with RFC3339
          example: '2022-11-10T23:00:00Z'
        amount:
          type: string
          description: |
            The value of the monetary amount. The value is formatted with the number of decimal places for the respective currency.

            A positive amount is a credit entry and a negative a debit entry.

            Example: `"10.98"` or `"-10.98"`
        currency:
          $ref: '#/components/schemas/BudCurrency'
        merchant_category_code:
          type: string
          description: |
            A Merchant Category Code (MCC) is a four-digit number listed in ISO 18245. 
            An MCC is used to classify a business by the types of goods or services it provides.
        merchant_name:
          type: string
          description: Merchant name
    TransactionWindow:
      type: object
      title: Transaction Window
      description: |
        The transaction window is used to describe the entire period for which you have provided full coverage for the transactions within the request. 

        It is used by Bud to ascertain periods of inactivity on the account(s) in question to ensure accurate data can be provided across downstream endpoints (e.g. Retrieve Balances Over Time).
      required:
        - account_id
        - start
        - end
      properties:
        account_id:
          type: string
          format: uuid
          description: The account identifier that the transaction belongs to
          example: 2f5b2055-6253-4cd0-b646-06788342a609
        start:
          type: string
          format: datetime
          description: The date detailing the start of the transaction window, compliant with RFC3339
          example: '2022-05-10T23:00:00Z'
        end:
          type: string
          format: datetime
          description: The date detailing the end of the transaction window, compliant with RFC3339
          example: '2022-10-10T23:00:00Z'
    TransactionWindowArray:
      type: array
      description: |
        If not provided, the transaction window is inferred from the date of the first and last transactions.
      items:
        $ref: '#/components/schemas/TransactionWindow'
    IngestTransactionsV3Request:
      title: Bud V3 Transactions Request
      description: Ingest transaction expected request body.
      type: array
      items:
        type: object
        required:
          - customer_id
          - transactions
        properties:
          customer_id:
            $ref: '#/components/schemas/CustomerID'
          customer_secret:
            $ref: '#/components/schemas/CustomerSecret'
          sync_enrichments:
            $ref: '#/components/schemas/SynchronousEnrichmentsList'
          transactions:
            type: array
            description: List of transactions belonging to the customer.
            minLength: 1
            items:
              $ref: '#/components/schemas/CustomerTransactionV3'
          transaction_windows:
            $ref: '#/components/schemas/TransactionWindowArray'
    schemas-Categories:
      title: Categories
      type: object
      description: |
        Categories enrichment associated with a Transaction, as generated by Bud's artificial intelligence models.  Currently two levels of category are supported, with `l1` being a coarse-grained category level and `l2` being more refined.
      properties:
        l1:
          $ref: '#/components/schemas/Category'
          description: Level 1 Category
        l2:
          $ref: '#/components/schemas/Category'
          description: Level 2 Category
    schemas-Merchant:
      title: Merchant
      type: object
      description: |
        Merchant enrichment associated with a Transaction, as generated using a combination of Bud's artificial  intelligence models and database of known merchants.
      properties:
        id:
          type: string
          description: UUID corresponding to the merchant, if available. Subject to version control.
        slug:
          type: string
          description: Unique human readable identifier of the merchant. Not subject to version control.
        display_name:
          type: string
          description: UI friendly display name for the merchant.
        logo:
          type: string
          description: URL supplying merchant logo, if available.
        tokens:
          type: array
          description: |
            A list of tokens calculated from the transaction model, used to identify the Merchant.  This list is often present even if the merchant details (id, slug, disply_name, logo) are not returned.
          items:
            $ref: '#/components/schemas/Token'
        website:
          type: string
          description: URL supplying merchant website, if available.
    schemas-Processor:
      title: Processor
      type: object
      description: |
        Processor enrichment associated with a Transaction, as generated using a combination of Bud's artificial  intelligence models and database of known payment processors.
      properties:
        id:
          type: string
          description: UUID corresponding to the processor, if available. Subject to version control.
        slug:
          type: string
          description: Unique human readable identifier of the processor. Not subject to version control.
        display_name:
          type: string
          description: UI friendly display name for the processor.
        logo:
          type: string
          description: URL supplying processor logo, if available.
        tokens:
          type: array
          description: |
            A list of tokens calculated from the transaction model, used to identify the Merchant.  This list is often present even if the merchant details (id, slug, disply_name, logo) are not returned.
          items:
            $ref: '#/components/schemas/Token'
        website:
          type: string
          description: URL supplying merchant website, if available.
    schemas-Location:
      title: Location
      type: object
      description: Location enrichment associated with a Transaction
      properties:
        address:
          type: object
          description: The address of the detected location.
          properties:
            address_lines:
              type: array
              description: |
                The lines of the detected address. These could be anything from a full street address down to a simple town or city. The level of detail depends on the resolution with which we are able to detect the transaction location.
              items:
                type: string
            geolocation:
              type: object
              description: The geolocation if an exact match is found
              properties:
                latitude:
                  type: number
                  format: double
                longitude:
                  type: number
                  format: double
            country:
              type: string
              description: An ISO-3166 Alpha-3 country code representing the detected country the transaction was located.
        tokens:
          type: array
          description: A list of tokenised location string. These could be anything from a full street address down to a simple town or city.
          items:
            type: string
    SyncEnrichments:
      title: Enrichments
      type: object
      description: Contextual enrichments associated with a Transaction
      properties:
        categories:
          $ref: '#/components/schemas/schemas-Categories'
        merchant:
          $ref: '#/components/schemas/schemas-Merchant'
        processor:
          $ref: '#/components/schemas/schemas-Processor'
        location:
          $ref: '#/components/schemas/schemas-Location'
        transaction_types:
          type: array
          description: Transaction types associated with the transaction
          items:
            type: string
        names:
          type: array
          description: Names that were detected in the transaction description
          items:
            type: string
    TransactionForSyncIngest:
      title: Transaction
      type: object
      description: A financial transaction
      required:
        - transaction_id
        - account_id
        - description
        - amount
        - credit_debit_indicator
        - status
        - date_time
      properties:
        transaction_id:
          type: string
          description: Unique identifier for the transaction. May be mutable depending on original ingestion source.
        account_id:
          type: string
          description: Identifier for the account associated with the transaction.
        description:
          type: string
          description: Description of the transaction.
        credit_debit_indicator:
          type: string
          description: Credit/Debit Indicator
          enum:
            - credit
            - debit
        status:
          type: string
          description: Status of the transaction. Defaults to booked.
          enum:
            - booked
            - pending
        amount:
          $ref: '#/components/schemas/BudAmount'
        date_time:
          type: string
          description: Date of the transaction compliant with RFC3339.
        enrichments:
          $ref: '#/components/schemas/SyncEnrichments'
        merchant_category_code:
          type: string
          description: |
            A Merchant Category Code (MCC) is a four-digit number listed in ISO 18245.  An MCC is used to classify a business by the types of goods or services it provides.
        tags:
          type: array
          description: |
            A list of potential tags associated with the transaction after contextual enrichment, which can be used for filtering.

            Region and client specific.

            | Value                   | Description                                               |
            |:------------------------|:----------------------------------------------------------|
            | `benefit`               | A government/non-profit benefit transaction               |
            | `debt-collection`       | A transaction associated with a known debt-collector      |
            | `loan`                  | A transaction associated with a loan                      |
            | `income`                | A transaction associated with income                      |
            | `pending`               | A transaction which has not been booked                   |
            | `regular-transaction`   | A transaction predicted to occur with a regular frequency |
            | `subscription`          | A transaction associated with a subscription service      |
            | `online`                | A transaction associated with an online merchant          |
          items:
            type: string
    IngestV2SyncResponseData:
      type: object
      title: Enriched Customer Transactions
      required:
        - customer_id
        - enriched_transactions
      properties:
        customer_id:
          $ref: '#/components/schemas/CustomerID'
        enriched_transactions:
          type: array
          items:
            $ref: '#/components/schemas/TransactionForSyncIngest'
    IngestV2SyncResponse:
      title: Ingest Transactions V2 Sync Response
      type: object
      allOf:
        - $ref: '#/components/schemas/IngestV2Response'
        - type: object
          required:
            - operation_id
            - metadata
          properties:
            data:
              type: array
              items:
                $ref: '#/components/schemas/IngestV2SyncResponseData'
            metadata:
              $ref: '#/components/schemas/IngestV2Metadata'
    ValidationError:
      type: object
      title: Validation Errors
      required:
        - operation_id
        - code_id
        - message
        - errors
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        code_id:
          type: string
          enum:
            - failed_validation
        message:
          type: string
          description: 'High level description on what has failed '
        errors:
          type: object
          title: Map_of_customer_IDs
          description: a map of customer IDs to transaction validation errors
          properties:
            missing_fields:
              type: object
              title: Map of transaction IDs
              description: |
                A map of transaction IDs to missing fields array.

                If the transaction ID was missing use the request transaction array index to identify it.
                See example
              additionalProperties:
                $ref: '#/components/schemas/ValidationMissing'
            invalid_fields:
              type: object
              title: Map of transaction IDs
              description: |
                A map of transaction IDs to invalid fields array.

                If the transaction ID was missing use the request transaction array index to identify it.
                See example
              additionalProperties:
                $ref: '#/components/schemas/ValidationInvalid'
      example:
        operation_id: enrich_transactions_post
        code_id: failed_validation
        message: validation failure(s) in request payload
        errors:
          1db8c4b5-e5ae-429e-947b-6a4616ffc717:
            missing_fields:
              8b13ac45-9fe6-4c17-8c6d-b60ab2b4edad:
                - description
                - customer_id
              ba466961-d623-4173-9001-2f6487a9a41e:
                - customer_id
              tx-1:
                - transaction_id
              578f24f2-5046-463a-bca6-239e0dfac7fa:
                - amount
            invalid_fields:
              8b13ac45-9fe6-4c17-8c6d-b60ab2b4edad:
                - date
              ba466961-d623-4173-9001-2f6487a9a41e:
                - date
    IngestResponseV3SubTask:
      title: Customer Ingest Task
      description: A single customer ingest task status
      type: object
      required:
        - customer_id
        - status
      properties:
        customer_id:
          type: string
          format: uuid
          description: A unique identifier for a Customer, as registered on Bud's platform.
        status:
          title: Ingest Response Status
          description: Ingest response status.
          type: string
          enum:
            - Completed
            - Failed
            - Pending
        error:
          description: Any error messages describing why a sub task has failed.
          type: object
          additionalProperties: true
    OverallIngestResponseStatus:
      title: Ingest Task Overall Status
      description: Ingest response status.
      type: string
      enum:
        - Completed
        - Pending
        - Failed
        - PartialCompleted
    schemas-IngestStatusTaskMetadata:
      title: Ingest Task Metadata
      description: Expected response structure.
      type: object
      required:
        - task_id
        - status
      properties:
        task_id:
          type: string
          format: uuid
          description: Unique task identifier.
        status:
          $ref: '#/components/schemas/OverallIngestResponseStatus'
        ingest_request_id:
          type: string
          format: uuid
          description: Unique identifier of the initial ingest request
        ingest_route:
          type: string
          description: The endpoint used for this ingest task
          enum:
            - ingest_accounts_post
            - ingest_transactions_post
            - v2_ingest_accounts_post
            - v2_ingest_transactions_post
        ingest_schema:
          type: string
          description: The account/transaction schema used for the ingest
          enum:
            - application/bud-accounts+json
            - application/bud-transaction-v2+json
            - application/bud-transaction-v3+json
        next_url:
          description: The URL to call to obtain the results of the task
          type: string
        next_url_delay:
          description: Recommended delay in milliseconds before next call
          type: number
    IngestStatusV3Response:
      title: Ingestion Task Status Response
      type: object
      description: Report on the status of an ingestion task
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: array
          items:
            $ref: '#/components/schemas/IngestResponseV3SubTask'
        metadata:
          $ref: '#/components/schemas/schemas-IngestStatusTaskMetadata'
    TaskNotFoundError:
      type: object
      title: Task Not Found
      required:
        - operation_id
        - code_id
        - message
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        code_id:
          type: string
        message:
          type: string
          description: High level description on what has failed
      example:
        operation_id: ingest_transactions_get
        code_id: not_found
        message: Task not found
    USAccountV2:
      title: Account
      type: object
      required:
        - account_id
        - currency
      properties:
        account_id:
          type: string
          description: |
            A unique id associated with the account.

            Example: `sdb4eRMaad8XVEvdIoISOQ`
        currency:
          $ref: '#/components/schemas/BudCurrency'
        holder:
          title: Account_Holder
          description: |
            The account holder. This field is only present if parties data **is not** available.

            Parties data will only be present if you are a Check customer, and the provider is support by Check.
            Providers that support Check can be found in the Connect coverage table in Guides, under Connect.
          type: object
          properties:
            name:
              type: string
              description: |
                The name of the given account holder.

                Example: `John Smith`
            relationship:
              type: string
              description: |
                The relationship that the individual holder has with the account. If parties data is not present, this will always be `unknown`.

                Currently supported values include (but are not necessarily limited to):
                  - `sole`
                  - `joint`
                  - `delegate`
                  - `unknown`
        holders:
          type: array
          description: |
            The account holders. This field is only present if parties data **is** available.

            Parties data will only be present if you are a Check customer, and the provider is supported by Check.
            Providers that support Check can be found in the Connect coverage table in Guides, under Connect.
          items:
            title: Account_Holder
            type: object
            properties:
              name:
                type: string
                description: |
                  The name of the given account holder.

                  Example: `John Smith`
              relationship:
                type: string
                description: |
                  The relationship that the individual holder has with the account. If parties data is not present, this will always be `unknown`

                  Currently supported values include (but are not necessarily limited to):
                    - `sole`
                    - `joint`
                    - `delegate`
                    - `unknown`
        account_name:
          type: string
          description: |
            The name associated with the account, this is often a friendly name assigned to the account to make it easier to refer to.

            Example: `Household Savings Account`
        account_type:
          type: string
          description: |
            The type of account.

            Currently supported values include (but are not necessarily limited to):
              - `charge_card`
              - `credit_card`
              - `current_account`
              - `e_money`
              - `investment`
              - `loan`
              - `mortgage`
              - `other`
              - `pre_paid_card`
              - `savings`
        usage_type:
          type: string
          description: |
            The intended usage of the account.

            Currently supported values include (but are not necessarily limited to):
              - `personal`
              - `business`
        provider:
          type: string
          description: |
            The account's provider, this is usually the bank or building society the account is held with.

            Example: `Nationwide`
        identifiers:
          type: object
          description: These are wellknown fields which uniquely identify the account.
          properties:
            us_account_number:
              type: string
              description: |
                Account display number for the end user's handle at owning institution.

                Example: `...3750`
        balances:
          type: array
          title: Balances
          description: The latest balances for the account.
          items:
            type: object
            title: Balance
            required:
              - date
              - type
              - amount
              - credit_debit_indicator
            properties:
              date:
                type: string
                description: |
                  The date when the balance was last updated in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).

                  Examples:
                    - `2023-01-17T17:29:51Z`
                    - `2023-01-17T17:29:51-08:00`
              type:
                type: string
                description: |
                  The type for the given balance

                  Currently supported values include (but are not necessarily limited to):
                    - `closing_available`
                    - `closing_booked`
                    - `closing_cleared`
                    - `expected`
                    - `forward_available`
                    - `information`
                    - `interim_available`
                    - `interim_booked`
                    - `interim_cleared`
                    - `opening_available`
                    - `opening_booked`
                    - `opening_cleared`
                    - `previously_closed_booked`
              amount:
                $ref: '#/components/schemas/BudAmount'
              credit_debit_indicator:
                type: string
                description: The credit or debit state of the given balance
                enum:
                  - credit
                  - debit
        transaction_windows:
          type: array
          title: Transaction Windows
          description: |
            The transaction windows indicate for which periods we have full coverage of transactions ingested for the account.
          items:
            type: object
            title: Transaction Window
            required:
              - from
              - to
            properties:
              from:
                type: string
                description: A [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339) datetime recording the start of the window
              to:
                type: string
                description: A [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339) datetime recording the end of the window
        credit_lines:
          type: array
          title: Credit Lines
          description: The latest lines of credit available to the account. This is typically a representation of the overdraft or credit limits.
          items:
            type: object
            title: Credit_Line
            required:
              - date
              - type
              - amount
            properties:
              date:
                type: string
                description: |
                  The date when the credit line was last updated in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).

                  Examples:
                    - `2023-01-17T17:29:51Z`
                    - `2023-01-17T17:29:51-08:00`
              type:
                type: string
                description: |
                  The type of the given credit line.

                  Currently supported values include (but are not necessarily limited to):
                    - `available`
                    - `credit`
                    - `emergency`
                    - `pre_agreed`
                    - `temporary`
              amount:
                $ref: '#/components/schemas/BudAmount'
    USListAccountsV2Response:
      title: Retrieve Accounts Response
      type: object
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          type: string
          enum:
            - financial_v2_accounts
        data:
          type: array
          items:
            $ref: '#/components/schemas/USAccountV2'
        metadata:
          type: object
          required:
            - parameters
            - result_count
          properties:
            parameters:
              type: object
              properties:
                currencies:
                  description: The Currency values supplied in the request to generate the given result set.
                  type: array
                  items:
                    $ref: '#/components/schemas/BudCurrency'
                account_types:
                  description: |
                    The Account Type values supplied in the request to generate the given result set.

                    Currently supported values include (but are not necessarily limited to):
                      - `charge_card`
                      - `credit_card`
                      - `current_account`
                      - `e_money`
                      - `investment`
                      - `loan`
                      - `mortgage`
                      - `other`
                      - `pre_paid_card`
                      - `savings`
                  type: array
                  items:
                    type: string
                usage_types:
                  description: |
                    The Usage Type values supplied in the request to generate the given result set.

                    Currently supported values include (but are not necessarily limited to):
                      - `personal`
                      - `business`
                  type: array
                  items:
                    type: string
                holder_types:
                  description: |
                    The Holder Type values supplied in the request to generate the given result set.

                    Currently supported values include (but are not necessarily limited to):
                      - `sole`
                      - `joint`
                      - `delegate`
                      - `unknown`
                  type: array
                  items:
                    type: string
                providers:
                  description: The Provider values supplied in the request to generate the given result set.
                  type: array
                  items:
                    type: string
            result_count:
              type: number
              description: The number of accounts returned in the results
    BalanceAmount:
      title: Balance amount
      description: A representation of both the amount and the credit/debit indicator
      required:
        - amount
        - type
        - credit_debit_indicator
      properties:
        amount:
          $ref: '#/components/schemas/BudAmount'
        type:
          type: string
          description: |
            The type for the given balance.

            Currently supported values include (but are not necessarily limited to):
              - `closing_available`
              - `closing_booked`
              - `closing_cleared`
              - `expected`
              - `forward_available`
              - `information`
              - `interim_available`
              - `interim_booked`
              - `interim_cleared`
              - `opening_available`
              - `opening_booked`
              - `opening_cleared`
              - `previously_closed_booked`
        credit_debit_indicator:
          type: string
          description: Indication as to whether the balance is in credit or debit
          enum:
            - credit
            - debit
    BalanceOverTimeDataPoint:
      title: Balance Over Time Data-Point
      description: A single record of the balance at the end of the given date.
      type: object
      required:
        - date
        - booked
      properties:
        date:
          type: string
          description: |
            The date of the given balance in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).

            Examples:
              - `2023-03-17T23:59:59Z`
              - `2023-03-17T23:59:59-08:00`
        booked:
          description: The current balance of the account
          $ref: '#/components/schemas/BalanceAmount'
        pending:
          description: The balance of the account if all pending transactions have settled. This field is only present if the pending balance is different than the booked balance.
          $ref: '#/components/schemas/BalanceAmount'
    BudDateRangeMetadata:
      title: Metadata
      type: object
      required:
        - from
        - to
      properties:
        from:
          type: string
          description: |
            The date from when results were retrieved in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).
            This is either populated with the default value used when retrieving the results, or the user specified parameter.

            Examples:
              - `2023-01-17T17:29:51Z`
              - `2023-01-17T17:29:51-08:00`
        to:
          type: string
          description: |
            The date up to when results were retrieved in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).
            This is either populated with the default value used when retrieving the results, or the user specified parameter.

            Examples:
              - `2023-03-17T17:29:51Z`
              - `2023-03-17T17:29:51-08:00`
    GetBalancesResponse:
      title: Get Balances Response
      type: object
      required:
        - operation_id
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: array
          items:
            type: object
            required:
              - balances
            properties:
              account_id:
                type: string
                description: Identifier of the accounts from which the balances have been calculated
              balances:
                type: array
                items:
                  $ref: '#/components/schemas/BalanceOverTimeDataPoint'
        metadata:
          type: object
          properties:
            accounts:
              description: This is a hashmap representing account_ids and metadata about the results returned from the balances endpoint
              additionalProperties:
                description: Hashmap of an account_id returned from the balances endpoint
                allOf:
                  - $ref: '#/components/schemas/BudDateRangeMetadata'
                  - type: object
                    properties:
                      balance_count:
                        type: number
                        description: The number of balances returned for the account
                  - type: object
                    properties:
                      min_balance:
                        description: The minimum balance in the returned period
                        $ref: '#/components/schemas/BudAmount'
                  - type: object
                    properties:
                      max_balance:
                        description: The maximum balance in the returned period
                        $ref: '#/components/schemas/BudAmount'
            parameters:
              title: The parameters used to calculated balances
              allOf:
                - $ref: '#/components/schemas/BudDateRangeMetadata'
                - type: object
                  properties:
                    granularity:
                      type: string
                      description: |
                        The granularity that the balances have been retrieved for.

                        Currently supported values include (but are not necessarily limited to):
                          - `daily`
                          - `weekly`
                          - `biweekly`
                          - `monthly`
                          - `quarterly`
                          - `six_monthly`
                          - `annually`
    GetBalancesForAccountIDResponse:
      title: Get Balances For Account ID Response
      type: object
      required:
        - operation_id
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: array
          items:
            $ref: '#/components/schemas/BalanceOverTimeDataPoint'
        metadata:
          type: object
          properties:
            accounts:
              description: Metadata about the response for the given account_id
              allOf:
                - $ref: '#/components/schemas/BudDateRangeMetadata'
                - type: object
                  properties:
                    balance_count:
                      type: number
                      description: The number of balances returned for the account
                - type: object
                  properties:
                    min_balance:
                      description: The minimum balance in the returned period
                      $ref: '#/components/schemas/BudAmount'
                - type: object
                  properties:
                    max_balance:
                      description: The maximum balance in the returned period
                      $ref: '#/components/schemas/BudAmount'
            parameters:
              allOf:
                - $ref: '#/components/schemas/BudDateRangeMetadata'
                - type: object
                  properties:
                    granularity:
                      type: string
                      description: The granularity that the balances have been retrieved for.
                    account_id:
                      type: string
                      description: The account ID the balances have been retrieved for.
    BadRequestNotFoundResponse:
      title: Bad Request Not Found Response
      type: object
      required:
        - operation_id
        - code_id
        - message
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        code_id:
          type: string
          description: A descriptive enough string that is linked to the reason for the error.
        message:
          type: string
          description: An actual user friendly error message.
    BalanceV3Amount:
      title: Balance amount
      description: A representation of both the amount and the credit/debit indicator
      required:
        - amount
        - credit_debit_indicator
      properties:
        amount:
          $ref: '#/components/schemas/BudAmount'
        credit_debit_indicator:
          type: string
          description: Indication as to whether the balance is in credit or debit
          enum:
            - credit
            - debit
    BalanceOverTimeV3DataPoint:
      title: Balance Over Time Data-Point
      description: A single record of the balance at the end of the given date.
      type: object
      required:
        - date
        - booked
        - pending
      properties:
        date:
          type: string
          description: |
            The date of the given balance in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).

            Examples:
              - `2023-03-17T23:59:59Z`
              - `2023-03-17T23:59:59-08:00`
        booked:
          description: The current balance of the account
          $ref: '#/components/schemas/BalanceV3Amount'
        pending:
          description: The balance of the account if all pending transactions have settled. This field is only present if the pending balance is different than the booked balance.
          $ref: '#/components/schemas/BalanceV3Amount'
    GetBalancesV3Response:
      title: Get Balances Response
      type: object
      required:
        - operation_id
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: array
          items:
            type: object
            required:
              - balances
            properties:
              account_id:
                type: string
                description: Identifier of the accounts from which the balances have been calculated
              balances:
                type: array
                items:
                  $ref: '#/components/schemas/BalanceOverTimeV3DataPoint'
        metadata:
          type: object
          properties:
            accounts:
              description: This is a hashmap representing account_ids and metadata about the results returned from the balances endpoint
              additionalProperties:
                description: Hashmap of an account_id returned from the balances endpoint
                allOf:
                  - $ref: '#/components/schemas/BudDateRangeMetadata'
                  - type: object
                    properties:
                      balance_count:
                        type: number
                        description: The number of balances returned for the account
                  - type: object
                    properties:
                      min_balance:
                        description: The minimum balance in the returned period
                        $ref: '#/components/schemas/BudAmount'
                  - type: object
                    properties:
                      max_balance:
                        description: The maximum balance in the returned period
                        $ref: '#/components/schemas/BudAmount'
            parameters:
              title: The parameters used to calculated balances
              allOf:
                - $ref: '#/components/schemas/BudDateRangeMetadata'
                - type: object
                  properties:
                    granularity:
                      type: string
                      description: |
                        The granularity that the balances have been retrieved for.

                        Currently supported values include (but are not necessarily limited to):
                          - `daily`
                          - `weekly`
                          - `biweekly`
                          - `monthly`
                          - `quarterly`
                          - `six_monthly`
                          - `annually`
    GetBalancesForAccountIDV3Response:
      title: Get Balances For Account ID Response
      type: object
      required:
        - operation_id
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: array
          items:
            $ref: '#/components/schemas/BalanceOverTimeV3DataPoint'
        metadata:
          type: object
          properties:
            accounts:
              description: Metadata about the response for the given account_id
              allOf:
                - $ref: '#/components/schemas/BudDateRangeMetadata'
                - type: object
                  properties:
                    balance_count:
                      type: number
                      description: The number of balances returned for the account
                - type: object
                  properties:
                    min_balance:
                      description: The minimum balance in the returned period
                      $ref: '#/components/schemas/BudAmount'
                - type: object
                  properties:
                    max_balance:
                      description: The maximum balance in the returned period
                      $ref: '#/components/schemas/BudAmount'
            parameters:
              allOf:
                - $ref: '#/components/schemas/BudDateRangeMetadata'
                - type: object
                  properties:
                    granularity:
                      type: string
                      description: The granularity that the balances have been retrieved for.
                    account_id:
                      type: string
                      description: The account ID the balances have been retrieved for.
    AccountV2:
      title: Account
      type: object
      required:
        - account_id
        - currency
      properties:
        account_id:
          type: string
          description: |
            A unique id associated with the account.

            Example: `sdb4eRMaad8XVEvdIoISOQ`
        currency:
          $ref: '#/components/schemas/BudCurrency'
        holder:
          title: Account_Holder
          description: |
            The account holder. This field is only present if parties data **is not** available.

            Parties data will only be present if you are a Check customer, and the provider is support by Check.
            Providers that support Check can be found in the Connect coverage table in Guides, under Connect.
          type: object
          properties:
            name:
              type: string
              description: |
                The name of the given account holder.

                Example: `John Smith`
            relationship:
              type: string
              description: |
                The relationship that the individual holder has with the account. If parties data is not present, this will always be `unknown`.

                Currently supported values include (but are not necessarily limited to):
                  - `sole`
                  - `joint`
                  - `delegate`
                  - `unknown`
        holders:
          type: array
          description: |
            The account holders. This field is only present if parties data **is** available.

            Parties data will only be present if you are a Check customer, and the provider is supported by Check.
            Providers that support Check can be found in the Connect coverage table in Guides, under Connect.
          items:
            title: Account_Holder
            type: object
            properties:
              name:
                type: string
                description: |
                  The name of the given account holder.

                  Example: `John Smith`
              relationship:
                type: string
                description: |
                  The relationship that the individual holder has with the account. If parties data is not present, this will always be `unknown`.

                  Currently supported values include (but are not necessarily limited to):
                    - `sole`
                    - `joint`
                    - `delegate`
                    - `unknown`
        account_name:
          type: string
          description: |
            The name associated with the account, this is often a friendly name assigned to the account to make it easier to refer to.

            Example: `Household Savings Account`
        account_type:
          type: string
          description: |
            The type of account.

            Currently supported values include (but are not necessarily limited to):
              - `charge_card`
              - `credit_card`
              - `current_account`
              - `e_money`
              - `investment`
              - `loan`
              - `mortgage`
              - `other`
              - `pre_paid_card`
              - `savings`
        usage_type:
          type: string
          description: |
            The intended usage of the account.

            Currently supported values include (but are not necessarily limited to):
              - `personal`
              - `business`
        provider:
          type: string
          description: |
            The account's provider, this is usually the bank or building society the account is held with.

            Example: `Nationwide`
        identifiers:
          type: object
          description: These are wellknown fields which uniquely identify the account.
          properties:
            uk_sort_code:
              type: string
              description: |
                A six digit number identifying the UK bank or building society the account is held with. This is usually supplied alongside a `uk_account_number` to uniquely identify the account.

                Example: `601613`
            uk_account_number:
              type: string
              description: |
                An eight digit number uniquely identifying the account for the UK bank or building society the account is held with. This is usually supplied alongside a `uk_sort_code` to uniquely identify the account from accounts with other UK banks or building societies.

                Example: `31926819`
            nz_account_number:
              type: string
              description: |
                A sixteen digit number uniquely identifying the account and New Zealand bank the account is held with.

                Example: `1212341234567123`
            iban:
              type: string
              description: |
                A thirty-four character alphanumerical code (ISO 13616), internationally and uniquely identifying the account.

                Example: `GB29NWBK60161331926819`
            pan:
              type: string
              description: |
                A number between 14 and 19 digits that uniquely identifies the account, this is usually the number printed on the card assigned to the account.

                Example: `4444333322221111`
        balances:
          type: array
          title: Balances
          description: The latest balances for the account.
          items:
            type: object
            title: Balance
            required:
              - date
              - type
              - amount
              - credit_debit_indicator
            properties:
              date:
                type: string
                description: |
                  The date when the balance was last updated in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).

                  Examples:
                    - `2023-01-17T17:29:51Z`
                    - `2023-01-17T17:29:51-08:00`
              type:
                type: string
                description: |
                  The type for the given balance

                  Currently supported values include (but are not necessarily limited to):
                    - `closing_available`
                    - `closing_booked`
                    - `closing_cleared`
                    - `expected`
                    - `forward_available`
                    - `information`
                    - `interim_available`
                    - `interim_booked`
                    - `interim_cleared`
                    - `opening_available`
                    - `opening_booked`
                    - `opening_cleared`
                    - `previously_closed_booked`
              amount:
                $ref: '#/components/schemas/BudAmount'
              credit_debit_indicator:
                type: string
                description: The credit or debit state of the given balance
                enum:
                  - credit
                  - debit
        transaction_windows:
          type: array
          title: Transaction Windows
          description: |
            The transaction windows indicate for which periods we have full coverage of transactions ingested for the account.
          items:
            type: object
            title: Transaction Window
            required:
              - from
              - to
            properties:
              from:
                type: string
                description: A [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339) datetime recording the start of the window
              to:
                type: string
                description: A [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339) datetime recording the end of the window
        credit_lines:
          type: array
          title: Credit Lines
          description: The latest lines of credit available to the account. This is typically a representation of the overdraft or credit limits.
          items:
            type: object
            title: Credit_Line
            required:
              - date
              - type
              - amount
            properties:
              date:
                type: string
                description: |
                  The date when the credit line was last updated in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).

                  Examples:
                    - `2023-01-17T17:29:51Z`
                    - `2023-01-17T17:29:51-08:00`
              type:
                type: string
                description: |
                  The type of the given credit line.

                  Currently supported values include (but are not necessarily limited to):
                    - `available`
                    - `credit`
                    - `emergency`
                    - `pre_agreed`
                    - `temporary`
              amount:
                $ref: '#/components/schemas/BudAmount'
    RetrieveAccountByIDV2Response:
      title: Retrieve Account By ID Response
      type: object
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          type: string
          enum:
            - financial_v2_accounts_account_id
        data:
          $ref: '#/components/schemas/AccountV2'
        metadata:
          type: object
    CustomerCategoryCorrectionPayload:
      title: Customer Category Correction
      type: object
      description: Expected request structure for the category corrections endpoint
      required:
        - transaction_id
      properties:
        transaction_id:
          type: string
          description: The unique identifier for the transaction
        category_l1:
          type: string
          description: The name of the category that the transaction should be assigned
        category_l2:
          type: string
          description: The name of the subcategory that the transaction should be assigned
        include_similar:
          type: boolean
          description: Correct the category of other similar transactions to the specified transaction
          default: false
    CustomerCategoryCorrectionRequest:
      title: Customer Category Corrections Request Payload
      type: array
      description: Expected request structure for the category corrections endpoint
      items:
        $ref: '#/components/schemas/CustomerCategoryCorrectionPayload'
    CustomerCategoryCorrectionResponse:
      title: Customer Category Corrections Response
      type: object
      description: Expected response structure for the category corrections endpoint
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: array
          items:
            $ref: '#/components/schemas/CustomerCategoryCorrectionPayload'
        metadata:
          $ref: '#/components/schemas/ResultsMetadata'
    CategoryTotalAmountWithTrxCount:
      type: object
      title: Amount with transaction count
      description: Amount of money in the cash transaction entry, including the number of transactions used in the calculation.
      required:
        - transaction_count
        - amount
      properties:
        amount:
          $ref: '#/components/schemas/BudAmount'
        transaction_count:
          type: integer
    CategoriesTotalV2L2:
      title: Categories Totals Response
      type: object
      required:
        - name
      properties:
        credit_total:
          type: array
          items:
            $ref: '#/components/schemas/CategoryTotalAmountWithTrxCount'
        debit_total:
          type: array
          items:
            $ref: '#/components/schemas/CategoryTotalAmountWithTrxCount'
        name:
          type: string
          description: Category id as slug.
    CategoriesTotalV2:
      type: object
      required:
        - name
      properties:
        credit_total:
          type: array
          items:
            $ref: '#/components/schemas/CategoryTotalAmountWithTrxCount'
        debit_total:
          type: array
          items:
            $ref: '#/components/schemas/CategoryTotalAmountWithTrxCount'
        name:
          type: string
          description: Category id as slug.
        l2_totals:
          type: array
          description: L2 category totals.
          items:
            $ref: '#/components/schemas/CategoriesTotalV2L2'
    CategoriesTotalV2Response:
      title: Categories Totals Response
      type: object
      description: ''
      required:
        - operation_id
        - data
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          nullable: true
          type: array
          items:
            $ref: '#/components/schemas/CategoriesTotalV2'
        metadata:
          type: object
          required:
            - from
            - to
          properties:
            from:
              type: string
              example: '2023-05-21T07:20:50.52Z'
              description: |
                RFC3339 compliant date stamp indicating the beginning of the transaction window used in this calculation
            to:
              type: string
              example: '2023-05-21T07:20:50.52Z'
              description: |
                RFC3339 compliant date stamp indicating the end of the transaction window used in this calculation
    CategoriesTotalTrendsV2Response:
      type: object
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: array
          items:
            type: object
            required:
              - data
              - to
              - from
            properties:
              data:
                type: array
                items:
                  $ref: '#/components/schemas/CategoriesTotalV2'
              to:
                type: string
                example: '2023-05-21T07:20:50.52Z'
                description: RFC 3339 Compliant date stamp indicating the beginning of the transaction window used in this calculation
              from:
                type: string
                example: '2023-05-21T07:20:50.52Z'
                description: RFC 3339 Compliant date stamp indicating the end of the transaction window used in this calculation
    components_schemas-Merchant:
      title: Bud Merchant Object
      type: object
      description: Details regarding a merchant associated with a transaction
      required:
        - id
        - name
        - logo
      properties:
        id:
          type: string
          description: Identifier for the detected merchant
        name:
          type: string
          description: Display name for the detected merchant
        logo:
          type: string
          description: URL for logo of the detected merchant
    MerchantTotalV2:
      type: object
      title: Merchant Total
      required:
        - merchant
        - total_debit
        - total_credit
        - transaction_count
      properties:
        merchant:
          $ref: '#/components/schemas/components_schemas-Merchant'
        total_debit:
          allOf:
            - title: Total Debit
              description: Total debit amount of all transactions identified with the named merchant
            - $ref: '#/components/schemas/BudAmount'
        total_credit:
          allOf:
            - title: Total Credit
              description: Total credit amount of all transactions identified with the named merchant
            - $ref: '#/components/schemas/BudAmount'
        transaction_count:
          type: number
          title: Transaction Count
          description: Total number of transactions identified with the named merchant
    LegacyBudDateRangeMetadata:
      title: Metadata
      type: object
      required:
        - from
        - to
      properties:
        from:
          type: string
          description: |
            The date from when results were retrieved in the format [ISO-8601](https://www.iso.org/iso-8601-date-and-time-format.html).
            This is either populated with the default value used when retrieving the results, or the user specified parameter.

            Example: `2023-01-17`
        to:
          type: string
          description: |
            The date up to when results were retrieved in the format [ISO-8601](https://www.iso.org/iso-8601-date-and-time-format.html).
            This is either populated with the default value used when retrieving the results, or the user specified parameter.

            Example: `2023-03-17`
    TransactionsResultsMetadata:
      title: Metadata
      description: Metadata associated with the response schema
      allOf:
        - $ref: '#/components/schemas/LegacyBudDateRangeMetadata'
        - type: object
          required:
            - results
          properties:
            results:
              type: number
              description: Number of results returned
    MerchantTotalsMetadataV2:
      allOf:
        - $ref: '#/components/schemas/TransactionsResultsMetadata'
        - type: object
          title: Metadata
          properties:
            categories_included:
              description: Categories included in total (from `X-Include-Categories`)
              type: array
              items:
                type: string
            categories_excluded:
              description: Categories excluded from total (from `X-Exclude-Categories`)
              type: array
              items:
                type: string
    MerchantTotalsResponseV2:
      title: Merchant Totals
      type: object
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: array
          items:
            $ref: '#/components/schemas/MerchantTotalV2'
        metadata:
          $ref: '#/components/schemas/MerchantTotalsMetadataV2'
    CategorisationModel:
      title: Categorisation Model
      type: object
      description: Bud categorisation model.
      required:
        - name
        - description
      properties:
        name:
          type: string
          description: Name of the model.
        description:
          type: string
          description: Description of the model & use-cases it provides.
        deprecated:
          type: boolean
          description: A flag to mark a particular model version as deprecated (this field is omitted if the model is not deprecated).
    GetModelsResponse:
      title: Models Response
      required:
        - operation_id
        - data
      properties:
        operation_id:
          type: string
        data:
          type: array
          items:
            $ref: '#/components/schemas/CategorisationModel'
    CategoriesFlat:
      title: Category List
      type: object
      description: A list of all the available categories and subcategories.
      properties:
        categories:
          type: array
          description: List of all the available categories.
          items:
            type: string
        subcategories:
          type: array
          description: List of all the available subcategories.
          items:
            type: string
    CategoriesMap:
      title: Category Map
      description: A map of all the available categories and respective subcategories
      type: array
      items:
        title: Category
        description: A single category and its respective subcategories.
        type: object
        properties:
          name:
            title: Category Name
            description: The name of the category.
            type: string
          subcategories:
            title: Subcategories
            description: The respective subcategories for the given category.
            type: array
            items:
              title: subcategory
              description: A subcategory that belongs to the given category.
              type: object
              properties:
                name:
                  title: Subcategory Name
                  description: The name of the subcategory.
                  type: string
    GetCategoriesV2Response:
      title: Categories Response
      type: object
      description: Expected response structure for the get categories endpoint.
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          oneOf:
            - $ref: '#/components/schemas/CategoriesFlat'
            - $ref: '#/components/schemas/CategoriesMap'
        metadata:
          type: object
          required:
            - model
          properties:
            model:
              $ref: '#/components/schemas/CategorisationModel'
    CategoriesResponse:
      title: Categories Response
      type: object
      description: Expected response structure for the get categories endpoint.
      required:
        - operation_id
        - data
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          oneOf:
            - $ref: '#/components/schemas/CategoriesFlat'
            - $ref: '#/components/schemas/CategoriesMap'
    LegacyBudAmount:
      title: Legacy Bud Amount
      type: object
      description: The monetary amount.
      required:
        - amount
        - currency
      properties:
        amount:
          $ref: '#/components/schemas/BudMonetaryValue'
        currency:
          $ref: '#/components/schemas/BudCurrency'
    BasicTransaction:
      title: Basic Transaction Schema
      type: object
      description: Basic transaction schema
      required:
        - transaction_id
        - account_id
        - transaction_description
        - provider
        - date
        - amount
        - credit_debit_indicator
      properties:
        transaction_id:
          type: string
          description: A unique identifier for the transaction
        account_id:
          type: string
          description: A unique identifier for the Customer bank account
        transaction_description:
          type: string
          description: Any Customer defined input, e.g. a bank transfer reference
        provider:
          type: string
          description: The name of the relevant provider relevant to the source of the original transaction data
        date:
          type: string
          description: |
            The date of the transaction in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).

            Examples:
              - `2023-03-17T17:29:51Z`
              - `2023-03-17T17:29:51-08:00`
        amount:
          $ref: '#/components/schemas/LegacyBudAmount'
        credit_debit_indicator:
          type: string
          description: Indication as to whether the transaction was a credit or debit
          enum:
            - Credit
            - Debit
    FutureTransactionV2:
      allOf:
        - type: object
          description: Expected transaction structure
          required:
            - transaction_id
            - account_id
            - transaction_description
            - date_time
            - amount
            - credit_debit_indicator
            - label
            - period
            - confidence
            - future_transactions
          properties:
            transaction_id:
              type: string
              description: Unique identifier for the transaction.
            account_id:
              type: string
              description: Unique identifier for the account.
            transaction_description:
              type: string
              description: Further details of the transaction. This is the transaction narrative, which is unstructured text.
            date_time:
              type: string
              description: The date of the transaction. In the following format RFC-3339 'Year-Month-Day Hour:Minute:Second'. E.g '2019-07-01T01:00:00'
            amount:
              $ref: '#/components/schemas/BudAmount'
            credit_debit_indicator:
              type: string
              description: Indication as to whether the transaction was a credit or debit. If credit then debtor is required. If debit then creditor required.
              enum:
                - credit
                - debit
            label:
              type: string
              description: Unique identifier for the regular transaction group
            period:
              type: string
              description: To describe the frequency of each transaction
              enum:
                - daily
                - weekly
                - biweekly
                - monthly
                - quarterly
                - six_monthly
                - annually
                - unknown
            confidence:
              type: string
              description: Probability score
            categories:
              type: object
              description: Categories of the original transaction
              properties:
                l1:
                  type: object
                  description: Level 1 Category
                  properties:
                    slug:
                      type: string
                      description: Unique human readable identifier of the category
                    confidence:
                      type: string
                      description: Degree of belief of correct assignment, expressed as a probability
                l2:
                  type: object
                  description: Level 2 Category
                  properties:
                    slug:
                      type: string
                      description: Unique human readable identifier of the category
                    confidence:
                      type: string
                      description: Degree of belief of correct assignment, expressed as a probability
            future_transactions:
              type: array
              items:
                type: object
                description: Dates and amounts of the predicted future occurrences
                required:
                  - date
                properties:
                  date:
                    type: string
                    description: The next date at which the future transaction will occur in the following format, 'Year-Month-Day'. E.g '2019-07-01'
                  amount:
                    type: object
                    $ref: '#/components/schemas/BudAmount'
    FutureTransactionV2Response:
      allOf:
        - type: object
          required:
            - operation_id
            - data
            - metadata
          properties:
            operation_id:
              $ref: '#/components/schemas/OperationId'
            data:
              type: array
              items:
                $ref: '#/components/schemas/FutureTransactionV2'
            metadata:
              type: object
              required:
                - results
                - months
              properties:
                results:
                  type: number
                  description: The number of different upcoming transactions that have been found
                months:
                  type: number
                  description: The number of months for which the upcoming transactions have been projected
                change_percentages:
                  type: array
                  description: A list of all of the percentage value changes that have been applied to different Level 2 categories
                  items:
                    type: object
                    required:
                      - l2
                      - value
                    properties:
                      l2:
                        type: string
                        description: The l2 category that a percentage change has been applied to
                        example: bills
                      value:
                        type: number
                        description: The percentage of change that has been applied to the given l2 category
                        example: 2
    BasicTransactionV2:
      title: Basic Transaction Schema
      type: object
      description: Basic transaction schema
      required:
        - transaction_id
        - account_id
        - transaction_description
        - provider
        - date
        - amount
        - credit_debit_indicator
      properties:
        transaction_id:
          type: string
          description: A unique identifier for the transaction
        account_id:
          type: string
          description: A unique identifier for the Customer bank account
        transaction_description:
          type: string
          description: A description of the transaction, similar to the transaction information in Open Banking. e.g. a bank transfer reference"
        provider:
          type: string
          description: The name of the relevant provider relevant to the source of the original transaction data
        date:
          type: string
          description: |
            The date of the transaction in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).

            Examples:
              - `2023-03-17T17:29:51Z`
              - `2023-03-17T17:29:51-08:00`
        amount:
          $ref: '#/components/schemas/BudAmount'
        credit_debit_indicator:
          type: string
          description: Indication as to whether the transaction was a credit or debit
          enum:
            - Credit
            - Debit
    CategoriserCategory:
      title: Categoriser Category
      type: object
      description: The details in relation to a specific category level, as taken from the output of Bud's categorsiation service.
      required:
        - name
        - confidence
        - label
      properties:
        name:
          type: string
          description: Internal name (identifier) of the category
        confidence:
          type: string
          description: The level of certainty that the model has predicted the category
        label:
          type: string
          description: Humanised category name
    MerchantIdV2:
      title: Merchant ID Object
      type: object
      description: Details surrounding the identified merchant of the transaction
      required:
        - id
        - name
        - logo
        - confidence
      properties:
        id:
          type: string
          description: A unique ID for the identified merchant
        name:
          type: string
          description: The clean name of the identified merchant
        logo:
          type: string
          description: The merchant's logo image URL location
        confidence:
          type: string
          description: The level of certainty that the model has predicted the merchant
    ProcessorIdV2:
      title: Processor ID Object
      type: object
      description: Details surrounding the identified processor of the transaction
      required:
        - id
        - name
        - logo
        - confidence
      properties:
        id:
          type: string
          description: A unique ID for the identified processor
        name:
          type: string
          description: The clean name of the identified processor
        logo:
          type: string
          description: The processor's logo image URL location
        confidence:
          type: string
          description: The level of certainty that the model has predicted the processor
    IncomeEnrichmentV2:
      title: Income Enrichment
      type: object
      description: Results from Bud's Income Finder Service
      required:
        - type
        - confidence
      properties:
        type:
          type: string
          description: The type of identified income type, either `salary_or_wages` or `other_incoming`
        confidence:
          type: string
          description: The level of certainty that the model has predicted an income related transaction.
    IncomeEnrichmentsV2:
      type: object
      title: Income Transaction Enrichments
      description: Results from required enrichment services for successful marking of income transactions
      properties:
        categories:
          type: object
          nullable: true
          title: Categoriser_Enrichment
          description: Results from Bud's Categorisation Service
          required:
            - l1
            - l2
            - l3
          properties:
            l1:
              type: array
              description: Details on the Level One category associated with the transaction
              items:
                $ref: '#/components/schemas/CategoriserCategory'
            l2:
              type: array
              description: Details on the Level Two category associated with the transaction
              items:
                $ref: '#/components/schemas/CategoriserCategory'
            l3:
              type: array
              description: Details on the Level Three category associated with the transaction
              items:
                $ref: '#/components/schemas/CategoriserCategory'
        merchant:
          allOf:
            - type: object
              nullable: true
            - $ref: '#/components/schemas/MerchantIdV2'
        processor:
          allOf:
            - type: object
              nullable: true
            - $ref: '#/components/schemas/ProcessorIdV2'
        income:
          allOf:
            - type: object
              nullable: true
            - $ref: '#/components/schemas/IncomeEnrichmentV2'
    IncomeTransactionV2:
      allOf:
        - $ref: '#/components/schemas/BasicTransactionV2'
        - title: Income Transaction
          required:
            - enrichment
          properties:
            enrichment:
              $ref: '#/components/schemas/IncomeEnrichmentsV2'
    IncomeAverageOverPeriod:
      title: Average income statistics over time period
      type: object
      required:
        - income
        - regular_income
      properties:
        income:
          allOf:
            - description: average of all income transactions
            - $ref: '#/components/schemas/BudAmount'
        regular_income:
          allOf:
            - description: average income transactions that we have also detected as regular
            - $ref: '#/components/schemas/BudAmount'
    IncomeAverage:
      title: Average income statistics
      type: object
      description: |-
        Averages of income amounts. These averages are calculated using the filters supplied in the `X-From` & `X-To` headers.
        For instance, with 6 months of Â£1000/month and a date range of 6 months, the monthly average will be Â£1000.
        However, if the supplied date range is 12 months and there is no data for more than those 6 months, the average will be Â£500/month.

        Note that the number of months are calculated inclusively e.g. `months(2022-01-01, 2022-02-28) = 2` and `months(2022-01-01, 2022-03-01) = 3`.
      required:
        - monthly
      properties:
        monthly:
          allOf:
            - description: average income per month
            - $ref: '#/components/schemas/IncomeAverageOverPeriod'
    IncomeStatistics:
      type: object
      title: Income statistics
      required:
        - average
      properties:
        average:
          $ref: '#/components/schemas/IncomeAverage'
    IncomeResponseV2:
      type: object
      title: Income Finder Response V2
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: object
          title: Income_Finder_Response_Data
          required:
            - transactions
            - statistics
          properties:
            transactions:
              type: array
              title: Income Transactions
              items:
                $ref: '#/components/schemas/IncomeTransactionV2'
            statistics:
              $ref: '#/components/schemas/IncomeStatistics'
        metadata:
          $ref: '#/components/schemas/TransactionsResultsMetadata'
    Benefit:
      title: Benefit
      type: object
      required:
        - type
        - display_name
      properties:
        type:
          type: string
          description: The type of benefit
          example: attendance_allowance
        display_name:
          type: string
          example: Attendance Allowance
          description: The display name of the benefit type
    BenefitsTransactionV1:
      title: Benefit Transactions
      allOf:
        - $ref: '#/components/schemas/BasicTransaction'
        - type: object
          required:
            - benefit
          properties:
            benefit:
              $ref: '#/components/schemas/Benefit'
    BenefitsResponseV1:
      title: Benefits Finder Response
      type: object
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: array
          description: Array of Benefits related transactions
          items:
            $ref: '#/components/schemas/BenefitsTransactionV1'
        metadata:
          $ref: '#/components/schemas/TransactionsResultsMetadata'
    BenefitsTotalsResponseV1:
      title: Benefit Totals
      type: object
      description: Benefits Total income structure
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: array
          items:
            type: object
            required:
              - benefit
              - total_credit
            properties:
              benefit:
                $ref: '#/components/schemas/Benefit'
              total_credit:
                $ref: '#/components/schemas/BudAmount'
        metadata:
          $ref: '#/components/schemas/TransactionsResultsMetadata'
    LoanTransactionV1:
      title: Loan Transaction
      allOf:
        - $ref: '#/components/schemas/BasicTransactionV2'
        - type: object
          properties:
            merchant:
              allOf:
                - type: object
                  nullable: true
                - $ref: '#/components/schemas/MerchantIdV2'
    LoanStatistics:
      type: object
      title: Loan Statistics
      required:
        - total_debit
      properties:
        total_debit:
          allOf:
            - description: Total debit amount of all loan transactions
            - $ref: '#/components/schemas/BudAmount'
    LoansResponseV1:
      title: Loans Finder Response
      type: object
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: object
          title: Loan_Finder_Response_Data
          required:
            - transactions
            - statistics
          properties:
            transactions:
              type: array
              title: Loan Transactions
              items:
                $ref: '#/components/schemas/LoanTransactionV1'
            statistics:
              $ref: '#/components/schemas/LoanStatistics'
        metadata:
          $ref: '#/components/schemas/TransactionsResultsMetadata'
    DebtCollectionTransaction:
      allOf:
        - $ref: '#/components/schemas/BasicTransactionV2'
        - type: object
          title: Debt Collection Transaction
          required:
            - merchant
          properties:
            merchant:
              $ref: '#/components/schemas/MerchantIdV2'
    IncomeRelationStatistics:
      type: object
      title: Income Relations
      description: Comparisons of the returned transactions to the income found over the same period
      required:
        - expense_to_income_ratio
        - total_income
      properties:
        expense_to_income_ratio:
          description: The ratio of total debit amounts of the returned transactions to the total income over the same period, to 3 decimal places.
          type: string
        total_income:
          allOf:
            - description: Total income over the provided period
            - $ref: '#/components/schemas/BudAmount'
    DebtCollectionStatistics:
      type: object
      title: Debt Collection Statistics
      required:
        - total_debit
        - income_relations
      properties:
        total_debit:
          allOf:
            - description: Total debit amount of all debt collection transactions
            - $ref: '#/components/schemas/BudAmount'
        income_relations:
          $ref: '#/components/schemas/IncomeRelationStatistics'
    DebtCollectionResponseV1:
      type: object
      title: Debt Collection Finder Response
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: object
          title: Debt_Collection_Finder_Response_Data
          required:
            - transactions
            - statistics
          properties:
            transactions:
              type: array
              title: Debt Collection Transactions
              items:
                $ref: '#/components/schemas/DebtCollectionTransaction'
            statistics:
              $ref: '#/components/schemas/DebtCollectionStatistics'
        metadata:
          $ref: '#/components/schemas/TransactionsResultsMetadata'
    GetProductsResponseV2:
      title: Retrieve Financial Products V2 Response Strucutre
      type: object
      required:
        - operation_id
        - metadata
      properties:
        operation_id:
          $ref: '#/components/schemas/OperationId'
        data:
          type: array
          items:
            title: Financial_Product
            description: A Financial Product that a customer uses.
            type: object
            required:
              - type
              - merchant
              - amount
              - period
            properties:
              type:
                title: Financial_Product_Type
                description: |
                  A list of the types products and services identified for the given Financial Product. Potential values could be (but not limited to):
                    - `loan`
                    - `bnpl`
                    - `mortgage`
                    - `insurance`
                    - `credit_card`
                    - `private_pension`
                    - `savings_and_investment`
                type: array
                items:
                  type: string
              merchant:
                title: Financial_Product_Merchant
                description: Details of the merchant providing the Financial Product.
                type: object
                required:
                  - id
                  - name
                  - logo
                properties:
                  id:
                    type: string
                    description: A unique ID for the merchant.
                  name:
                    type: string
                    description: The merchant's name in a displayable format.
                  logo:
                    type: string
                    description: The merchant's logo image URL location.
              amount:
                $ref: '#/components/schemas/BudAmount'
              period:
                title: Transaction Period
                description: |
                  The period between each transaction for the given product. Possible values are:
                  - `daily` -  This product is charged once a day.
                  - `weekly` - This product is charged once a week.
                  - `biweekly` - This product is charged once every two weeks.
                  - `monthly` - This product is charged once a monthy.
                  - `quarterly` - This product is charged once a quater (every 3 months).
                  - `six_monthly` - product is charged every six months.
                  - `annually` - This product is charged once a year.
                  - `unknown` - It is unknown how frequently this product is charged.
                type: string
                enum:
                  - daily
                  - weekly
                  - biweekly
                  - monthly
                  - quarterly
                  - six_monthly
                  - annually
                  - unknown
        metadata:
          title: Metadata
          allOf:
            - $ref: '#/components/schemas/BudDateRangeMetadata'
            - type: object
              required:
                - results
              properties:
                results:
                  type: number
                  title: Results count
                  description: Number of products returned.
    Subscription:
      type: object
      required:
        - subscription_type
        - transactions
        - categories
        - period
      properties:
        subscription_type:
          type: string
          description: |
            Type of subscription identified. Potential values are subject to change and may be converted to enums at a future unspecified date.

            | Subscription type           | Description |
            | --------------------------- | ----------- |
            | `unknown`                   | Unknown subscription type |
            | `media_streaming`           | Digital media streaming subscriptions |
            | `newspapers_and_magazines`  | Print media subscriptions |
            | `food_and_drink`            | Grocery and specialty food/drink subscriptions |
            | `technology`                | Technology subscriptions, including software and hardware |
            | `fitness_and_gym`           | Health and fitness subscriptions |
            | `charitable_donations`      | Recurring donations to charity |
        period:
          type: string
          description: To describe the period between each transaction within a subscription. Potential values could be (but are not limited to) `monthly`, `quarterly` and `unknown`, and may be converted to enums at a future unspecified date.
        categories:
          type: object
          description: Categories of the subscription
          required:
            - l1
            - l2
          properties:
            l1:
              type: string
              description: Details on the Level One category associated with the subscription
            l2:
              type: string
              description: Details on the Level Two category associated with the subscription
        merchant:
          type: object
          description: Details surrounding the identified merchant of the transaction (this field will be omitted if a merchant is not detected)
          required:
            - id
            - name
            - logo
          properties:
            id:
              type: string
              description: A unique ID for the identified merchant.
            name:
              type: string
              description: The clean name of the identified merchant.
            logo:
              type: string
              description: The merchant's logo image URL location.
        transactions:
          type: array
          items:
            $ref: '#/components/schemas/BasicTransactionV2'
    GetSubscriptionsResponseV1:
      title: Subscription Products Response
      description: Subscription products and associated transactions for a customer
      type: object
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          type: string
          enum:
            - v1_subscriptions_get
        data:
          type: array
          title: Subscriptions Finder Response Data
          items:
            $ref: '#/components/schemas/Subscription'
        metadata:
          $ref: '#/components/schemas/TransactionsResultsMetadata'
    SavingsGoal:
      title: Savings Goal
      required:
        - id
        - name
        - account_id
        - target_amount
        - target_datetime
        - recurrent_amount
        - saved_amount
        - created_at
      properties:
        id:
          title: ID
          type: string
          description: |
            The ID of the savings goal.

            Example: "81a68821-dca6-4771-80d4-002c7fce412e"
        name:
          title: Name
          type: string
          description: |
            The name of the savings goal.

            Example: `Holiday`
          example: Holiday
        account_id:
          title: Account ID
          type: string
          description: |
            The account id of the account the savings goal is associated with.

            Example: `RxsYshVGded4JeilkXgWKdXA`
          example: RxsYshVGded4JeilkXgWKdXA
        target_amount:
          title: Target Amount
          type: object
          description: |
            The target amount of money to be saved to defining the savings goal.
          required:
            - value
            - currency
          properties:
            value:
              $ref: '#/components/schemas/BudMonetaryValue'
            currency:
              $ref: '#/components/schemas/BudCurrency'
        target_datetime:
          title: Target Datetime
          type: string
          description: |
            The Target Datetime, in the format [RFC-3339](https://www.rfc-editor.org/rfc/rfc3339) to reach the savings goal.

            Examples:
              - `2023-01-17T17:29:51Z`
              - `2023-01-17T17:29:51-08:00`
        recurrent_amount:
          title: Recurrent Amount
          type: object
          description: |
            The amount of money to be saved each month to reach the savings goal.
          required:
            - value
            - currency
          properties:
            value:
              $ref: '#/components/schemas/BudMonetaryValue'
            currency:
              $ref: '#/components/schemas/BudCurrency'
        saved_amount:
          title: Saved Amount
          type: object
          description: |
            The amount of money that has been saved towards the savings goal. This is calculated by summing the amount of all savings goal actions associated with the savings goal.
          required:
            - value
            - currency
          properties:
            value:
              $ref: '#/components/schemas/BudMonetaryValue'
            currency:
              $ref: '#/components/schemas/BudCurrency'
        created_at:
          title: Created At
          type: string
          description: |
            The date and time the savings goal was created in the format [RFC-3339](https://www.rfc-editor.org/rfc/rfc3339).

            Examples:
              - `2023-01-17T17:29:51Z`
              - `2023-01-17T17:29:51-08:00`
    BudResultsMetadata:
      title: Metadata
      type: object
      required:
        - results
      properties:
        results:
          type: integer
          description: |
            The number of results returned in the response.

            Example: 1
          example: 1
    RetrieveSavingsGoalsResponse:
      title: Retrieve Savings Goals Response
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          title: Operation ID
          type: string
          enum:
            - goals_v1_savings_get
        data:
          type: array
          items:
            $ref: '#/components/schemas/SavingsGoal'
        metadata:
          allOf:
            - $ref: '#/components/schemas/BudResultsMetadata'
            - type: object
              properties:
                account_id:
                  type: string
                  description: |
                    The account ID used to filter the results. This will be unset if no account_id was supplied in the request.

                    Example: `RxsYshVGded4JeilkXgWKdXA`
                  example: RxsYshVGded4JeilkXgWKdXA
    CreateSavingsGoalRequest:
      title: Create Savings Goal Request
      required:
        - name
        - account_id
      properties:
        name:
          title: Name
          type: string
          description: |
            The name of the savings goal.

            Example: `Holiday`
          example: Holiday
        account_id:
          title: Account ID
          type: string
          description: |
            The account id of the account the savings goal is associated with.

            Example: `RxsYshVGded4JeilkXgWKdXA`
          example: RxsYshVGded4JeilkXgWKdXA
        target_amount:
          title: Target Amount
          type: object
          description: |
            The target amount of money to be saved to defining the savings goal.

            This field is optional, however if it is not supplied, then `target_datetime` and `recurrent_amount` must be supplied.

            If `target_amount`, `target_datetime` and `recurrent_amount` are all supplied, they will be validated to ensure the goal is achievable under these conditions.
          required:
            - value
            - currency
          properties:
            value:
              $ref: '#/components/schemas/BudMonetaryValue'
            currency:
              $ref: '#/components/schemas/BudCurrency'
        target_datetime:
          title: Target Datetime
          type: string
          description: |
            The Target Datetime, in the format [RFC-3339](https://www.rfc-editor.org/rfc/rfc3339) to reach the savings goal. 

            This field is optional, however if it is not supplied, then `target_amount` and `recurrent_amount` must be supplied.

            If `target_amount`, `target_datetime` and `recurrent_amount` are all supplied, they will be validated to ensure the goal is achievable under these conditions.

            Examples:
              - `2023-01-17T17:29:51Z`
              - `2023-01-17T17:29:51-08:00`
        recurrent_amount:
          title: Recurrent Amount
          type: object
          description: |
            The amount of money to be saved each month to reach the savings goal.

            This field is optional, however if it is not supplied, then `target_amount` and `target_datetime` must be supplied.

            If `target_amount`, `target_datetime` and `recurrent_amount` are all supplied, they will be validated to ensure the goal is achievable under these conditions.
          required:
            - value
            - currency
          properties:
            value:
              $ref: '#/components/schemas/BudMonetaryValue'
            currency:
              $ref: '#/components/schemas/BudCurrency'
    CreateSavingsGoalResponse:
      title: Create Savings Goal Response
      required:
        - operation_id
        - data
      properties:
        operation_id:
          title: Operation ID
          type: string
          enum:
            - goals_v1_savings_post
        data:
          $ref: '#/components/schemas/SavingsGoal'
    UpdateSavingsGoalRequest:
      title: Update Savings Goal Request
      properties:
        name:
          title: Name
          type: string
          description: |
            The name of the savings goal.

            Example: `Holiday`
          example: Holiday
        target_amount:
          title: Target Amount
          type: object
          description: |
            The target amount of money to be saved to defining the savings goal. 

            If this is supplied, then `target_datetime` and/or `recurrent_amount` must also be supplied.
            If `target_amount`, `target_datetime` and `recurrent_amount` are all supplied, they will be validated to ensure the goal is achievable under these conditions.

            The `currency` field is optional as it will default to the existing currency of the goal; however, if it is supplied then it must be the same as the existing currency of the goal.
          required:
            - value
          properties:
            value:
              $ref: '#/components/schemas/BudMonetaryValue'
            currency:
              $ref: '#/components/schemas/BudCurrency'
        target_datetime:
          title: Target Datetime
          type: string
          description: |
            The Target Datetime, in the format [RFC-3339](https://www.rfc-editor.org/rfc/rfc3339) to reach the savings goal. 

            If this is supplied, then `target_amount` and/or `recurrent_amount` must also be supplied.
            If `target_amount`, `target_datetime` and `recurrent_amount` are all supplied, they will be validated to ensure the goal is achievable under these conditions.

            Examples:
              - `2023-01-17T17:29:51Z`
              - `2023-01-17T17:29:51-08:00`
        recurrent_amount:
          title: Recurrent Amount
          type: object
          description: |
            The amount of money to be saved each month to reach the savings goal.

            If this is supplied, then `target_amount` and/or `target_datetime` must also be supplied.
            If `target_amount`, `target_datetime` and `recurrent_amount` are all supplied, they will be validated to ensure the goal is achievable under these conditions.

            The `currency` field is optional as it will default to the existing currency of the goal; however, if it is supplied then it must be the same as the existing currency of the goal.
          required:
            - value
          properties:
            value:
              $ref: '#/components/schemas/BudMonetaryValue'
            currency:
              $ref: '#/components/schemas/BudCurrency'
    UpdateSavingsGoalResponse:
      title: Update Savings Goal Response
      required:
        - operation_id
        - data
      properties:
        operation_id:
          title: Operation ID
          type: string
          enum:
            - goals_v1_savings_patch
        data:
          $ref: '#/components/schemas/SavingsGoal'
    SavingsGoalAction:
      title: Savings Goal Action
      required:
        - id
        - amount
        - credit_debit_indicator
        - created_at
      properties:
        id:
          title: ID
          type: string
          description: |
            The ID of the savings goal action.

            Example: "81a68821-dca6-4771-80d4-002c7fce412e"
        amount:
          title: Amount
          type: object
          description: |
            The amount of money saved towards the savings goal.
          required:
            - value
            - currency
          properties:
            value:
              $ref: '#/components/schemas/BudMonetaryValue'
            currency:
              $ref: '#/components/schemas/BudCurrency'
        credit_debit_indicator:
          title: Credit Debit Indicator
          type: string
          enum:
            - credit
            - debit
          description: |
            The credit/debit indicator of the amount. This indicates whether the amount has been added to or subtracted from the savings goal.

            Example: `credit`
          example: credit
        created_at:
          title: Created At
          type: string
          description: |
            The date and time the savings goal action was created in the format [RFC-3339](https://www.rfc-editor.org/rfc/rfc3339).

            Examples:
              - `2023-01-17T17:29:51Z`
              - `2023-01-17T17:29:51-08:00`
    BudNextPageTokenMetadata:
      title: Next Page Token
      type: object
      properties:
        next_page_token:
          type: string
          description: |
            The token to use to fetch the next page of results. This is only set if there are more results to fetch.
      example:
        next_page_token: b21055a9a9f46fc794a2e6855c65abd7e317181039fc6930daabac5822911d14a84895ecd947e2b5abdcb22e4fcc2c594e1f661dc63e34b9ba88760724047990896f7581a0786c2605dce19c6a9d80d1044f963b74fea0a929c0a4465a6e67378a74dce38ec5e26ae4cc804b62fd666d5df4cf2e7f524bd99e5523bc5d471768065c036dc0c73122705b280817fbbd7d9aa31f271d72cd3877d999dcb9a5b1c0be0c05
    RetrieveSavingsGoalActionsResponse:
      title: Retrieve Savings Goal Actions Response
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          title: Operation ID
          type: string
          enum:
            - goals_v1_savings_actions_get
        data:
          type: array
          items:
            $ref: '#/components/schemas/SavingsGoalAction'
        metadata:
          allOf:
            - $ref: '#/components/schemas/BudResultsMetadata'
            - type: object
              properties:
                goal_id:
                  title: Goal ID
                  type: string
                  description: |
                    The ID of the savings goal the actions were retrieved for.

                    Example: "81a68821-dca6-4771-80d4-002c7fce412e"
                  example: 81a68821-dca6-4771-80d4-002c7fce412e
            - $ref: '#/components/schemas/BudNextPageTokenMetadata'
    CreateSavingsGoalActionRequest:
      title: Create Savings Goal Action Request
      required:
        - amount
        - credit_debit_indicator
      properties:
        amount:
          title: Amount
          type: object
          description: |
            The amount of money being saved towards the savings goal.
          required:
            - value
            - currency
          properties:
            value:
              $ref: '#/components/schemas/BudMonetaryValue'
            currency:
              $ref: '#/components/schemas/BudCurrency'
        credit_debit_indicator:
          title: Credit Debit Indicator
          type: string
          enum:
            - credit
            - debit
          description: |
            The credit/debit indicator of the amount. This indicates whether the amount is has been added to or subtracted from the savings goal.

            Example: `credit`
          example: credit
    CreateSavingsGoalActionResponse:
      title: Create Savings Goal Action Response
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          title: Operation ID
          type: string
          enum:
            - goals_v1_savings_actions_post
        data:
          $ref: '#/components/schemas/SavingsGoalAction'
        metadata:
          title: Metadata
          type: object
          required:
            - goal_id
          properties:
            goal_id:
              title: Goal ID
              type: string
              description: |
                The ID of the savings goal the action was created for.

                Example: "81a68821-dca6-4771-80d4-002c7fce412e"
    UpdateSavingsGoalActionRequest:
      title: Update Savings Goal Action Request
      properties:
        amount:
          title: Amount
          type: object
          description: |
            The amount of money being saved towards the savings goal.

            The `currency` field is optional as it will default to the existing currency of the goal action; however, if it is supplied then it must be the same as the existing currency of the goal action.
          required:
            - value
            - currency
          properties:
            value:
              $ref: '#/components/schemas/BudMonetaryValue'
            currency:
              $ref: '#/components/schemas/BudCurrency'
        credit_debit_indicator:
          title: Credit Debit Indicator
          type: string
          enum:
            - credit
            - debit
          description: |
            The credit/debit indicator of the amount. This indicates whether the amount has been added to or subtracted from the savings goal.

            Example: `credit`
          example: credit
    UpdateSavingsGoalActionResponse:
      title: Update Savings Goal Action Response
      required:
        - operation_id
        - data
      properties:
        operation_id:
          title: Operation ID
          type: string
          enum:
            - goals_v1_savings_actions_patch
        data:
          $ref: '#/components/schemas/SavingsGoalAction'
        metadata:
          title: Metadata
          type: object
          properties:
            goal_id:
              title: Goal ID
              type: string
              description: |
                The ID of the savings goal the actions were retrieved for.

                Example: "81a68821-dca6-4771-80d4-002c7fce412e"
              example: 81a68821-dca6-4771-80d4-002c7fce412e
    BaseSpendingBudget:
      title: Spending Budget
      type: object
      required:
        - name
        - amount
        - recurrency
      properties:
        name:
          title: Name
          type: string
          description: |
            The name of the spending budget.

            Example: `Travel`
          example: Travel
        amount:
          title: Amount
          type: object
          description: |
            The amount of money to be budgeted for. Must be greater than 0.
          required:
            - value
            - currency
          properties:
            value:
              $ref: '#/components/schemas/BudMonetaryValue'
            currency:
              $ref: '#/components/schemas/BudCurrency'
        recurrency:
          title: Recurrency
          type: object
          description: |
            Whether and/or how often the budget recurs.

            The `starting_day` is only required for budgets with a recurring period e.g. `monthly`

            New periods may be added without a breaking change notice.
          required:
            - period
          properties:
            period:
              title: Period
              type: string
              description: |
                The period at which a budget recurs (if at all).

                Currently supported options are:
                - `one-off`
                - `monthly`

                New periods may be added without a breaking change notice.
            starting_day:
              title: Starting Day
              type: integer
              description: |
                The day of which the budget period starts. Not required if a budget is `one-off`.

                Must be between 1 and 28 for `monthly` budgets.
        account_id:
          title: Account ID
          type: string
          description: |
            The account id of the account the spending budget is associated with. 

            Only transactions from this account will be included in budget calculations.

            Example: `RxsYshVGded4JeilkXgWKdXA`
          example: RxsYshVGded4JeilkXgWKdXA
        include:
          title: Include
          type: object
          description: |
            The inclusion criteria for transactions to be included in the budget.
          properties:
            categories:
              title: Categories
              description: |
                The categories of transactions to be included in the budget. 

                If L2 categories are specified, they must be grouped underneath their corresponding L1 category.

                All categories specified must be compatible with the category taxonomy used for that customer.
              type: array
              items:
                required:
                  - l1
                properties:
                  l1:
                    title: L1
                    type: string
                    description: |
                      L1 category to include in the filter. Must be specified if using category filtering.
                  l2:
                    title: L2
                    type: array
                    description: |
                      L2 categories to include in the filter. Must all correspond to the parent L1 category specified.
                    items:
                      type: string
            merchants:
              title: Merchants
              type: object
              description: |
                The merchants of transactions to be included in the budget.
              properties:
                slugs:
                  title: Slugs
                  type: array
                  description: |
                    The slugs of merchants to be included. E.g. `netflix` or `uber`
                  items:
                    type: string
    SpendingBudget:
      allOf:
        - $ref: '#/components/schemas/BaseSpendingBudget'
        - type: object
          required:
            - id
            - name
            - amount
            - recurrency
            - spent
            - created_at
          properties:
            id:
              title: ID
              type: string
              description: |
                The ID of the spending budget.

                Example: "81a68821-dca6-4771-80d4-002c7fce412e"
            spent:
              title: Spent
              type: object
              description: |
                The amount of money spent from the budget for the given time period.
              required:
                - from
                - to
                - amount
                - ratio
              properties:
                from:
                  title: From
                  type: string
                  description: |
                    The date from which the budgeting period began in the format [RFC-3339](https://www.ietf.org/rfc/rfc3339.txt).

                    Example: `2023-10-01T00:00:00Z`
                to:
                  title: From
                  type: string
                  description: |
                    The date to which the budgeting period ends in the format [RFC-3339](https://www.ietf.org/rfc/rfc3339.txt).

                    Example: `2023-10-31T00:00:00Z`
                amount:
                  title: Amount
                  type: object
                  description: |
                    The amount of money spent from the budget.
                  required:
                    - value
                    - currency
                  properties:
                    value:
                      $ref: '#/components/schemas/BudMonetaryValue'
                    currency:
                      $ref: '#/components/schemas/BudCurrency'
                ratio:
                  title: Ratio
                  type: string
                  description: |
                    The ratio of spent money to the total budget amount.
            created_at:
              title: Created At
              type: string
              description: |
                The date and time the budget was created in the format [RFC-3339](https://www.ietf.org/rfc/rfc3339.txt).

                Example: `2023-10-17T00:00:00Z`
            _links:
              title: _links
              type: object
              description: |
                Useful follow up links
              properties:
                transactions:
                  title: Transactions Link
                  type: string
                  description: |
                    Link to follow to get transactions included in the budget.
    RetrieveSpendingBudgetsResponse:
      title: Retrieve Spending Budgets Response
      type: object
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          title: Operation ID
          type: string
          enum:
            - goals_v1_spending_budgets_get
        data:
          type: array
          items:
            $ref: '#/components/schemas/SpendingBudget'
        metadata:
          allOf:
            - $ref: '#/components/schemas/BudResultsMetadata'
            - type: object
              properties:
                account_id:
                  title: Account ID
                  type: string
                  description: |
                    The ID of the account used for filtering in the request.

                    Example: "RxsYshVGded4JeilkXgWKdXA"
                  example: RxsYshVGded4JeilkXgWKdXA
    CreateSpendingBudgetRequest:
      title: Create Spending Budget Request
      allOf:
        - $ref: '#/components/schemas/BaseSpendingBudget'
    CreateSpendingBudgetResponse:
      title: Create Spending Budget Response
      type: object
      required:
        - operation_id
        - data
      properties:
        operation_id:
          title: Operation ID
          type: string
          enum:
            - goals_v1_spending_budgets_post
        data:
          $ref: '#/components/schemas/SpendingBudget'
    PatchSpendingBudget:
      title: Patch Spending Budget
      type: object
      properties:
        name:
          title: Name
          type: string
          description: |
            The name of the spending budget.

            Example: `Travel`
          example: Travel
        amount:
          title: Amount
          type: object
          description: |
            The amount of money to be budgeted for. Must be greater than 0. 

            Note: The Currency of a spending budget cannot be updated.
          required:
            - value
          properties:
            value:
              $ref: '#/components/schemas/BudMonetaryValue'
        recurrency:
          title: Recurrency
          type: object
          description: |
            Whether and/or how often the budget recurs.

            The `starting_day` is only required for budgets with a recurring period e.g. `monthly`

            New periods may be added without a breaking change notice.
          required:
            - period
          properties:
            period:
              title: Period
              type: string
              description: |
                The period at which a budget recurs (if at all).

                Currently supported options are:
                - `one-off`
                - `monthly`

                New periods may be added without a breaking change notice.
            starting_day:
              title: Starting Day
              type: integer
              description: |
                The day of which the budget period starts. Not required if a budget is `one-off`.

                Must be between 1 and 28 for `monthly` budgets.
        account_id:
          title: Account ID
          type: string
          description: |
            The account id of the account the spending budget is associated with. 

            Only transactions from this account will be included in budget calculations.

            Example: `RxsYshVGded4JeilkXgWKdXA`
          example: RxsYshVGded4JeilkXgWKdXA
        include:
          title: Include
          type: object
          description: |
            The inclusion criteria for transactions to be included in the budget.
          properties:
            categories:
              title: Categories
              description: |
                The categories of transactions to be included in the budget. 

                If L2 categories are specified, they must be grouped underneath their corresponding L1 category.

                All categories specified must be compatible with the category taxonomy used for that customer.
              type: array
              items:
                required:
                  - l1
                properties:
                  l1:
                    title: L1
                    type: string
                    description: |
                      L1 category to include in the filter. Must be specified if using category filtering.
                  l2:
                    title: L2
                    type: array
                    description: |
                      L2 categories to include in the filter. Must all correspond to the parent L1 category specified.
                    items:
                      type: string
            merchants:
              title: Merchants
              type: object
              description: |
                The merchants of transactions to be included in the budget.
              properties:
                slugs:
                  title: Slugs
                  type: array
                  description: |
                    The slugs of merchants to be included. E.g. `netflix` or `uber`
                  items:
                    type: string
    UpdateSpendingBudgetResponse:
      title: Update Spending Budget Response
      type: object
      required:
        - operation_id
        - data
      properties:
        operation_id:
          title: Operation ID
          type: string
          enum:
            - goals_v1_spending_budgets_patch
        data:
          $ref: '#/components/schemas/SpendingBudget'
    goals-components_schemas-Categories:
      title: Categories
      type: object
      description: |
        Categories enrichment associated with a Transaction, as generated by Bud's artificial intelligence models. 
        Currently two levels of category are supported, with `l1` being a coarse-grained category level and `l2` being
        more refined.
      required:
        - l1
        - l2
      properties:
        l1:
          $ref: '#/components/schemas/Category'
          description: Level 1 Category
        l2:
          $ref: '#/components/schemas/Category'
          description: Level 2 Category
    goals-components_schemas-Merchant:
      title: Merchant
      type: object
      description: |
        Merchant enrichment associated with a Transaction, as generated using a combination of Bud's artificial 
        intelligence models and database of known merchants.
      required:
        - id
        - slug
        - display_name
      properties:
        id:
          type: string
          description: UUID corresponding to the merchant, if available. Subject to version control.
        slug:
          type: string
          description: Unique human readable identifier of the merchant. Not subject to version control.
        display_name:
          type: string
          description: UI friendly display name for the merchant.
        logo:
          type: string
          description: URL supplying merchant logo, if available.
    schemas-Enrichments:
      title: Enrichments
      type: object
      description: Contextual enrichments associated with a Transaction
      properties:
        categories:
          $ref: '#/components/schemas/goals-components_schemas-Categories'
        merchant:
          $ref: '#/components/schemas/goals-components_schemas-Merchant'
    schemas-Transaction:
      title: Transaction
      type: object
      description: A financial transaction
      required:
        - transaction_id
        - account_id
        - description
        - amount
        - credit_debit_indicator
        - status
        - date_time
      properties:
        transaction_id:
          type: string
          description: Unique identifier for the transaction. May be mutable depending on original ingestion source.
        account_id:
          type: string
          description: Identifier for the account associated with the transaction.
        provider:
          type: string
          description: Name of the transaction source provider. Optional as it may not have been supplied when using first party data.
        description:
          type: string
          description: Description of the transaction.
        credit_debit_indicator:
          type: string
          description: Credit/Debit Indicator
          enum:
            - credit
            - debit
        status:
          type: string
          description: Status of the transaction. Defaults to booked.
          enum:
            - booked
            - pending
        amount:
          $ref: '#/components/schemas/BudAmount'
        date_time:
          type: string
          description: Date of the transaction compliant with RFC3339.
        enrichments:
          $ref: '#/components/schemas/schemas-Enrichments'
    BudPageSizeMetadata:
      title: Page Size
      type: integer
      description: |
        The size of the page requested.

        Example: `100`
      example: 100
    RetrieveSpendingBudgetTransactionsResponse:
      title: Retrieve Spending Budget Transactions Response
      type: object
      required:
        - operation_id
        - data
        - metadata
      properties:
        operation_id:
          title: Operation ID
          type: string
          enum:
            - goals_v1_spending_budget_transactions_get
        data:
          type: array
          items:
            $ref: '#/components/schemas/schemas-Transaction'
        metadata:
          allOf:
            - $ref: '#/components/schemas/BudResultsMetadata'
            - type: object
              properties:
                budget_id:
                  title: Budget ID
                  type: string
                  description: |
                    The ID of the spending budget the transactions were retrieved for.

                    Example: "81a68821-dca6-4771-80d4-002c7fce412e"
                  example: 81a68821-dca6-4771-80d4-002c7fce412e
                page_size:
                  $ref: '#/components/schemas/BudPageSizeMetadata'
            - $ref: '#/components/schemas/BudNextPageTokenMetadata'
    DateTimeISO8601:
      title: Date/Time (ISO 8601)
      type: string
      description: ISO Date Format
      example: '2022-03-05T13:34:33Z'
    InsightLinks:
      title: Links
      description: URLs for resources related to this insight
      type: object
      required:
        - details
      properties:
        details:
          type: string
          description: An endpoint, including options, to make a GET request to in order to retrieve insight-specific details for this insight, and the transaction and account data that caused it to trigger.
    CommonInsightResponse:
      title: Common Insight Response
      description: Common parts of an identified insight, shared across all identified insights
      type: object
      required:
        - id
        - type
        - _links
      properties:
        id:
          type: string
          description: An ID for this returned insight. Will be unique within the response, and consistent until financial data is refreshed. For a customised insights request, this will only be consistent across requests specifying the same configuration.
        type:
          type: string
          description: The type of insight triggered. Specifies the meaning of the insight, and the format of the additional_info object.
          example: gambling_threshold
        _links:
          $ref: '#/components/schemas/InsightLinks'
    CreditDebitIndicator:
      title: Credit Debit Indicator
      type: string
      description: Whether the associated amount is a credit (positive) or debit (negative) amount.
      enum:
        - credit
        - debit
    AmountWithCDI:
      title: Credit Debit Indicator
      type: object
      description: An amount of money, in a specific currency with a credit/debit indicator.
      required:
        - currency
        - value
        - credit_debit_indicator
      properties:
        currency:
          $ref: '#/components/schemas/BudCurrency'
        value:
          $ref: '#/components/schemas/BudMonetaryValue'
        credit_debit_indicator:
          $ref: '#/components/schemas/CreditDebitIndicator'
    BalancesInsightResponse:
      title: Balances Insight Response
      description: Balances insight identified from the customer's financial data
      allOf:
        - $ref: '#/components/schemas/CommonInsightResponse'
        - type: object
          required:
            - account_id
            - balance
            - threshold
          properties:
            account_id:
              type: string
              description: The account ID whose current, projected, or past balance information this insight relates to.
            balance:
              $ref: '#/components/schemas/AmountWithCDI'
            threshold:
              $ref: '#/components/schemas/AmountWithCDI'
    InsightOption:
      title: Insight Option
      type: object
      description: An option used to configure the returned insights.
      required:
        - insight_type
        - option
        - value
      properties:
        insight_type:
          type: string
          description: The insight this option is applied to
        option:
          type: string
          description: The name of the option
        value:
          type: string
          description: The value of the option
    BalancesInsightsResponse:
      title: Balances Insights Response
      description: Balances insights response, providing identified balances insights for this customer.
      type: object
      required:
        - data
        - operation_id
        - metadata
      properties:
        operation_id:
          type: string
          enum:
            - insights_v1_actionable_balances_get
        data:
          type: object
          required:
            - insights
          properties:
            insights:
              type: array
              items:
                $ref: '#/components/schemas/BalancesInsightResponse'
        metadata:
          type: object
          required:
            - results
            - from
            - to
            - options
          properties:
            results:
              type: integer
              description: Number of insights returned in the response.
            from:
              $ref: '#/components/schemas/DateTimeISO8601'
            to:
              $ref: '#/components/schemas/DateTimeISO8601'
            options:
              type: array
              items:
                $ref: '#/components/schemas/InsightOption'
    schemas-Regularity:
      title: Regularity
      type: object
      description: |
        Regularity enrichment associated with a Transaction, as generated by Bud's artificial intelligence models.  Transactions that are similar and have a known frequency will all have the same regularity enrichment.
      properties:
        frequency:
          type: string
          description: Detected frequency of the Transaction.
          enum:
            - unknown
            - daily
            - weekly
            - biweekly
            - monthly
            - quarterly
            - six_monthly
            - annually
        predicted_date_times:
          type: array
          description: Expected date times for the Transaction to repeat.
          items:
            type: string
        group_label:
          type: string
          description: Unique label applied to multiple transactions in the same group.
    components-schemas-Enrichments:
      title: Enrichments
      type: object
      description: Contextual enrichments associated with a Transaction
      properties:
        categories:
          $ref: '#/components/schemas/schemas-Categories'
        merchant:
          $ref: '#/components/schemas/schemas-Merchant'
        processor:
          $ref: '#/components/schemas/schemas-Processor'
        regularity:
          $ref: '#/components/schemas/schemas-Regularity'
        location:
          $ref: '#/components/schemas/schemas-Location'
        transaction_types:
          type: array
          description: Transaction types associated with the transaction
          items:
            type: string
        names:
          type: array
          description: Names that were detected in the transaction description
          items:
            type: string
    components-schemas-Transaction:
      title: Transaction
      type: object
      description: A financial transaction
      required:
        - transaction_id
        - account_id
        - description
        - amount
        - credit_debit_indicator
        - status
        - date_time
      properties:
        transaction_id:
          type: string
          description: Unique identifier for the transaction. May be mutable depending on original ingestion source.
        account_id:
          type: string
          description: Identifier for the account associated with the transaction.
        provider:
          type: string
          description: Name of the transaction source provider. Optional as it may not have been supplied when using first party data.
        description:
          type: string
          description: Description of the transaction.
        credit_debit_indicator:
          type: string
          description: Credit/Debit Indicator
          enum:
            - credit
            - debit
        status:
          type: string
          description: Status of the transaction. Defaults to booked.
          enum:
            - booked
            - pending
        amount:
          $ref: '#/components/schemas/BudAmount'
        date_time:
          type: string
          description: Date that the transaction occured compliant with RFC3339.
        posted_date_time:
          type: string
          description: Date the assets involved in the transaction transferred compliant with RFC3339. For credits this is the date that the asset becomes available, for debits this is the date that the asset ceased to be available
        enrichments:
          $ref: '#/components/schemas/components-schemas-Enrichments'
        merchant_category_code:
          type: string
          description: Merchant category code conforming to ISO 18245, related to the type of services or goods the merchant provides for the transaction.
        tags:
          type: array
          description: |
            A list of potential tags associated with the transaction after contextual enrichment, which can be used for filtering.

            Region and client specific.

            | Value                   | Description                                               |
            |:------------------------|:----------------------------------------------------------|
            | `benefit`               | A government/non-profit benefit transaction               |
            | `debt-collection`       | A transaction associated with a known debt-collector      |
            | `loan`                  | A transaction associated with a loan                      |
            | `income`                | A transaction associated with income                      |
            | `pending`               | A transaction which has not been booked                   |
            | `regular-transaction`   | A transaction predicted to occur with a regular frequency |
            | `subscription`          | A transaction associated with a subscription service      |
          items:
            type: string
    InsightCausedBy:
      title: Caused By
      description: The financial data that resulted in this insight being triggered, to which it can be attributed.
      type: object
      required:
        - transactions
        - accounts
      properties:
        accounts:
          type: array
          description: Accounts in the Bud Accounts V2 format that triggered the insight, for insights based on account and balance data. If there are no specific relevant accounts, this will be an empty list.
          items:
            $ref: '#/components/schemas/AccountV2'
        transactions:
          type: array
          description: |-
            Transactions in the Bud Transactions V2 format that triggered the insight, for insights based on transaction data. If there are no specific relevant transactions, this will be an empty list.
            For clients making use of the deprecated client taxonomy support, the categories in this response will be set to the client categories.
          items:
            $ref: '#/components/schemas/components-schemas-Transaction'
    CommonInsightDataResponse:
      title: Common Insight Details Response
      description: Common parts of the insight details response, shared by all insight types
      type: object
      required:
        - id
        - type
        - caused_by
        - details
      properties:
        id:
          type: string
          description: An ID for this returned insight. Will be unique within the response, and consistent until financial data is refreshed. For a customised insights request, this will only be consistent across requests specifying the same configuration.
        type:
          type: string
          description: The type of insight triggered. Specifies the meaning of the insight, and the format of the additional_info object.
          example: late_income
        caused_by:
          $ref: '#/components/schemas/InsightCausedBy'
        details:
          type: object
          description: Additional data specific to the triggered insight type.
          additionalProperties: true
    CannotCoverBillsInsightDetails:
      title: Cannot Cover Bills Insight Details
      description: Details for a 'cannot cover bills' insight
      type: object
      properties:
        expected_debit:
          $ref: '#/components/schemas/BudAmount'
        expected_credit:
          $ref: '#/components/schemas/BudAmount'
        date_time:
          $ref: '#/components/schemas/DateTimeISO8601'
        current_balance:
          $ref: '#/components/schemas/BudAmount'
    CannotCoverBillsInsightDataResponse:
      title: Cannot Cover Bills Insight Details Response
      description: Details response for a 'cannot cover bills' insight
      allOf:
        - $ref: '#/components/schemas/CommonInsightDataResponse'
        - type: object
          properties:
            type:
              type: string
              enum:
                - cannot_cover_bills
            details:
              $ref: '#/components/schemas/CannotCoverBillsInsightDetails'
    CloseToCreditLimitInsightDetails:
      title: Close To Credit Limit Insight Details
      description: Details for a 'close to credit limit' insight
      type: object
      properties:
        percentage_utilisation:
          type: string
          description: Percentage (to 2 decimal places) of the credit limit that is currently being used.
    CloseToCreditLimitInsightDataResponse:
      title: Close To Credit Limit Insight Details Response
      description: Details response for a 'close to credit limit' insight
      allOf:
        - $ref: '#/components/schemas/CommonInsightDataResponse'
        - type: object
          properties:
            type:
              type: string
              enum:
                - close_to_credit_limit
            details:
              $ref: '#/components/schemas/CloseToCreditLimitInsightDetails'
    InOverdraftInsightDataResponse:
      title: In Overdraft Insight Details Response
      description: Details response for an 'in overdraft' insight
      allOf:
        - $ref: '#/components/schemas/CommonInsightDataResponse'
        - type: object
          properties:
            type:
              type: string
              enum:
                - in_overdraft
            details:
              type: object
              additionalProperties: false
              description: Always empty for this insight type.
    LowBalanceInsightDataResponse:
      title: Low Balance Insight Details Response
      description: Details response for a low balance insight
      allOf:
        - $ref: '#/components/schemas/CommonInsightDataResponse'
        - type: object
          properties:
            type:
              type: string
              enum:
                - low_balance
            details:
              type: object
              additionalProperties: false
              description: Always empty for this insight type.
    BalancesInsightsDataResponse:
      title: Balances Insight Details Response
      description: Details response for a balances insight
      type: object
      required:
        - data
        - operation_id
        - metadata
      properties:
        operation_id:
          type: string
          enum:
            - insights_v1_actionable_balances_details_get
        data:
          oneOf:
            - $ref: '#/components/schemas/CannotCoverBillsInsightDataResponse'
            - $ref: '#/components/schemas/CloseToCreditLimitInsightDataResponse'
            - $ref: '#/components/schemas/InOverdraftInsightDataResponse'
            - $ref: '#/components/schemas/LowBalanceInsightDataResponse'
        metadata:
          type: object
          required:
            - from
            - to
            - options
          properties:
            from:
              $ref: '#/components/schemas/DateTimeISO8601'
            to:
              $ref: '#/components/schemas/DateTimeISO8601'
            options:
              type: array
              items:
                $ref: '#/components/schemas/InsightOption'
    IncomeInsightResponse:
      title: Income Insight Response
      description: Income insight identified from the customer's financial data
      allOf:
        - $ref: '#/components/schemas/CommonInsightResponse'
        - type: object
          required:
            - transactions
          properties:
            transactions:
              type: array
              description: The transaction or transactions that most immediately triggered the insight, in our Transactions V2 format.
              items:
                $ref: '#/components/schemas/components-schemas-Transaction'
    TransactionTotals:
      title: Transaction Totals
      description: Total income and expenses for the customer across the period checked for insights
      type: object
      required:
        - income
        - expenditure
      properties:
        income:
          type: array
          description: The total income for the period, in every currency that had an insight trigger within the period.
          items:
            $ref: '#/components/schemas/BudAmount'
        expenditure:
          type: array
          description: The total expenses for the period, in every currency that had an insight trigger within the period.
          items:
            $ref: '#/components/schemas/BudAmount'
    IncomeInsightsResponse:
      title: Income Insights Response
      description: Income insights response, providing identified income insights for this customer.
      type: object
      required:
        - data
        - operation_id
        - metadata
      properties:
        operation_id:
          type: string
          enum:
            - insights_v1_actionable_income_get
        data:
          type: object
          required:
            - insights
            - totals
          properties:
            insights:
              type: array
              items:
                $ref: '#/components/schemas/IncomeInsightResponse'
            totals:
              $ref: '#/components/schemas/TransactionTotals'
        metadata:
          type: object
          required:
            - results
            - from
            - to
            - options
          properties:
            results:
              type: integer
              description: Number of insights returned in the response.
            from:
              $ref: '#/components/schemas/DateTimeISO8601'
            to:
              $ref: '#/components/schemas/DateTimeISO8601'
            options:
              type: array
              items:
                $ref: '#/components/schemas/InsightOption'
    GamblingIncomeInsightDetails:
      title: Gambling Income Insight Details
      description: Details for a 'gambling income' insight
      type: object
      properties:
        total:
          $ref: '#/components/schemas/BudAmount'
    GamblingIncomeInsightDataResponse:
      title: Gambling Income Insight Details Response
      description: Details response for a 'gambling income' insight
      allOf:
        - $ref: '#/components/schemas/CommonInsightDataResponse'
        - type: object
          properties:
            type:
              type: string
              enum:
                - gambling_income
            details:
              $ref: '#/components/schemas/GamblingIncomeInsightDetails'
    LateIncomeInsightDetails:
      title: Late Income Insight Details
      description: Details for a 'late income' insight
      type: object
      properties:
        days_late:
          type: number
          description: Number of days since the predicted transaction was expected to occur.
        expected_date_time:
          $ref: '#/components/schemas/DateTimeISO8601'
    LateIncomeInsightDataResponse:
      title: Late Income Insight Details Response
      description: Details response for a 'late income' insight
      allOf:
        - $ref: '#/components/schemas/CommonInsightDataResponse'
        - type: object
          properties:
            type:
              type: string
              enum:
                - late_income
            details:
              $ref: '#/components/schemas/LateIncomeInsightDetails'
    PensionIncomeInsightDetails:
      title: Pension Income Insight Details
      description: Details for a 'pension income' insight
      type: object
      properties:
        total:
          $ref: '#/components/schemas/BudAmount'
    PensionIncomeInsightDataResponse:
      title: Pension Income Insight Details Response
      description: Details response for a 'pension income' insight
      allOf:
        - $ref: '#/components/schemas/CommonInsightDataResponse'
        - type: object
          properties:
            type:
              type: string
              enum:
                - pension_income
            details:
              $ref: '#/components/schemas/PensionIncomeInsightDetails'
    RegularIncomeChangedInsightDetails:
      title: Regular Income Changed Insight Details
      description: Details for a 'regular income changed' insight
      type: object
      properties:
        new_amount:
          $ref: '#/components/schemas/BudAmount'
        absolute_change:
          $ref: '#/components/schemas/BudMonetaryValue'
        percentage_change:
          $ref: '#/components/schemas/BudMonetaryValue'
    RegularIncomeChangedInsightDataResponse:
      title: Regular Income Changed Insight Details Response
      description: Details response for a 'regular income changed' insight
      allOf:
        - $ref: '#/components/schemas/CommonInsightDataResponse'
        - type: object
          properties:
            type:
              type: string
              enum:
                - regular_income_changed
            details:
              $ref: '#/components/schemas/RegularIncomeChangedInsightDetails'
    IncomeInsightsDataResponse:
      title: Income Insight Details Response
      description: Details response for an income insight
      type: object
      required:
        - data
        - operation_id
        - metadata
      properties:
        operation_id:
          type: string
          enum:
            - insights_v1_actionable_income_details_get
        data:
          oneOf:
            - $ref: '#/components/schemas/GamblingIncomeInsightDataResponse'
            - $ref: '#/components/schemas/LateIncomeInsightDataResponse'
            - $ref: '#/components/schemas/PensionIncomeInsightDataResponse'
            - $ref: '#/components/schemas/RegularIncomeChangedInsightDataResponse'
        metadata:
          type: object
          required:
            - from
            - to
            - options
          properties:
            from:
              $ref: '#/components/schemas/DateTimeISO8601'
            to:
              $ref: '#/components/schemas/DateTimeISO8601'
            options:
              type: array
              items:
                $ref: '#/components/schemas/InsightOption'
    SpendingInsightResponse:
      title: Spending Insight Response
      description: Spending insight identified from the customer's financial data
      allOf:
        - $ref: '#/components/schemas/CommonInsightResponse'
        - type: object
          required:
            - transactions
          properties:
            transactions:
              type: array
              description: The transaction or transactions that most immediately triggered the insight, in our Transactions V2 format.
              items:
                $ref: '#/components/schemas/components-schemas-Transaction'
    SpendingInsightsResponse:
      title: Spending Insights Response
      description: Spending insights response, providing identified balances insights for this customer.
      type: object
      required:
        - data
        - operation_id
        - metadata
      properties:
        operation_id:
          type: string
          enum:
            - insights_v1_actionable_spending_get
        data:
          type: object
          required:
            - insights
            - totals
          properties:
            insights:
              type: array
              items:
                $ref: '#/components/schemas/SpendingInsightResponse'
            totals:
              $ref: '#/components/schemas/TransactionTotals'
        metadata:
          type: object
          required:
            - results
            - from
            - to
            - options
          properties:
            results:
              type: integer
              description: Number of insights returned in the response.
            from:
              $ref: '#/components/schemas/DateTimeISO8601'
            to:
              $ref: '#/components/schemas/DateTimeISO8601'
            options:
              type: array
              items:
                $ref: '#/components/schemas/InsightOption'
    LatePaymentInsightDetails:
      title: Late Payment Insight Details
      description: Details for a 'late payment' insight
      type: object
      properties:
        days_late:
          type: number
          description: Number of days since the predicted transaction was expected to occur.
        expected_date_time:
          $ref: '#/components/schemas/DateTimeISO8601'
    LatePaymentInsightDataResponse:
      title: Late Payment Insight Details Response
      description: Details response for a 'late payment' insight
      allOf:
        - $ref: '#/components/schemas/CommonInsightDataResponse'
        - type: object
          properties:
            type:
              type: string
              enum:
                - late_payment
            details:
              $ref: '#/components/schemas/LatePaymentInsightDetails'
    NewInsuranceExpenseInsightDataResponse:
      title: New Insurance Expense Insight Details Response
      description: Details response for a 'new insurance expense' insight
      allOf:
        - $ref: '#/components/schemas/CommonInsightDataResponse'
        - type: object
          properties:
            type:
              type: string
              enum:
                - new_insurance_expense
            details:
              type: object
              additionalProperties: false
              description: Always empty for this insight type.
    RegularPaymentChangedInsightDetails:
      title: Regular Payment Changed Insight Details
      description: Details for a 'regular payment changed' insight
      type: object
      properties:
        new_amount:
          $ref: '#/components/schemas/BudAmount'
        absolute_change:
          $ref: '#/components/schemas/BudMonetaryValue'
        percentage_change:
          $ref: '#/components/schemas/BudMonetaryValue'
    RegularPaymentChangedInsightDataResponse:
      title: Regular Payment Changed Insight Details Response
      description: Details response for a 'regular payment changed' insight
      allOf:
        - $ref: '#/components/schemas/CommonInsightDataResponse'
        - type: object
          properties:
            type:
              type: string
              enum:
                - regular_payment_changed
            details:
              $ref: '#/components/schemas/RegularPaymentChangedInsightDetails'
    SuspectedDuplicateChargeInsightDataResponse:
      title: Suspected Duplicate Charge Insight Details Response
      description: Details response for a 'suspected duplicate charge' insight
      allOf:
        - $ref: '#/components/schemas/CommonInsightDataResponse'
        - type: object
          properties:
            type:
              type: string
              enum:
                - suspected_duplicate_charge
            details:
              type: object
              additionalProperties: false
              description: Always empty for this insight type.
    SpendingInsightsDataResponse:
      title: Spending Insight Details Response
      description: Details response for a spending insight
      type: object
      required:
        - data
        - operation_id
        - metadata
      properties:
        operation_id:
          type: string
          enum:
            - insights_v1_actionable_spending_details_get
        data:
          oneOf:
            - $ref: '#/components/schemas/LatePaymentInsightDataResponse'
            - $ref: '#/components/schemas/NewInsuranceExpenseInsightDataResponse'
            - $ref: '#/components/schemas/RegularPaymentChangedInsightDataResponse'
            - $ref: '#/components/schemas/SuspectedDuplicateChargeInsightDataResponse'
        metadata:
          type: object
          required:
            - from
            - to
            - options
          properties:
            from:
              $ref: '#/components/schemas/DateTimeISO8601'
            to:
              $ref: '#/components/schemas/DateTimeISO8601'
            options:
              type: array
              items:
                $ref: '#/components/schemas/InsightOption'
    CustomerCharacteristicSimple:
      title: Customer Characteristic
      type: object
      properties:
        type:
          title: Characteristic Type
          type: string
          description: |
            The type of customer characteristic. Currently supported values include:
            - `credit_card`
            - `loan`
            - `overdraft`
            - `saver`

            However clients integrating with this endpoint should expect more to be added without notice.
        link:
          title: Characteristic Details Link
          type: string
          description: The URL to follow to get detailed Characteristic information about the customer.
    GetCustomerCharacteristicsResponse:
      title: Retrieve Customer Characteristics Response
      type: object
      required:
        - operation_id
        - data
      properties:
        operation_id:
          type: string
          enum:
            - characteristics_v1_customer_get
        data:
          type: array
          items:
            $ref: '#/components/schemas/CustomerCharacteristicSimple'
    components_schemas-Categories:
      title: Categories
      type: object
      description: |
        Categories enrichment associated with a Transaction, as generated by Bud's artificial intelligence models.
        Currently two levels of category are supported, with `l1` being a coarse-grained category level and `l2` being more refined.
      properties:
        l1:
          $ref: '#/components/schemas/Category'
          description: Level 1 Category
        l2:
          $ref: '#/components/schemas/Category'
          description: Level 2 Category
    CustomerCharacteristicTransaction:
      title: Customer Characteristic Transaction
      type: object
      description: A financial transaction
      required:
        - transaction_id
        - account_id
        - description
        - amount
        - credit_debit_indicator
        - status
        - date_time
      properties:
        transaction_id:
          type: string
          description: Unique identifier for the transaction. May be mutable depending on original ingestion source.
        account_id:
          type: string
          description: Identifier for the account associated with the transaction.
        provider:
          type: string
          description: Name of the transaction source provider. Optional as it may not have been supplied when using first party data.
        description:
          type: string
          description: Description of the transaction.
        credit_debit_indicator:
          type: string
          description: Credit/Debit Indicator
          enum:
            - credit
            - debit
        status:
          type: string
          description: Status of the transaction. Defaults to booked.
          enum:
            - booked
            - pending
        amount:
          $ref: '#/components/schemas/BudAmount'
        date_time:
          type: string
          description: Date of the transaction compliant with RFC3339.
        enrichments:
          type: object
          description: Contextual enrichments associated with a Transaction
          properties:
            categories:
              $ref: '#/components/schemas/components_schemas-Categories'
    TransactionTotal:
      type: object
      description: Totals of all included transactions for the specified currency.
      required:
        - amount
        - credit_debit_indicator
      properties:
        amount:
          $ref: '#/components/schemas/BudAmount'
        credit_debit_indicator:
          type: string
          description: Credit/Debit Indicator
          enum:
            - credit
            - debit
    GetCreditCardCharacteristicsResponse:
      title: Get Credit Card Customer Characteristics Response
      type: object
      required:
        - operation_id
        - data
      properties:
        operation_id:
          type: string
          enum:
            - characteristics_v1_customer_credit_card_get
        data:
          type: object
          properties:
            credit_card_transactions:
              type: array
              items:
                $ref: '#/components/schemas/CustomerCharacteristicTransaction'
            credit_card_transaction_totals:
              type: array
              items:
                $ref: '#/components/schemas/TransactionTotal'
    GetLoanCharacteristicsResponse:
      title: Get Loan Customer Characteristics Response
      type: object
      required:
        - operation_id
        - data
      properties:
        operation_id:
          type: string
          enum:
            - characteristics_v1_customer_loan_get
        data:
          type: object
          properties:
            loan_transactions:
              type: array
              items:
                $ref: '#/components/schemas/CustomerCharacteristicTransaction'
            loan_transaction_totals:
              type: array
              items:
                $ref: '#/components/schemas/TransactionTotal'
    GetOverdraftCharacteristicsResponse:
      title: Get Overdraft Customer Characteristics Response
      type: object
      required:
        - operation_id
        - data
      properties:
        operation_id:
          type: string
          enum:
            - characteristics_v1_customer_overdraft_get
        data:
          type: object
          properties:
            overdraft_transactions:
              type: array
              items:
                $ref: '#/components/schemas/CustomerCharacteristicTransaction'
            overdraft_transaction_totals:
              type: array
              items:
                $ref: '#/components/schemas/TransactionTotal'
    GetSaverCharacteristicsResponse:
      title: Get Saver Customer Characteristics Response
      type: object
      required:
        - operation_id
        - data
      properties:
        operation_id:
          type: string
          enum:
            - characteristics_v1_customer_saver_get
        data:
          type: object
          properties:
            saver_transactions:
              type: array
              items:
                $ref: '#/components/schemas/CustomerCharacteristicTransaction'
            saver_transaction_totals:
              type: array
              items:
                $ref: '#/components/schemas/TransactionTotal'
    IngestResponseV2SubTask:
      title: Customer Ingest Task
      description: A single customer ingest task status
      type: object
      required:
        - customer_id
        - status
        - error
      properties:
        customer_id:
          type: string
          format: uuid
          description: A unique identifier for a Customer, as registered on Bud's platform.
        status:
          title: Ingest Response Status
          description: Ingest response status.
          type: string
          enum:
            - Completed
            - Failed
        error:
          nullable: true
          description: Any error messages describing why a sub task has failed.
          type: object
          additionalProperties: true
  parameters:
    IngestAccountsContentType:
      in: header
      name: Content-Type
      required: true
      schema:
        type: string
        enum:
          - application/plaid-accounts-v1+json
          - application/finicity-accounts-v1+json
          - application/bud-accounts+json
    V2IngestTransactionsContentType:
      in: header
      name: Content-Type
      required: true
      schema:
        type: string
        enum:
          - application/plaid-transactions-v1+json
          - application/finicity-transactions-v1+json
          - application/bud-transaction-v3+json
      description: Define the transactions' format for this request.
    ClientId:
      in: header
      name: X-Client-Id
      schema:
        type: string
      required: true
      description: The API Client Identifier (Service Application Identifier).
      example: 8711bbef-b357-4c2d-97ca-0d9df4206e9a
    TaskId:
      in: path
      name: task_id
      schema:
        type: string
        format: uuid
      required: true
      description: Bud Task identifier returned from an async task for the requested action
    PathCustomerID:
      in: path
      name: customer_id
      schema:
        type: string
        format: uuid
      required: true
      description: A unique identifier for a Customer, as registered on Bud's platform.
      example: c3339af9-2426-44d4-9c4d-ddb8fd281e23
    USBankingProvidersQueryRegionFilter:
      in: query
      required: false
      name: region
      description: A comma separated list of Bud regions to be shown. If no filter is applied, all the providers are returned.
      schema:
        type: string
        enum:
          - USA
    CustomerId:
      in: header
      name: X-Customer-Id
      schema:
        type: string
        format: uuid
      required: true
      description: A unique identifier for a Customer, as registered on Bud's platform.
      example: c3339af9-2426-44d4-9c4d-ddb8fd281e23
    SignatureHeaderParameter:
      in: header
      name: X-Signature
      description: The signed request body JWT
      required: true
      schema:
        type: string
    SigningIdHeaderParameter:
      in: header
      name: X-Signing-ID
      description: The public key ID which should be used to verify the X-Signature header. Bud's list of public keys can be found at https://assets.thisisbud.com/bud-callback.jwks
      required: true
      schema:
        type: string
    ConnectionTaskId:
      in: path
      name: connection_task_id
      schema:
        type: string
        format: uuid
      required: true
      description: Unique identifier related to a specific connection task
    CustomerSecret:
      in: header
      name: X-Customer-Secret
      schema:
        type: string
      required: false
      description: The Bud Customer secret used to encrypt customer data. This is required only if the customer secret is not already stored with Bud.
    ConsentStatus:
      in: query
      name: status
      schema:
        type: string
        enum:
          - all
          - active
          - reconfirm_due
      required: false
      description: By default this endpoint only returns `active` Authorised connections. To retrieve `all` consents, add this query param with the value of `all`. To retrieve consents where reconfirmation is required add this query param with the value of `reconfirm_due`.
    DisableSynchronous:
      in: header
      name: X-Disable-Synchronous
      description: |
        If provided as true, the task will **not** be processed synchronously.

        If false or the header is not included, the task **will** be processed synchronously.
      schema:
        type: boolean
    GenerateTransactionIDs:
      in: header
      name: X-Generate-Transaction-IDs
      schema:
        type: string
        enum:
          - 'true'
      example: 'true'
      description: |
        Enable transaction ID generation based on the contents of the transaction data. The transaction ID field still needs to be provided, but it will not be validated or checked for uniqueness and instead overwritten with a generated value.
        When generating IDs from transaction data, the following fields are taken into account: account ID, description, amount, currency and date.
    QueryCurrencyUSD:
      in: query
      name: currency
      schema:
        type: string
      example: USD
      description: Use this parameter to filter the results returned on the `currency` associated with each result. Multiple values are accepted. If this parameter is not provided then results of any `currency` will be returned.
    QueryProvider:
      in: query
      name: provider
      schema:
        type: string
      example: BankOfBud
      description: Use this parameter to filter the results returned on the `provider` associated with each result. Multiple values are accepted. If this parameter is not provided then results of any `provider` will be returned.
    QueryFromBudDate:
      in: query
      name: from
      schema:
        type: string
      example: '2019-02-29T12:23:00Z'
      description: |
        The date from when results are to be retrieved in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).

        Examples:
          - `2023-01-17T17:29:51Z`
          - `2023-01-17T17:29:51-08:00`
    QueryToBudDate:
      in: query
      name: to
      schema:
        type: string
      example: '2019-02-29T12:23:00Z'
      description: |
        The date up to when results are to be retrieved in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).

        Examples:
          - `2023-03-17T17:29:51Z`
          - `2023-03-17T17:29:51-08:00`
    QueryDateField:
      in: query
      name: date-field
      schema:
        type: string
      example: date_time
      description: |
        Specifies which date field as returned from the `/financial/v2/transactions` endpoint should be used in the calculation of balance over time.

        Currently supported values include (but are not necessarily limited to):
          - `date_time`
          - `posted_date_time`

        Defaults to `date_time`.
    PathAccountID:
      in: path
      name: account_id
      schema:
        type: string
      required: true
      description: The account ID to retrieve data for.
    QueryExcludeSource:
      in: query
      name: exclude_source
      schema:
        type: boolean
      required: false
      description: Toggle whether the endpoint returns the transaction used as part of the request
    PathTransactionID:
      in: path
      name: transaction_id
      schema:
        type: string
        format: uuid
      required: true
      description: A transaction identifier
    CategoryTotalsQueryFromTimestamp:
      in: query
      name: from
      schema:
        type: string
      example: '2023-05-21T07:20:50.52Z'
      description: |
        The date from when results are to be retrieved in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).

        Defaults to 6 months ago.

        Examples:
          - `2023-01-17T17:29:51Z`
          - `2023-01-17T17:29:51-08:00`
    CategoryTotalsQueryToTimestamp:
      in: query
      name: to
      schema:
        type: string
      example: '2023-06-21T07:20:50.52Z'
      description: |
        The date up to when results are to be retrieved in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).

        Defaults to today.

        Examples:
          - `2023-03-17T17:29:51Z`
          - `2023-03-17T17:29:51-08:00`
    QueryBudCategory:
      in: query
      name: category
      schema:
        type: string
      example: shopping
      description: |
        Use this parameter to filter the results on l1 categories to include.
        Accepts multiple values, or values separated by comma.

        To specify l2 categories to include, use the following format: `l1.l2`.

        Examples:
          - `shopping` - Filters the result set to only include data where the l1 category is `shopping`.
          - `shopping.groceries` - Filters the result set to only include data where the l1 category is `shopping` and the l2 category is `groceries`.
    QueryCurrency:
      in: query
      name: currency
      schema:
        type: string
      example: GBP
      description: Use this parameter to filter the results returned on the `currency` associated with each result. Multiple values are accepted. If this parameter is not provided then results of any `currency` will be returned.
    CategoryTotalsQueryCategoryFilter:
      in: query
      name: category_label
      schema:
        type: string
      example: essential
      description: |
        Filters the categories included in the category totals to just those with the label(s) specified by this parameter.
        For the SOT on which categories have which filters see the Retrieve Categories endpoint.
    MerchantsTotalsIncludeCategories:
      in: header
      name: X-Include-Categories
      schema:
        type: string
      example: shopping,entertainment
      description: Comma-separated list of transaction categories to include in the total
    MerchantsTotalsExcludeCategories:
      in: header
      name: X-Exclude-Categories
      schema:
        type: string
      example: bills,finances
      description: Comma-separated list of transaction categories to exclude from the total
    FutureTransactionsMonthsProjection:
      in: query
      name: months
      schema:
        type: integer
        default: 3
      required: false
      example: 6
      description: To specify how many months we return the prediction for, the default is 3 months.
    FutureTransactionsChangePercentage:
      in: query
      name: change_percentage[subcategory]
      schema:
        type: number
        default: 2
      required: false
      description: To set a percentage value used in the calculation of the forecasted amount for the future transactions categorised with specific transaction subcategory; for example `change_percentage[loans]=2.0`. This can be a positive or negative float number. To apply the same percentage to all transactions use the `subcategory=all`.
    SmartFinderFrom:
      in: header
      name: X-From
      required: false
      schema:
        type: string
      examples:
        date_only:
          value: '2022-02-28'
        RFC3339:
          value: '2019-02-28T07:20:50.52Z'
      description: Transaction from date, this works in pair with the 'X-To' parameter
    SmartFinderTo:
      in: header
      name: X-To
      required: false
      schema:
        type: string
      examples:
        date_only:
          value: '2022-03-30'
        RFC3339:
          value: '2019-03-30T07:20:50.52Z'
      description: Transaction to date, this works in pair with the 'X-From' parameter
    QueryFromDate:
      in: query
      name: from
      schema:
        type: string
      example: '2019-02-29'
      description: 'Filter from this date (format: `YYYY-MM-DD`).'
    QueryToDate:
      in: query
      name: to
      schema:
        type: string
      example: '2019-02-29'
      description: 'Filter to this date (format: `YYYY-MM-DD`).'
    From:
      in: header
      name: X-From
      schema:
        type: string
      example: '2022-01-29'
      description: Transaction from date
    To:
      in: header
      name: X-To
      schema:
        type: string
      example: '2022-03-29'
      description: Transaction to date
    QueryBudAccountID:
      in: query
      name: account_id
      schema:
        type: string
      example: RxsYshVGded4JeilkXgWKdXA
      description: |
        Use this parameter to filter the results on data associated with the given account id.

        Example: `RxsYshVGded4JeilkXgWKdXA`
    QueryDay:
      in: query
      name: day
      schema:
        type: string
      example: '2019-02-29T12:23:00Z'
      description: |
        The day for which results are to be retrieved in the format [RFC 3339](https://www.rfc-editor.org/rfc/rfc3339).

        Examples:
          - `2023-01-17T17:29:51Z`
          - `2023-01-17T17:29:51-08:00`
    PathGoalID:
      name: goal_id
      in: path
      schema:
        type: string
      required: true
      description: |
        The ID of the savings goal.

        Example: `81a68821-dca6-4771-80d4-002c7fce412e`
      example: 81a68821-dca6-4771-80d4-002c7fce412e
    QueryBudPageToken:
      in: query
      name: page_token
      schema:
        type: string
      example: b21055a9a9f46fc794a2e6855c65abd7e317181039fc6930daabac5822911d14a84895ecd947e2b5abdcb22e4fcc2c594e1f661dc63e34b9ba88760724047990896f7581a0786c2605dce19c6a9d80d1044f963b74fea0a929c0a4465a6e67378a74dce38ec5e26ae4cc804b62fd666d5df4cf2e7f524bd99e5523bc5d471768065c036dc0c73122705b280817fbbd7d9aa31f271d72cd3877d999dcb9a5b1c0be0c05
      description: Use this paramater to fetch a specific page of results. Provided by the next_page_token field in the previous request.
    QueryBudPageSize:
      in: query
      name: page_size
      schema:
        type: integer
      example: 200
      description: Use this parameter to set the maximum number of results to be returned. This defaults to 100, and has a maximum of 200.
    PathGoalActionID:
      name: goal_action_id
      in: path
      schema:
        type: string
      required: true
      description: |
        The ID of the savings goal action.

        Example: `884d3e01-757c-4963-8e97-c1be109bbbcc`
      example: 884d3e01-757c-4963-8e97-c1be109bbbcc
    PathSpendingBudgetID:
      name: budget_id
      in: path
      schema:
        type: string
      required: true
      description: |
        The ID of the spending budget.

        Example: `81a68821-dca6-4771-80d4-002c7fce412e`
      example: 81a68821-dca6-4771-80d4-002c7fce412e
    parameters-From:
      in: query
      name: from
      required: false
      description: A start time to check financial data for insights from. Configures the earliest financial data which may be used to generate insights. If omitted, defaults to the start of the sixth complete month prior to the latest ingested financial data. Note that some insights will only be checked for complete months entirely between the `from` and `to` dates.
      schema:
        $ref: '#/components/schemas/DateTimeISO8601'
    parameters-To:
      in: query
      name: to
      required: false
      description: An end time to check financial data for insights up to. Configures the latest financial data which may be used to generate insights. If omitted, defaults to the date of the latest ingested financial data. Note that some insights will only be checked for complete months entirely between the `from` and `to` dates. Insights relating to potential future events, such as cannot_cover_bills, may forecast them up to a month after this point.
      schema:
        $ref: '#/components/schemas/DateTimeISO8601'
    BalancesEnabledInsights:
      in: query
      name: enabled_insights
      required: false
      schema:
        type: string
        description: A comma-separated list of insight types to check for. If not specified, a default list will be used, which may be added to over time.
        example: in_overdraft
        enum:
          - cannot_cover_bills
          - in_overdraft
          - close_to_credit_limit
          - low_balance
    CloseToCreditLimitPercentageUtilisationThreshold:
      in: query
      name: close_to_credit_limit.percentage_utilisation_threshold
      required: false
      schema:
        type: number
        description: A minimum percentage utilisation of the credit limit for this insight to trigger. If not specified, a configured value will be used. Please note that including this request on a customer level will increase latency of this endpoint. Instead, we recommend to update the thresholds for your organisation by raising a support request.
    LowBalanceBalanceThreshold:
      in: query
      name: low_balance.balance_threshold
      required: false
      schema:
        type: number
        description: A balance threshold such that balances lower than this will trigger the low balance insight. If not specified, a configured value will be used. Please note that including this request on a customer level will increase latency of this endpoint. Instead, we recommend to update the thresholds for your organisation by raising a support request.
    BalancesInsightType:
      in: path
      name: type
      required: true
      schema:
        type: string
        description: A type of balances insight available on the platform.
        example: in_overdraft
        enum:
          - cannot_cover_bills
          - in_overdraft
          - close_to_credit_limit
          - low_balance
    InsightID:
      in: path
      name: id
      required: true
      schema:
        type: string
        description: The insight ID to provide data for,
        example: late_income_8789764a-df2f-4589-b550-00bcd0e9cb2c
    IncomeEnabledInsights:
      in: query
      name: enabled_insights
      required: false
      schema:
        type: string
        description: A comma-separated list of insight types to check for. If not specified, a default list will be used, which may be added to over time.
        example: late_income
        enum:
          - late_income
          - regular_monthly_income_changed
          - gambling_income
          - pension_income
    GamblingIncomeMinimumMonthlyThreshold:
      in: query
      name: gambling_income.minimum_monthly_threshold
      required: false
      schema:
        type: number
        description: A minimum absolute total of gambling income for the insight to trigger. Both `gambling_income.minimum_monthly_threshold` and `gambling_income.minimum_percentage_total_threshold` must be met to trigger. If not specified, a configured value will be used. Please note that including this request on a customer level will increase latency of this endpoint. Instead, we recommend to update the thresholds for your organisation by raising a support request.
    GamblingIncomeMinimumPercentageTotalThreshold:
      in: query
      name: gambling_income.minimum_percentage_total_threshold
      required: false
      schema:
        type: number
        description: A minimum percentage of all income that must be gambling income for the insight to trigger. Both `gambling_income.minimum_monthly_threshold` and `gambling_income.minimum_percentage_total_threshold` must be met to trigger. If not specified, a configured value will be used. Please note that including this request on a customer level will increase latency of this endpoint. Instead, we recommend to update the thresholds for your organisation by raising a support request.
    LateIncomeMinimumValueThreshold:
      in: query
      name: late_income.minimum_value_threshold
      required: false
      schema:
        type: number
        description: A minimum value of a late transaction in that transaction's currency for the insight to trigger. Both `late_income.minimum_value_threshold` and `late_income.minimum_days_late_threshold` must be met to trigger. If not specified, a configured value will be used. Please note that including this request on a customer level will increase latency of this endpoint. Instead, we recommend to update the thresholds for your organisation by raising a support request.
    LateIncomeMinimumDaysLateThreshold:
      in: query
      name: late_income.minimum_days_late_threshold
      required: false
      schema:
        type: number
        description: A minimum number of days late for a transaction to be for the insight to trigger. Both `late_income.minimum_value_threshold` and `late_income.minimum_days_late_threshold` must be met to trigger. If not specified, a configured value will be used. Please note that including this request on a customer level will increase latency of this endpoint. Instead, we recommend to update the thresholds for your organisation by raising a support request.
    PensionIncomeMinimumMonthlyThreshold:
      in: query
      name: pension_income.minimum_monthly_threshold
      required: false
      schema:
        type: number
        description: A minimum absolute total of pension income for the insight to trigger. Both `pension_income.minimum_monthly_threshold` and `pension_income.minimum_percentage_total_threshold` must be met to trigger. If not specified, a configured value will be used. Please note that including this request on a customer level will increase latency of this endpoint. Instead, we recommend to update the thresholds for your organisation by raising a support request.
    PensionIncomeMinimumPercentageTotalThreshold:
      in: query
      name: pension_income.minimum_percentage_total_threshold
      required: false
      schema:
        type: number
        description: A minimum percentage of all income that must be pension income for the insight to trigger.. Both `pension_income.minimum_monthly_threshold` and `pension_income.minimum_percentage_total_threshold` must be met to trigger. If not specified, a configured value will be used. Please note that including this request on a customer level will increase latency of this endpoint. Instead, we recommend to update the thresholds for your organisation by raising a support request.
    RegularIncomeChangedMinimumAbsoluteChangeThreshold:
      in: query
      name: regular_income_changed.minimum_absolute_change_threshold
      required: false
      schema:
        type: number
        description: A minimum absolute change between the previous and latest amounts of a regular payment for the insight to trigger. Both `regular_income_changed.minimum_absolute_change_threshold` and `regular_income_changed.minimum_percentage_change_threshold` must be met to trigger. If not specified, a configured value will be used. Please note that including this request on a customer level will increase latency of this endpoint. Instead, we recommend to update the thresholds for your organisation by raising a support request.
    RegularIncomeChangedMinimumPercentageChangeThreshold:
      in: query
      name: regular_income_changed.minimum_percentage_change_threshold
      required: false
      schema:
        type: number
        description: A minimum percentage change between the previous and latest amounts of a regular payment for the insight to trigger. Both `regular_income_changed.minimum_absolute_change_threshold` and `regular_income_changed.minimum_percentage_change_threshold` must be met to trigger. If not specified, a configured value will be used. Please note that including this request on a customer level will increase latency of this endpoint. Instead, we recommend to update the thresholds for your organisation by raising a support request.
    IncomeInsightType:
      in: path
      name: type
      required: true
      schema:
        type: string
        description: A type of income insight available on the platform.
        example: late_income
        enum:
          - late_income
          - regular_monthly_income_changed
          - gambling_income
          - pension_income
    SpendingEnabledInsights:
      in: query
      name: enabled_insights
      required: false
      schema:
        type: string
        description: A comma-separated list of insight types to check for. If not specified, a default list will be used, which may be added to over time.
        example: late_payment
        enum:
          - late_payment
          - suspected_duplicate_charge
          - regular_payment_changed
          - new_insurance_expense
    LatePaymentMinimumValueThreshold:
      in: query
      name: late_payment.minimum_value_threshold
      required: false
      schema:
        type: number
        description: A minimum value of a late transaction in that transaction's currency for the insight to trigger. Both `late_payment.minimum_value_threshold` and `late_payment.minimum_days_late_threshold` must be met to trigger. If not specified, a configured value will be used. Please note that including this request on a customer level will increase latency of this endpoint. Instead, we recommend to update the thresholds for your organisation by raising a support request.
    LatePaymentMinimumDaysLateThreshold:
      in: query
      name: late_payment.minimum_days_late_threshold
      required: false
      schema:
        type: number
        description: A minimum number of days late for a transaction to be for the insight to trigger. Both `late_payment.minimum_value_threshold` and `late_payment.minimum_days_late_threshold` must be met to trigger. If not specified, a configured value will be used.
    RegularPaymentChangedMinimumAbsoluteChangeThreshold:
      in: query
      name: regular_payment_changed.minimum_absolute_change_threshold
      required: false
      schema:
        type: number
        description: A minimum absolute change between the previous and latest amounts of a regular payment for the insight to trigger. Both `regular_payment_changed.minimum_absolute_change_threshold` and `regular_payment_changed.minimum_percentage_change_threshold` must be met to trigger. If not specified, a configured value will be used. Please note that including this request on a customer level will increase latency of this endpoint. Instead, we recommend to update the thresholds for your organisation by raising a support request.
    RegularPaymentChangedMinimumPercentageChangeThreshold:
      in: query
      name: regular_payment_changed.minimum_percentage_change_threshold
      required: false
      schema:
        type: number
        description: A minimum percentage change between the previous and latest amounts of a regular payment for the insight to trigger. Both `regular_payment_changed.minimum_absolute_change_threshold` and `regular_payment_changed.minimum_percentage_change_threshold` must be met to trigger. If not specified, a configured value will be used. Please note that including this request on a customer level will increase latency of this endpoint. Instead, we recommend to update the thresholds for your organisation by raising a support request.
    SpendingInsightType:
      in: path
      name: type
      required: true
      schema:
        type: string
        description: A type of spending insight available on the platform.
        example: late_payment
        enum:
          - late_payment
          - suspected_duplicate_charge
          - regular_payment_changed
          - new_insurance_expense
    PathCustomInsightID:
      in: path
      name: custom_insight_id
      required: true
      schema:
        type: string
        format: uuid
x-tagGroups:
  - name: ''
    tags:
      - OAuth2
      - Authentication
  - name: ''
    tags:
      - Manage Customers
      - Customers API
  - name: ''
    tags:
      - Create a Connection
      - Manage a Connection
      - Ingest First Party Data
      - Connect API
  - name: ''
    tags:
      - Retrieve Financial Data
      - Correct Financial Data
      - Financial Data API
  - name: ''
    tags:
      - Enrichment Totals
      - Enrichment Resources
      - Enrichment API
  - name: ''
    tags:
      - Regular Payments Finder
      - Income Finder
      - Loan Finder
      - Debt Collection Finder
      - Product Finder
      - Subscription Finder
      - Smart Finders API
  - name: ''
    tags:
      - Savings Goals
      - Spending Budgets
      - Goals API
  - name: ''
    tags:
      - Retrieve Actionable Insights
      - Custom Insights
      - Insights API
  - name: ''
    tags:
      - Retrieve Customer Characteristics
      - Characteristics API
